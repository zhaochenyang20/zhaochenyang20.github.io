<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>oopç¬”è®°  L9  å¤šæ€ä¸æ¨¡æ¿ | ä½ å°†å­¤å•è€Œåº¦è¿‡ä¸€ç”Ÿ</title><meta name="keywords" content="è·ªç³»çš„æ™®é€šå­¦ç”Ÿ"><meta name="author" content="Eren Zhao"><meta name="copyright" content="Eren Zhao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="è¿™ä¸€èŠ‚åœ¨DSAä¸­å¹¿æ³›(ç®€å•åœ°)ä½¿ç”¨">
<meta property="og:type" content="article">
<meta property="og:title" content="oopç¬”è®°  L9  å¤šæ€ä¸æ¨¡æ¿">
<meta property="og:url" content="http://example.com/2022/01/12/Lecture/%E4%BB%8E%E5%89%8D%E7%9A%84%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/OOP/L9%20%E5%A4%9A%E6%80%81%E4%B8%8E%E6%A8%A1%E6%9D%BF/index.html">
<meta property="og:site_name" content="ä½ å°†å­¤å•è€Œåº¦è¿‡ä¸€ç”Ÿ">
<meta property="og:description" content="è¿™ä¸€èŠ‚åœ¨DSAä¸­å¹¿æ³›(ç®€å•åœ°)ä½¿ç”¨">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/zhaochenyang20/ivue_wallpaper/main/ivue_desktop/Photo by eberhard ğŸ– grossgasteiger (mWuXdxtesG0).jpg">
<meta property="article:published_time" content="2022-01-12T08:33:22.000Z">
<meta property="article:modified_time" content="2022-01-12T08:45:59.765Z">
<meta property="article:author" content="Eren Zhao">
<meta property="article:tag" content="è·ªç³»çš„æ™®é€šå­¦ç”Ÿ">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/zhaochenyang20/ivue_wallpaper/main/ivue_desktop/Photo by eberhard ğŸ– grossgasteiger (mWuXdxtesG0).jpg"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="http://example.com/2022/01/12/Lecture/%E4%BB%8E%E5%89%8D%E7%9A%84%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/OOP/L9%20%E5%A4%9A%E6%80%81%E4%B8%8E%E6%A8%A1%E6%9D%BF/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"éº»äº†ï¼Œæ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"limitCount":50,"languages":{"author":"ä½œè€…: Eren Zhao","link":"é“¾æ¥: ","source":"æ¥æº: ä½ å°†å­¤å•è€Œåº¦è¿‡ä¸€ç”Ÿ","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'oopç¬”è®°  L9  å¤šæ€ä¸æ¨¡æ¿',
  isPost: true,
  isHome: false,
  isHighlightShrink: true,
  isToc: true,
  postUpdate: '2022-01-12 16:45:59'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.0.0"><style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}</style></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpeg" onerror="onerror=null;src='/img/friend.jpg'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">187</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">55</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">12</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://raw.githubusercontent.com/zhaochenyang20/ivue_wallpaper/main/ivue_desktop/Photo by eberhard ğŸ– grossgasteiger (mWuXdxtesG0).jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">ä½ å°†å­¤å•è€Œåº¦è¿‡ä¸€ç”Ÿ</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">oopç¬”è®°  L9  å¤šæ€ä¸æ¨¡æ¿</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2022-01-12T08:33:22.000Z" title="å‘è¡¨äº 2022-01-12 16:33:22">2022-01-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2022-01-12T08:45:59.765Z" title="æ›´æ–°äº 2022-01-12 16:45:59">2022-01-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/oop/">oop</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">7.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>30åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="oopç¬”è®°  L9  å¤šæ€ä¸æ¨¡æ¿"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="L9-å¤šæ€ä¸æ¨¡æ¿"><a href="#L9-å¤šæ€ä¸æ¨¡æ¿" class="headerlink" title="L9 å¤šæ€ä¸æ¨¡æ¿"></a>L9 å¤šæ€ä¸æ¨¡æ¿</h1><h1 id="ä¸€ã€æŠ½è±¡ç±»ä¸çº¯è™šå‡½æ•°"><a href="#ä¸€ã€æŠ½è±¡ç±»ä¸çº¯è™šå‡½æ•°" class="headerlink" title="ä¸€ã€æŠ½è±¡ç±»ä¸çº¯è™šå‡½æ•°"></a>ä¸€ã€æŠ½è±¡ç±»ä¸çº¯è™šå‡½æ•°</h1><h2 id="1-1-å®šä¹‰"><a href="#1-1-å®šä¹‰" class="headerlink" title="1.1  å®šä¹‰"></a>1.1  å®šä¹‰</h2><p>è™šå‡½æ•°è¿˜å¯ä»¥è¿›ä¸€æ­¥å£°æ˜ä¸ºçº¯è™šå‡½æ•°ï¼Œåªè¦åŒ…å«æœ‰ä¸€ä¸ªçº¯è™šå‡½æ•°çš„ç±»ï¼Œå³ä¸ºâ€œæŠ½è±¡ç±»â€ã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p>
<p><code>virtual è¿”å›ç±»å‹ å‡½æ•°å(å½¢å¼å‚æ•°) = 0;</code></p>
<p><strong>æŠ½è±¡ç±»ä¸å…è®¸å®šä¹‰å¯¹è±¡</strong>ã€‚ï¼ˆnewä¹Ÿç®—æ˜¯å®šä¹‰å¯¹è±¡ã€‚ï¼‰</p>
<p>å®šä¹‰åŸºç±»ä¸ºæŠ½è±¡ç±»çš„ä¸»è¦ç”¨é€”æ˜¯ä¸ºæ´¾ç”Ÿç±»è§„å®šå…±æ€§â€œæ¥å£â€ã€‚èƒ½é¿å…èµ‹å€¼å‹å¯¹è±¡åˆ‡ç‰‡ï¼šä¿è¯åªæœ‰æŒ‡é’ˆå’Œå¼•ç”¨èƒ½è¢«å‘ä¸Šç±»å‹è½¬æ¢ã€‚ï¼ˆå› ä¸ºæŠ½è±¡ç±»æ— æ³•å®šä¹‰å¯¹è±¡ï¼Œä½†æ˜¯å¯ä»¥å®šä¹‰æŒ‡é’ˆå’Œå¼•ç”¨ï¼‰</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">A</span>Â &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">virtual</span>Â <span class="keyword">void</span>Â <span class="title">f</span><span class="params">()</span>Â </span>=Â <span class="number">0</span>;Â <span class="comment">///Â å¯åœ¨ç±»å¤–å®šä¹‰å‡½æ•°ä½“æä¾›é»˜è®¤å®ç°ã€‚æ´¾ç”Ÿç±»é€šè¿‡Â A::f()Â è°ƒç”¨</span></span><br><span class="line">&#125;;</span><br><span class="line">AÂ obj;Â <span class="comment">///Â ä¸å‡†æŠ½è±¡ç±»å®šä¹‰å¯¹è±¡ï¼ç¼–è¯‘ä¸é€šè¿‡ï¼</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>Â <span class="keyword">namespace</span>Â std;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">Pet</span>Â &#123;</span>Â </span><br><span class="line"><span class="keyword">public</span>:Â Â </span><br><span class="line">Â Â <span class="function"><span class="keyword">virtual</span>Â <span class="keyword">void</span>Â <span class="title">motion</span><span class="params">()</span></span>=<span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span>Â <span class="title">Pet::motion</span><span class="params">()</span></span>&#123;Â coutÂ &lt;&lt;Â <span class="string">&quot;PetÂ motion:Â &quot;</span>Â &lt;&lt;Â endl;Â &#125;Â </span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">Dog</span>:</span>Â <span class="keyword">public</span>Â PetÂ &#123;Â </span><br><span class="line"><span class="keyword">public</span>:Â </span><br><span class="line">Â Â <span class="function"><span class="keyword">void</span>Â <span class="title">motion</span><span class="params">()</span>Â <span class="keyword">override</span>Â </span>&#123;Pet::<span class="built_in">motion</span>();Â coutÂ &lt;&lt;Â <span class="string">&quot;dogÂ run&quot;</span>Â &lt;&lt;Â endl;Â &#125;Â </span><br><span class="line">&#125;;<span class="comment">//é‡å†™è¦†ç›–åï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¦‚d1.Base::foo();æ¥è°ƒç”¨åŸºç±»å‡½æ•°ã€‚</span></span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">Bird</span>:</span>Â <span class="keyword">public</span>Â PetÂ &#123;</span><br><span class="line"><span class="keyword">public</span>:Â </span><br><span class="line">Â Â <span class="function"><span class="keyword">void</span>Â <span class="title">motion</span><span class="params">()</span>Â <span class="keyword">override</span>Â </span>&#123;Pet::<span class="built_in">motion</span>();Â coutÂ &lt;&lt;Â <span class="string">&quot;birdÂ fly&quot;</span>Â &lt;&lt;Â endl;Â &#125;Â </span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span>Â </span>&#123;</span><br><span class="line">Â Â Pet*Â pÂ =Â <span class="keyword">new</span>Â Dog;Â <span class="comment">///Â å‘ä¸Šç±»å‹è½¬æ¢</span></span><br><span class="line">Â Â p-&gt;<span class="built_in">motion</span>();</span><br><span class="line">Â Â pÂ =Â <span class="keyword">new</span>Â Bird;Â <span class="comment">///Â å‘ä¸Šç±»å‹è½¬æ¢</span></span><br><span class="line">Â Â p-&gt;<span class="built_in">motion</span>();</span><br><span class="line">Â Â <span class="comment">//pÂ =Â newÂ Pet;Â ///Â ä¸å…è®¸å®šä¹‰æŠ½è±¡ç±»å¯¹è±¡</span></span><br><span class="line">Â Â <span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Output:Pet motion: </span><br><span class="line">dog run</span><br><span class="line">Pet motion: </span><br><span class="line">bird fly</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„åˆ°åœ¨L8 3.5ä¸­æœ‰æåˆ°è¿‡ï¼Œé‡å†™è¦†ç›–overrideä¸é‡å†™éšè—redefiningç›¸ä¼¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¦‚d1.Base::foo();æ¥è°ƒç”¨åŸºç±»å‡½æ•°ã€‚æ­¤ä¾‹ä¸­è™½ç„¶å‘ç”Ÿäº†é‡å†™è¦†ç›–ï¼Œä½†æ˜¯é€šè¿‡ç›´æ¥è°ƒç”¨Pet::motion();æ¥è°ƒç”¨äº†åŸºç±»å‡½æ•°ã€‚</p>
<h2 id="1-2-æŠ½è±¡ç±»ç»§æ‰¿"><a href="#1-2-æŠ½è±¡ç±»ç»§æ‰¿" class="headerlink" title="1.2  æŠ½è±¡ç±»ç»§æ‰¿"></a>1.2  æŠ½è±¡ç±»ç»§æ‰¿</h2><p>åŸºç±»çº¯è™šå‡½æ•°è¢«æ´¾ç”Ÿç±»é‡å†™è¦†ç›–ä¹‹å‰ä»æ˜¯çº¯è™šå‡½æ•°ã€‚å› æ­¤å½“ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»æ—¶ï¼Œé™¤çº¯è™šææ„å‡½æ•°å¤–ï¼ˆéšåè§£é‡Šï¼‰ï¼Œå¿…é¡»å®ç°æ‰€æœ‰çº¯è™šå‡½æ•°ï¼Œå¦åˆ™ç»§æ‰¿å‡ºçš„ç±»ä¹Ÿæ˜¯æŠ½è±¡ç±»ã€‚</p>
<h2 id="1-3-çº¯è™šææ„å‡½æ•°"><a href="#1-3-çº¯è™šææ„å‡½æ•°" class="headerlink" title="1.3  çº¯è™šææ„å‡½æ•°"></a>1.3  çº¯è™šææ„å‡½æ•°</h2><p>ææ„å‡½æ•°ä¹Ÿå¯ä»¥æ˜¯çº¯è™šå‡½æ•°ï¼Œ<strong>çº¯è™šææ„å‡½æ•°ä»ç„¶éœ€è¦å‡½æ•°ä½“</strong>ã€‚</p>
<p>ç›®çš„ï¼šä½¿åŸºç±»æˆä¸ºæŠ½è±¡ç±»ï¼Œä¸èƒ½åˆ›å»ºåŸºç±»çš„å¯¹è±¡ã€‚å¦‚æœæœ‰å…¶ä»–å‡½æ•°æ˜¯çº¯è™šå‡½æ•°ï¼Œåˆ™ææ„å‡½æ•°æ— è®ºæ˜¯å¦ä¸ºçº¯è™šçš„ï¼ŒåŸºç±»å‡ä¸ºæŠ½è±¡ç±»ã€‚</p>
<p>å®é™…ä¸Šç¼–ç¨‹çš„æ—¶å€™ä¸ä¼šå†™çº¯è™šææ„å‡½æ•°ï¼Œåªéœ€è¦å†™è™šææ„å‡½æ•°å°±å¯ä»¥äº†ã€‚</p>
<h2 id="1-4-çº¯è™šææ„å‡½æ•°å’Œå…¶ä»–çº¯è™šå‡½æ•°çš„åŒºåˆ«"><a href="#1-4-çº¯è™šææ„å‡½æ•°å’Œå…¶ä»–çº¯è™šå‡½æ•°çš„åŒºåˆ«" class="headerlink" title="1.4 çº¯è™šææ„å‡½æ•°å’Œå…¶ä»–çº¯è™šå‡½æ•°çš„åŒºåˆ«"></a>1.4 çº¯è™šææ„å‡½æ•°å’Œå…¶ä»–çº¯è™šå‡½æ•°çš„åŒºåˆ«</h2><p>ä¸€èˆ¬çš„çº¯è™šå‡½æ•°è¢«æ´¾ç”Ÿç±»é‡å†™è¦†ç›–ä¹‹å‰ä»æ˜¯çº¯è™šå‡½æ•°ã€‚å¦‚æœæ´¾ç”Ÿç±»ä¸è¦†ç›–çº¯è™šå‡½æ•°ï¼Œé‚£ä¹ˆæ´¾ç”Ÿç±»ä¹Ÿæ˜¯æŠ½è±¡ç±»ã€‚</p>
<p>ä½†å¯¹äºå¯¹äºçº¯è™šææ„å‡½æ•°è€Œè¨€ï¼Œå³ä¾¿æ´¾ç”Ÿç±»ä¸­ä¸æ˜¾å¼å®ç°ææ„å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šè‡ªåŠ¨åˆæˆé»˜è®¤ææ„å‡½æ•°ï¼Œå®Œæˆé‡å†™è¦†ç›–ï¼Œä½¿å¾—æ´¾ç”Ÿç±»ä¸æ˜¯æŠ½è±¡ç±»ã€‚æ•…è€Œï¼Œå³ä½¿æ´¾ç”Ÿç±»ä¸æ˜¾å¼è¦†ç›–çº¯è™šææ„å‡½æ•°ï¼Œåªè¦æ´¾ç”Ÿç±»å®Œå…¨è¦†ç›–äº†å…¶ä»–çº¯è™šå‡½æ•°ï¼Œè¯¥æ´¾ç”Ÿç±»å°±ä¸æ˜¯æŠ½è±¡ç±»ï¼Œå¯ä»¥å®šä¹‰æ´¾ç”Ÿç±»å¯¹è±¡ã€‚</p>
<p>ä¾‹1ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>Â <span class="keyword">namespace</span>Â std;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">Base</span>Â &#123;</span>Â </span><br><span class="line"><span class="keyword">public</span>:Â </span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">virtual</span>Â <span class="keyword">void</span>Â <span class="title">func</span><span class="params">()</span></span>=<span class="number">0</span>;Â </span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">Derive1</span>:</span>Â <span class="keyword">public</span>Â BaseÂ &#123;&#125;;Â <span class="comment">//Derive1ä»ä¸ºæŠ½è±¡ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">Derive2</span>:</span>Â <span class="keyword">public</span>Â BaseÂ &#123;</span><br><span class="line"><span class="keyword">public</span>:Â </span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">void</span>Â <span class="title">func</span><span class="params">()</span>Â </span>&#123;</span><br><span class="line">Â Â Â Â Â Â Â Â coutÂ &lt;&lt;Â <span class="string">&quot;Derive2::func&quot;</span>Â &lt;&lt;Â endl;</span><br><span class="line">&#125;Â </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Â Â Â Â <span class="comment">//Â Derive1Â d1;Â //ç¼–è¯‘é”™è¯¯ï¼ŒDerive1ä»ä¸ºæŠ½è±¡ç±»</span></span><br><span class="line">Â Â Â Â Derive2Â d2;</span><br><span class="line">Â Â Â Â d2.<span class="built_in">func</span>();</span><br><span class="line">Â Â Â Â <span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Outputï¼š</span><br><span class="line">Derive2::func</span><br></pre></td></tr></table></figure>
<p>ä¾‹2ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>Â <span class="keyword">namespace</span>Â std;</span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">Base</span>&#123;</span>Â </span><br><span class="line"><span class="keyword">public</span>:Â </span><br><span class="line">Â Â Â Â <span class="keyword">virtual</span>Â ~<span class="built_in">Base</span>()=<span class="number">0</span>;Â </span><br><span class="line">&#125;;</span><br><span class="line">Base::~<span class="built_in">Base</span>()Â &#123;cout&lt;&lt;<span class="string">&quot;BaseÂ destroyed&quot;</span>&lt;&lt;endl;&#125;<span class="comment">//çº¯è™šå‡½æ•°ä¸èƒ½åœ¨ç±»å†…å†™å‡½æ•°ä½“ï¼Œéœ€è¦æŒªåˆ°ç±»å¤–</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">Derive1</span>:</span>Â <span class="keyword">public</span>Â BaseÂ &#123;&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">Derive2</span>:</span>Â <span class="keyword">public</span>Â BaseÂ &#123;</span><br><span class="line"><span class="keyword">public</span>:Â </span><br><span class="line">Â Â Â Â <span class="keyword">virtual</span>Â ~<span class="built_in">Derive2</span>()Â &#123;cout&lt;&lt;<span class="string">&quot;Derive2Â destroyed&quot;</span>&lt;&lt;endl;&#125;Â &#125;;<span class="comment">//è¿™é‡Œçš„vistualå†™ä¸å†™æ— æ‰€è°“</span></span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Base*Â p1Â =Â <span class="keyword">new</span>Â Derive1;</span><br><span class="line">Base*Â p2Â =Â <span class="keyword">new</span>Â Derive2;</span><br><span class="line"><span class="keyword">delete</span>Â p1;</span><br><span class="line">coutÂ &lt;&lt;Â â€œ------â€Â &lt;&lt;Â endl;</span><br><span class="line"><span class="keyword">delete</span>Â p2;</span><br><span class="line"><span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Outputï¼š</span><br><span class="line">Base destroyed</span><br><span class="line">------</span><br><span class="line">Derive2 destroyed</span><br><span class="line">Base destroyed</span><br></pre></td></tr></table></figure>
<p>ä¾‹3ï¼š</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/01/12/TSJjsAitxkrKHWe.png" alt="https://s2.loli.net/2022/01/12/TSJjsAitxkrKHWe.png"></p>
<p>A.æ™šæ†ç»‘ä¾èµ–äºè™šå‡½æ•°è¡¨ä¸è™šå‡½æ•°ï¼Œåªå¯¹ç±»ä¸­è™šå‡½æ•°èµ·ä½œç”¨ï¼Œå¹¶ä¸”åªå¯¹åŸºç±»æŒ‡é’ˆå’Œå¼•ç”¨èµ·ä½œç”¨ã€‚<br>D.ä¸€ä¸ªçº¯è™šå‡½æ•°å°±ä¼šä½¿å¾—ä¸€ä¸ªç±»æˆä¸ºçº¯è™šå‡½æ•°</p>
<h1 id="äºŒã€å‘ä¸‹ç±»å‹è½¬æ¢"><a href="#äºŒã€å‘ä¸‹ç±»å‹è½¬æ¢" class="headerlink" title="äºŒã€å‘ä¸‹ç±»å‹è½¬æ¢"></a>äºŒã€å‘ä¸‹ç±»å‹è½¬æ¢</h1><h2 id="2-1-å®šä¹‰"><a href="#2-1-å®šä¹‰" class="headerlink" title="2.1  å®šä¹‰"></a>2.1  å®šä¹‰</h2><p>æŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡çš„åŸºç±»æŒ‡é’ˆ/å¼•ç”¨è½¬æ¢æˆæ´¾ç”Ÿç±»æŒ‡é’ˆ/å¼•ç”¨ï¼Œåˆ™ç§°ä¸ºå‘ä¸‹ç±»å‹è½¬æ¢ã€‚ï¼ˆç±»å±‚æ¬¡ä¸­å‘ä¸‹ç§»åŠ¨ï¼‰</p>
<p>å½“æˆ‘ä»¬ç”¨åŸºç±»æŒ‡é’ˆè¡¨ç¤ºå„ç§æ´¾ç”Ÿç±»æ—¶(å‘ä¸Šç±»å‹è½¬æ¢)ï¼Œä¿ç•™äº†ä»–ä»¬çš„å…±æ€§ï¼Œä½†æ˜¯ä¸¢å¤±äº†ä»–ä»¬çš„ç‰¹æ€§ã€‚å¦‚æœæ­¤æ—¶è¦è¡¨ç°ç‰¹æ€§ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å‘ä¸‹ç±»å‹è½¬æ¢ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŸºç±»æŒ‡é’ˆæ•°ç»„å¯¹å„ç§æ´¾ç”Ÿç±»å¯¹è±¡è¿›è¡Œç®¡ç†ï¼Œå½“å…·ä½“å¤„ç†æ—¶æˆ‘ä»¬å¯ä»¥å°†åŸºç±»æŒ‡é’ˆè½¬æ¢ä¸ºå®é™…çš„æ´¾ç”Ÿç±»æŒ‡é’ˆï¼Œè¿›è€Œè°ƒç”¨æ´¾ç”Ÿç±»ä¸“æœ‰çš„æ¥å£ã€‚</p>
<p>ä½†æ˜¯éœ€è¦æ³¨æ„åˆ°ï¼Œè¿™é‡Œæ˜¯è¯´ç”¨åŸºç±»æŒ‡é’ˆå¯ä»¥ç®¡ç†æ´¾ç”Ÿç±»ï¼Œæ•…è€Œå¯ä»¥æŠŠè¿™ä¸ªæŒ‡é’ˆå‘ä¸‹è½¬æ¢ï¼Œç”Ÿæˆå®é™…ä½¿ç”¨çš„æ´¾ç”Ÿç±»æŒ‡é’ˆã€‚ä½†æ˜¯ï¼Œå¦‚æœæ˜¯åŸºç±»æŒ‡é’ˆç®¡ç†åŸºç±»å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯åŸºç±»æŒ‡é’ˆæœ¬æ¥å°±æŒ‡å‘åŸºç±»å¯¹è±¡æ—¶ï¼ŒåŸºç±»å¯¹è±¡æœ¬èº«å°±æ²¡æœ‰æ´¾ç”Ÿç±»å¤šå‡ºçš„æ•°æ®å’ŒæœåŠ¡ï¼Œè¿˜è¦æŠŠè¿™ä¸ªåŸºç±»æŒ‡é’ˆå‘ä¸‹è½¬æ¢ä¸ºæ´¾ç”Ÿç±»æŒ‡é’ˆï¼Œè¦ä¹ˆæ˜¯é”™çš„ï¼Œè¦ä¹ˆæ˜¯å±é™©çš„ã€‚</p>
<h2 id="2-2-è½¬æ¢æ–¹å¼"><a href="#2-2-è½¬æ¢æ–¹å¼" class="headerlink" title="2.2  è½¬æ¢æ–¹å¼"></a>2.2  è½¬æ¢æ–¹å¼</h2><h3 id="2-2-1-å®‰å…¨å‘ä¸‹ç±»å‹è½¬æ¢ï¼ˆåŸºç±»å‘æ´¾ç”Ÿç±»çš„è½¬æ¢ï¼‰"><a href="#2-2-1-å®‰å…¨å‘ä¸‹ç±»å‹è½¬æ¢ï¼ˆåŸºç±»å‘æ´¾ç”Ÿç±»çš„è½¬æ¢ï¼‰" class="headerlink" title="2.2.1  å®‰å…¨å‘ä¸‹ç±»å‹è½¬æ¢ï¼ˆåŸºç±»å‘æ´¾ç”Ÿç±»çš„è½¬æ¢ï¼‰"></a>2.2.1  å®‰å…¨å‘ä¸‹ç±»å‹è½¬æ¢ï¼ˆåŸºç±»å‘æ´¾ç”Ÿç±»çš„è½¬æ¢ï¼‰</h3><p>C++æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„æ˜¾å¼ç±»å‹è½¬æ¢ï¼Œç§°ä¸ºdynamic_castï¼Œæ˜¯ä¸€ç§å®‰å…¨çš„å‘ä¸‹ç±»å‹è½¬æ¢ã€‚ä½¿ç”¨dynamic_castçš„å¯¹è±¡å¿…é¡»æœ‰è™šå‡½æ•°ï¼Œå› ä¸ºå®ƒä½¿ç”¨äº†å­˜å‚¨åœ¨è™šå‡½æ•°è¡¨ä¸­çš„ä¿¡æ¯åˆ¤æ–­å®é™…çš„ç±»å‹ã€‚</p>
<p>æ‰€è°“å¯¹è±¡å¿…é¡»æœ‰è™šå‡½æ•°ï¼Œå®é™…ä¸Šæ˜¯æŒ‡æœ‰ç»§æ‰¿å…³ç³»æ—¶ï¼ŒåŸºç±»å’Œæ´¾ç”Ÿç±»éƒ½æœ‰è™šå‡½æ•°ã€‚åŸºç±»æœ‰è™šå‡½æ•°ï¼Œæ˜¯å¤šæ€çš„ï¼Œé‚£ä¹ˆæ´¾ç”Ÿç±»å½“ç„¶ä¹Ÿæœ‰è™šå‡½æ•°ã€‚é‡å†™è¦†ç›–æ˜¯ç”¨è™šå‡½æ•°è¦†ç›–è™šå‡½æ•°ï¼Œä»ç„¶å¯ä»¥ç”¨Base::çš„æ–¹å¼è°ƒç”¨åŸºç±»è™šå‡½æ•°ï¼Œä¸ç ´åå¤šæ€æ€§ã€‚è€Œé‡å†™éšè—æ›´ä¸ä¼šç ´åå…¶å¤šæ€æ€§ã€‚</p>
<p>è¯­æ³•ï¼š<br>T2æ˜¯T1çš„æ´¾ç”Ÿç±»ï¼Œobj_pï¼Œobj_råˆ†åˆ«æ˜¯T1ç±»å‹çš„æŒ‡é’ˆå’Œå¼•ç”¨ï¼ŒäºŒè€…éƒ½æŒ‡å‘ä¸€ä¸ªæ´¾ç”Ÿç±»T2çš„å¯¹è±¡ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">T2*Â pObjÂ =Â <span class="keyword">dynamic_cast</span>&lt;T2*&gt;(obj_p);</span><br><span class="line">è½¬æ¢ä¸ºT2æŒ‡é’ˆï¼Œè¿è¡Œæ—¶å¤±è´¥è¿”å›<span class="literal">nullptr</span></span><br><span class="line">T2&amp;Â refObjÂ =Â <span class="keyword">dynamic_cast</span>&lt;T2&amp;&gt;(obj_r);</span><br><span class="line">è½¬æ¢ä¸ºT2å¼•ç”¨ï¼Œè¿è¡Œå¤±è´¥æ—¶æŠ›å‡ºbad_castå¼‚å¸¸</span><br></pre></td></tr></table></figure>
<h3 id="2-2-2-å¿«é€Ÿå‘ä¸‹ç±»å‹è½¬æ¢"><a href="#2-2-2-å¿«é€Ÿå‘ä¸‹ç±»å‹è½¬æ¢" class="headerlink" title="2.2.2  å¿«é€Ÿå‘ä¸‹ç±»å‹è½¬æ¢"></a>2.2.2  å¿«é€Ÿå‘ä¸‹ç±»å‹è½¬æ¢</h3><p>å¦‚æœæˆ‘ä»¬çŸ¥é“ç›®æ ‡çš„æ“ä½œæ˜¯å®‰å…¨çš„ï¼Œå¯ä»¥ä½¿ç”¨static_castæ¥åŠ å¿«é€Ÿåº¦ã€‚<br>static_caståœ¨ç¼–è¯‘æ—¶é™æ€æµè§ˆç±»å±‚æ¬¡ï¼Œåªæ£€æŸ¥ç»§æ‰¿å…³ç³»ã€‚æ²¡æœ‰ç»§æ‰¿å…³ç³»çš„ç±»ä¹‹é—´ï¼Œå¿…é¡»å…·æœ‰è½¬æ¢é€”å¾„æ‰èƒ½è¿›è¡Œè½¬æ¢ï¼ˆè¦ä¹ˆè‡ªå®šä¹‰ï¼Œè¦ä¹ˆæ˜¯è¯­è¨€è¯­æ³•æ”¯æŒï¼‰ï¼Œå¦åˆ™ä¸è¿‡ç¼–è¯‘ã€‚å› ä¸ºå¿«é€Ÿï¼Œstatic_castè¿è¡Œæ—¶æ— æ³•ç¡®è®¤æ˜¯å¦æ­£ç¡®è½¬æ¢ã€‚</p>
<p>è¯­æ³•ï¼š</p>
<p>T2æ˜¯T1çš„æ´¾ç”Ÿç±»ï¼Œobj_pï¼Œobj_råˆ†åˆ«æ˜¯T1ç±»å‹çš„æŒ‡é’ˆå’Œå¼•ç”¨ï¼ŒäºŒè€…éƒ½æŒ‡å‘ä¸€ä¸ªæ´¾ç”Ÿç±»T2çš„å¯¹è±¡ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">T2*Â pObjÂ =Â <span class="keyword">static_cast</span>&lt;T2*&gt;(obj_p);</span><br><span class="line">Â Â <span class="comment">//è½¬æ¢ä¸ºT2æŒ‡é’ˆ</span></span><br><span class="line">T2&amp;Â refObjÂ =Â <span class="keyword">static_cast</span>&lt;T2&amp;&gt;(obj_r);</span><br><span class="line">Â Â <span class="comment">//è½¬æ¢ä¸ºT2å¼•ç”¨</span></span><br></pre></td></tr></table></figure>
<p>ä¸å®‰å…¨ï¼šå¦‚æœåŸºç±»æŒ‡é’ˆæœ¬æ¥å°±æŒ‡å‘åŸºç±»å¯¹è±¡ï¼Œå‘ä¸‹ç±»å‹è½¬æ¢å°±æ˜¯ä¸åˆæ³•çš„ã€‚æ­¤æ—¶ä¸ä¿è¯æŒ‡å‘ç›®æ ‡æ˜¯T2å¯¹è±¡ï¼Œå¯èƒ½å¯¼è‡´éæ³•å†…å­˜è®¿é—®ã€‚</p>
<p>ä¾‹1ï¼šç¬¬ä¸€ç±»ä¸åˆæ³•è½¬æ¢</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>Â <span class="keyword">namespace</span>Â std;</span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">B</span>Â &#123;</span>Â </span><br><span class="line">Â Â Â Â <span class="keyword">public</span>:</span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">virtual</span>Â <span class="keyword">void</span>Â <span class="title">f</span><span class="params">()</span>Â </span>&#123;&#125;Â </span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">D</span>Â :</span>Â <span class="keyword">public</span>Â BÂ &#123;</span><br><span class="line">Â Â Â Â <span class="keyword">public</span>:Â </span><br><span class="line">Â Â Â Â <span class="keyword">int</span>Â i&#123;<span class="number">2018</span>&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span>Â </span>&#123;</span><br><span class="line">Â Â Â Â DÂ d;Â BÂ b;</span><br><span class="line">Â Â Â Â <span class="comment">//DÂ d1Â =Â static_cast&lt;D&gt;(b);Â ///æœªå®šä¹‰ç±»å‹è½¬æ¢æ–¹å¼,æ³¨æ„è¿™ä¸ªç›´æ¥æ˜¯å¯¹è±¡çš„è½¬æ¢è€Œä¸æ˜¯æŒ‡é’ˆçš„è½¬æ¢</span></span><br><span class="line">Â Â Â Â <span class="comment">//Â Â Â Â DÂ d2Â =Â dynamic_cast&lt;D&gt;(b);Â ///è¿™æ˜¯ä¸åˆæ³•çš„ï¼Œdynamic_caståªå…è®¸æŒ‡é’ˆå’Œå¼•ç”¨è½¬æ¢</span></span><br><span class="line">Â </span><br><span class="line">Â Â Â Â D*Â pd1Â =Â <span class="keyword">static_cast</span>&lt;D*&gt;(&amp;b);Â <span class="comment">///Â æœ‰ç»§æ‰¿å…³ç³»ï¼Œå…è®¸è½¬æ¢,è®©Dç±»å‹æŒ‡é’ˆpd1æŒ‡å‘äº†Bç±»å‹çš„å¯¹è±¡b</span></span><br><span class="line">Â Â Â </span><br><span class="line">Â Â Â Â <span class="keyword">if</span>Â (pd1Â !=Â <span class="literal">nullptr</span>)&#123;Â Â Â Â Â Â </span><br><span class="line">Â Â Â Â Â Â Â Â coutÂ &lt;&lt;Â <span class="string">&quot;static_cast,Â B*(B)Â --&gt;Â D*:Â OK&quot;</span>Â &lt;&lt;Â endl;Â Â </span><br><span class="line">Â Â Â Â Â Â Â Â coutÂ &lt;&lt;Â <span class="string">&quot;D::i=&quot;</span>Â &lt;&lt;Â pd1-&gt;iÂ &lt;&lt;endl;</span><br><span class="line">&#125;Â <span class="comment">///Â ä½†æ˜¯ä¸å®‰å…¨ï¼špd1è®¿é—®Dä¸­æˆå‘˜iæ—¶ï¼Œå¯èƒ½æ˜¯éæ³•è®¿é—®</span></span><br><span class="line"></span><br><span class="line">Â Â Â Â D*Â pd2Â =Â <span class="keyword">dynamic_cast</span>&lt;D*&gt;(&amp;b);</span><br><span class="line">Â Â Â Â <span class="keyword">if</span>Â (pd2Â ==Â <span class="literal">nullptr</span>)Â <span class="comment">///Â ä¸å…è®¸ä¸å®‰å…¨çš„è½¬æ¢</span></span><br><span class="line">coutÂ &lt;&lt;Â <span class="string">&quot;dynamic_cast,Â B*(B)Â --&gt;Â D*:Â FAILED&quot;</span>Â &lt;&lt;Â endl;</span><br><span class="line"></span><br><span class="line">Â Â Â Â B*Â pbÂ =Â &amp;d;Â </span><br><span class="line">Â Â Â Â D*Â pd3Â =Â <span class="keyword">static_cast</span>&lt;D*&gt;(pb);Â </span><br><span class="line">Â Â Â Â <span class="keyword">if</span>Â (pd3Â !=Â <span class="literal">nullptr</span>)</span><br><span class="line">Â Â Â Â &#123;Â Â Â Â Â Â Â </span><br><span class="line">Â Â Â Â coutÂ &lt;&lt;Â <span class="string">&quot;static_cast,Â B*(D)Â --&gt;Â D*:Â OK&quot;</span>Â &lt;&lt;Â endl;</span><br><span class="line">Â Â Â Â coutÂ &lt;&lt;Â <span class="string">&quot;D::i=&quot;</span>Â &lt;&lt;Â pd3-&gt;iÂ &lt;&lt;endl;</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â D*Â pd4Â =Â <span class="keyword">dynamic_cast</span>&lt;D*&gt;(pb);Â </span><br><span class="line">Â Â Â Â <span class="keyword">if</span>Â (pd4Â !=Â <span class="literal">nullptr</span>)&#123;<span class="comment">///Â è½¬æ¢æ­£ç¡®Â Â Â </span></span><br><span class="line">Â Â Â Â coutÂ &lt;&lt;Â <span class="string">&quot;dynamic_cast,Â B*(D)Â --&gt;Â D*:Â OK&quot;</span>Â &lt;&lt;Â endl;Â Â Â </span><br><span class="line">Â Â Â Â coutÂ &lt;&lt;Â <span class="string">&quot;D::i=&quot;</span>Â &lt;&lt;Â pd4-&gt;iÂ &lt;&lt;endl;</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â <span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Outputï¼š</span><br><span class="line"><span class="keyword">static_cast</span>, B*(B) --&gt; D*: OK</span><br><span class="line">D::i=<span class="number">4817112</span></span><br><span class="line"><span class="keyword">dynamic_cast</span>, B*(B) --&gt; D*: FAILED</span><br><span class="line"><span class="keyword">static_cast</span>, B*(D) --&gt; D*: OK</span><br><span class="line">D::i=<span class="number">2018</span></span><br><span class="line"><span class="keyword">dynamic_cast</span>, B*(D) --&gt; D*: OK</span><br><span class="line">D::i=<span class="number">2018</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„åˆ°å‰æ–‡æè¿‡å±é™©è½¬æ¢çš„æƒ…å†µï¼Œå¦‚æœåŸºç±»æŒ‡é’ˆæœ¬æ¥å°±æŒ‡å‘åŸºç±»å¯¹è±¡ï¼Œå‘ä¸‹ç±»å‹è½¬æ¢å°±æ˜¯ä¸åˆæ³•çš„ã€‚ä»è€Œæˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼Œä½¿ç”¨dynamic_castå°†&amp;bè½¬ä¸ºDçš„æŒ‡é’ˆæ˜¯é”™è¯¯çš„ï¼Œè¿”å›äº†ç©ºæŒ‡é’ˆã€‚è€Œstatic_castè™½ç„¶å®ç°äº†è½¬æ¢ï¼Œä½†æ˜¯è¾“å‡ºçš„å®Œå…¨æ˜¯éæ³•å†…å­˜ã€‚ä¸”åœ¨å¤§å¤šæ•°ç¼–è¯‘å™¨ä¸Šï¼Œstatic_castè¿™æ ·æ“ä½œä¼šREã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬ç°åœ¨è®¨è®ºçš„çš„éƒ½æ˜¯æŒ‡é’ˆè½¬æ¢ï¼Œè€Œå¯¹è±¡çš„ç›´æ¥è½¬æ¢æ˜¯ç±»å‹è½¬æ¢ï¼Œæ•…è€Œä¸åŠ å…¶ä»–å®šä¹‰æ—¶ç”¨static_castå’Œdynamic_castéƒ½æ˜¯ä¸å®‰å…¨çš„ã€‚</p>
<p>ä¾‹2ï¼šç¬¬äºŒç±»ä¸åˆæ³•è½¬æ¢</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span>Â once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">Animal</span>Â &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">Â Â Â Â std::stringÂ name,Â type;</span><br><span class="line">Â Â Â Â <span class="built_in">Animal</span>(<span class="keyword">const</span>Â std::stringÂ &amp;_name,Â <span class="keyword">const</span>Â std::stringÂ &amp;_type):Â <span class="built_in">name</span>(_name),Â <span class="built_in">type</span>(_type)Â &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">Dog</span>:</span>Â <span class="keyword">public</span>Â AnimalÂ &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">Â Â Â Â <span class="built_in">Dog</span>(<span class="keyword">const</span>Â std::stringÂ &amp;_name):Â <span class="built_in">Animal</span>(_name,Â <span class="string">&quot;dog&quot;</span>)Â &#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">Bird</span>:</span>Â <span class="keyword">public</span>Â AnimalÂ &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">Â Â Â Â <span class="built_in">Bird</span>(<span class="keyword">const</span>Â std::stringÂ &amp;_name):Â <span class="built_in">Animal</span>(_name,Â <span class="string">&quot;bird&quot;</span>)Â &#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span>Â <span class="title">action</span><span class="params">(Animal*Â animal,Â std::vector&lt;Dog&gt;Â &amp;Â dogzone,Â std::vector&lt;Bird&gt;Â &amp;Â birdzone)</span></span>&#123;</span><br><span class="line">Â Â Â Â Dog*Â point1Â =<span class="keyword">dynamic_cast</span>&lt;Dog*&gt;(animal);</span><br><span class="line">Â Â Â Â Bird*Â point2Â =<span class="keyword">dynamic_cast</span>&lt;Bird*&gt;(animal);Â </span><br><span class="line">Â Â Â Â <span class="keyword">if</span>(point1!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â dogzone.<span class="built_in">push_back</span>(std::<span class="built_in">move</span>(*point1));</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â <span class="keyword">else</span>Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â birdzone.<span class="built_in">push_back</span>(std::<span class="built_in">move</span>(*point2));</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªé¢˜æ”¾ä¸Šäº†ä¼ªä»£ç ï¼Œç»™å‡ºäº†ç¬¬äºŒç±»éæ³•è½¬æ¢çš„ä¾‹å­ã€‚ä¸€ä¸ªåŸºç±»æ´¾Dç”Ÿå‡ºäº†å¤šä¸ªæ´¾ç”Ÿç±»A,B,Cã€‚æ¯”å¦‚åŸºç±»æŒ‡é’ˆdæŒ‡å‘äº†æ´¾ç”Ÿç±»Aå¯¹è±¡aï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æŠŠdå‘ä¸‹ç±»å‹è½¬æ¢ä¸ºBç±»æŒ‡é’ˆï¼Œä¹Ÿæ˜¯éæ³•è½¬æ¢ã€‚ä»è¿™ä¸ªè§’åº¦å¯ä»¥çœ‹å‡ºï¼Œåœ¨ä¸Šä¾‹ä¸­ï¼ŒAnimalç±»çš„typeæ˜¯privateï¼Œæ²¡æœ‰æ¥å£æ˜¯æ²¡æ³•è®¿é—®çš„ã€‚æˆ‘ä»¬æœ¬æ¥éœ€è¦æ ¹æ®typeæ¥å†³å®šå‘ä¸‹è½¬æ¢çš„ç±»å‹ï¼Œä½†æ˜¯è®¿é—®ä¸äº†ã€‚äºæ˜¯æˆ‘ä»¬ç›´æ¥å‘ä¸‹ç±»å‹è½¬æ¢ï¼Œç›´æ¥é€šè¿‡æ˜¯å¦è½¬ä¸ºnullptræ¥æ£€æµ‹æ˜¯å¦è½¬æ¢æ­£ç¡®ã€‚</p>
<h3 id="2-2-3-æ€»ç»“"><a href="#2-2-3-æ€»ç»“" class="headerlink" title="2.2.3  æ€»ç»“"></a>2.2.3  æ€»ç»“</h3><p>dynamic_castä¸static_castï¼š</p>
<p>ç›¸åŒç‚¹ï¼šéƒ½å¯å®Œæˆå‘ä¸‹ç±»å‹è½¬æ¢</p>
<p>ä¸åŒç‚¹ï¼šstatic_caståœ¨ç¼–è¯‘æ—¶é™æ€æ‰§è¡Œå‘ä¸‹ç±»å‹è½¬æ¢ã€‚äºŒdynamic_castä¼šåœ¨è¿è¡Œæ—¶æ£€æŸ¥è¢«è½¬æ¢çš„å¯¹è±¡æ˜¯å¦ç¡®å®æ˜¯æ­£ç¡®çš„æ´¾ç”Ÿç±»ã€‚é¢å¤–çš„æ£€æŸ¥éœ€è¦ <code>RTTI (Run-Time Type Information)</code>ï¼Œå› æ­¤è¦æ¯”static_castæ…¢ä¸€äº›ï¼Œä½†æ˜¯æ›´å®‰å…¨ã€‚</p>
<p><strong>ä¸€èˆ¬ä½¿ç”¨dynamic_castè¿›è¡Œå‘ä¸‹ç±»å‹è½¬æ¢</strong>ã€‚</p>
<p>æŒ‡é’ˆè½¬æ¢çš„é‡è¦åŸåˆ™ï¼š</p>
<p>æ¸…æ¥šæŒ‡é’ˆæ‰€æŒ‡å‘çš„çœŸæ­£å¯¹è±¡</p>
<ol>
<li>æŒ‡é’ˆæˆ–å¼•ç”¨çš„å‘ä¸Šè½¬æ¢æ€»æ˜¯å®‰å…¨çš„ï¼›</li>
<li>å‘ä¸‹è½¬æ¢æ—¶ç”¨dynamic_castï¼Œå®‰å…¨æ£€æŸ¥ï¼›</li>
<li>é¿å…å¯¹è±¡ä¹‹é—´çš„è½¬æ¢ã€‚å°½å¯èƒ½ç”¨æŒ‡é’ˆã€å¼•ç”¨è¿›è¡Œè½¬æ¢ã€‚è¿™æ ·å¯ä»¥é€šè¿‡éªŒè¯è™šå‡½æ•°è¡¨åˆ¤æ–­è½¬æ¢æ˜¯å¦å®‰å…¨ã€‚</li>
</ol>
<p>å¼•ä¾‹â€”â€”å†å²é—ç•™é—®é¢˜ï¼Œå…³äºä¼ å‚çš„æœ¬è´¨</p>
<p>ï¼ˆä¸‹é¢è¿™ä¸ªç¨‹åºæœ‰å¾ˆå¤§é—®é¢˜ï¼‰</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>Â <span class="keyword">namespace</span>Â std;</span><br><span class="line"><span class="function"><span class="keyword">void</span>Â <span class="title">swap</span><span class="params">(<span class="keyword">int</span>Â *a,Â <span class="keyword">int</span>Â *b)</span></span></span><br><span class="line"><span class="function"></span>&#123;Â Â Â </span><br><span class="line">Â <span class="keyword">int</span>Â tmpÂ =Â *a;</span><br><span class="line">Â *aÂ =Â *b;</span><br><span class="line">Â *bÂ =Â tmp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span>Â </span>&#123;</span><br><span class="line">Â <span class="keyword">int</span>Â x=<span class="number">1</span>,<span class="built_in">y</span>(<span class="number">2</span>);</span><br><span class="line">Â <span class="built_in">swap</span>(x,y);</span><br><span class="line">Â cout&lt;&lt;x&lt;&lt;endl;</span><br><span class="line"><span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Output:</span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬è¯•å›¾è¿è¡Œè¯¥ç¨‹åºï¼Œå¾ˆæ˜¾ç„¶ï¼Œè¾“å‡ºäº†2ã€‚æˆ‘ä»¬ä¼¼ä¹å·²ç»å¯Ÿè§‰åˆ°äº†åœ°å€å’ŒæŒ‡é’ˆä¹‹é—´çš„ç¾å¦™å…³ç³»ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥è¾“å‡ºæŒ‡é’ˆçš„å€¼å°±æ˜¯æŒ‡é’ˆæŒ‡å‘çš„åœ°å€ã€‚æˆ‘ä»¬éšçº¦å¯Ÿè§‰åˆ°ï¼Œè¿™é‡Œint*aè²Œä¼¼ä¼šæŒ‡å‘xçš„åœ°å€ï¼Œæ‰€ä»¥æˆ‘ä»¬è¯•å›¾æŠŠåœ°å€æ‰“å°å‡ºæ¥ã€‚</p>
<p>ï¼ˆä¸‹é¢è¿™ä¸ªç¨‹åºæœ‰å¾ˆå¤§é—®é¢˜ï¼‰</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>Â <span class="keyword">namespace</span>Â std;</span><br><span class="line"><span class="function"><span class="keyword">void</span>Â <span class="title">swap</span><span class="params">(<span class="keyword">int</span>Â *a,Â <span class="keyword">int</span>Â *b)</span></span></span><br><span class="line"><span class="function"></span>&#123;Â Â Â cout&lt;&lt;a&lt;&lt;endl;</span><br><span class="line">Â <span class="keyword">int</span>Â tmpÂ =Â *a;</span><br><span class="line">Â *aÂ =Â *b;</span><br><span class="line">Â *bÂ =Â tmp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span>Â </span>&#123;</span><br><span class="line">Â <span class="keyword">int</span>Â x=<span class="number">1</span>,<span class="built_in">y</span>(<span class="number">2</span>);</span><br><span class="line">Â <span class="built_in">swap</span>(x,y);</span><br><span class="line">Â cout&lt;&lt;&amp;x&lt;&lt;endl;</span><br><span class="line">Â cout&lt;&lt;x&lt;&lt;endl;</span><br><span class="line"><span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Outputï¼š</span><br><span class="line"><span class="number">0x7ffebcbe46e8</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>çœ‹ä¸Šå»å¾ˆå¯¹ï¼Œä½†æ˜¯ï¼Œä¼¼ä¹å°‘äº†ç‚¹ä»€ä¹ˆï¼Ÿæˆ‘ä»¬swapå‡½æ•°é‡Œå¯¹int*açš„è¾“å‡ºå‘¢ï¼Ÿè¿™äº›ç¨‹åºæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>
<p>åŸå› æ˜¯ï¼Œåœ¨stdç©ºé—´é‡Œæœ¬èº«å°±åŒ…å«æœ‰swapå‡½æ•°ï¼Œè¿™ä¹ˆå†™swapæ ¹æœ¬æ— æ³•è°ƒç”¨æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„swapï¼Œæ•…è€Œä¸å¯ä½¿ç”¨stdç©ºé—´ã€‚ï¼ˆè¿™ä¹Ÿå‘Šè¯«äº†æˆ‘ä»¬å°‘ç”¨stdç©ºé—´ï¼Œæˆ–è€…æŠŠå‡½æ•°åå­—èµ·çš„å¤æ‚ç‚¹ï¼‰</p>
<p>æˆ‘ä»¬ç¦ç”¨äº†stdç©ºé—´åï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="comment">//usingÂ namespaceÂ std;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span>Â <span class="title">swap</span><span class="params">(<span class="keyword">int</span>Â *a,Â <span class="keyword">int</span>Â *b)</span></span></span><br><span class="line"><span class="function"></span>&#123;Â Â Â </span><br><span class="line">Â <span class="keyword">int</span>Â tmpÂ =Â *a;</span><br><span class="line">Â *aÂ =Â *b;</span><br><span class="line">Â *bÂ =Â tmp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span>Â </span>&#123;</span><br><span class="line">Â <span class="keyword">int</span>Â x=<span class="number">1</span>,<span class="built_in">y</span>(<span class="number">2</span>);</span><br><span class="line">Â <span class="built_in">swap</span>(x,y);</span><br><span class="line">Â std::cout&lt;&lt;x&lt;&lt;std::endl;</span><br><span class="line"><span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Outputï¼š</span><br><span class="line">main.cpp:<span class="number">11</span>:<span class="number">2</span>:Â error:Â noÂ matchingÂ functionÂ <span class="keyword">for</span>Â callÂ toÂ <span class="string">&#x27;swap&#x27;</span></span><br><span class="line">Â <span class="built_in">swap</span>(x,y);</span><br><span class="line">Â ^~~~</span><br><span class="line">main.cpp:<span class="number">3</span>:<span class="number">6</span>:Â note:Â candidateÂ functionÂ <span class="keyword">not</span>Â viable:Â noÂ knownÂ conversionÂ fromÂ <span class="string">&#x27;int&#x27;</span>Â toÂ <span class="string">&#x27;intÂ *&#x27;</span>Â <span class="keyword">for</span>Â <span class="number">1</span>stÂ argument;Â <span class="function">takeÂ theÂ addressÂ ofÂ theÂ argumentÂ withÂ &amp;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span>Â <span class="title">swap</span><span class="params">(<span class="keyword">int</span>Â *a,Â <span class="keyword">int</span>Â *b)</span></span></span><br><span class="line"><span class="function">Â Â Â Â Â ^</span></span><br><span class="line"><span class="function">1Â errorÂ generated.</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ç»ˆäºå‘ç°äº†é—®é¢˜ï¼Œåœ¨è°ƒç”¨å‚æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ ¹æœ¬æ— æ³•è®©ä¸€ä¸ªint xä¼ å…¥int<em>aã€‚é¦–å…ˆï¼Œä¼ å‚æ•°çš„è¿‡ç¨‹å¯ä»¥ç†è§£ä¸ºèµ‹å€¼è¯­å¥ï¼šæ¯”å¦‚æˆ‘ä»¬å‡½æ•°å®šä¹‰void swap(int a, int b);é‚£ä¹ˆè°ƒç”¨æ—¶ï¼Œswap(x,y);éœ€è¦inta=xï¼Œintb=y;è¿™ä¸¤ä¸ªèµ‹å€¼è¯­å¥éƒ½æ²¡æ³•å®ç°ã€‚ä½†æ˜¯æˆ‘ä»¬è°ƒç”¨swap(&amp;x,&amp;y)æ—¶ï¼Œå®é™…ä¸Šæ˜¯int</em>a=&amp;xï¼Œint*b=&amp;yï¼Œè¿™ä¸¤ä¸ªèµ‹å€¼éƒ½å¯ä»¥å®ç°ï¼Œä¸”&amp;xå’Œ&amp;yå®é™…ä¸Šæ˜¯å–åœ°å€è€Œä¸æ˜¯å–å¼•ç”¨çš„æ„æ€ã€‚</p>
<p>ä¿®æ”¹å¥½çš„ç¨‹åºå¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="comment">//usingÂ namespaceÂ std;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span>Â <span class="title">swap</span><span class="params">(<span class="keyword">int</span>Â *a,Â <span class="keyword">int</span>Â *b)</span></span></span><br><span class="line"><span class="function"></span>&#123;Â Â Â </span><br><span class="line">Â std::cout&lt;&lt;a&lt;&lt;std::endl;<span class="comment">//è°ƒç”¨swapå‡½æ•°æ—¶ï¼Œæ„é€ int*å‹çš„ä¸¤ä¸ªå½¢å‚a,b.è¿™ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘ä¸»å‡½æ•°é‡Œçš„ä¸¤ä¸ªintå‹å˜é‡a,bçš„åœ°å€ã€‚ï¼ˆby abuse of notation...)</span></span><br><span class="line">Â <span class="keyword">int</span>Â tmpÂ =Â *a;<span class="comment">//*aæ˜¯æŒ‡é’ˆaæŒ‡å‘çš„å†…å®¹ï¼ŒæŠŠå®ƒèµ‹å€¼ç»™tmpï¼›</span></span><br><span class="line">Â *aÂ =Â *b;<span class="comment">//ä¿®æ”¹*aå°±æ˜¯ä¿®æ”¹aæŒ‡å‘çš„å†…å®¹çš„å€¼ï¼Œä¹Ÿå°±æ˜¯ä¿®æ”¹ä¸»å‡½æ•°é‡Œé¢å˜é‡açš„å€¼ã€‚</span></span><br><span class="line">Â *bÂ =Â tmp;<span class="comment">//åŒç†ã€‚</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span>Â </span>&#123;</span><br><span class="line">Â <span class="keyword">int</span>Â a=<span class="number">1</span>,<span class="built_in">b</span>(<span class="number">2</span>);</span><br><span class="line">Â std::cout&lt;&lt;&amp;a&lt;&lt;std::endl;</span><br><span class="line">Â <span class="built_in">swap</span>(&amp;a,&amp;b);</span><br><span class="line">Â std::cout&lt;&lt;a&lt;&lt;std::endl;</span><br><span class="line"><span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">outputï¼š</span><br><span class="line"><span class="number">0x7fff8f992eb8</span></span><br><span class="line"><span class="number">0x7fff8f992eb8</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>ä»è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹å‡ºæ¥ï¼Œå¯¹å®å‚å–åœ°å€ï¼Œç„¶åint*a=&amp;xï¼Œå°±ä¼šä½¿å¾—aæŒ‡é’ˆç¡®åˆ‡çš„æŒ‡å‘xçš„å†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡æŒ‡é’ˆaæ§åˆ¶xçš„å†…å­˜ç©ºé—´ã€‚å“ªæ€•xçš„ç”Ÿå‘½å‘¨æœŸç»“æŸäº†ï¼Œé€€å‡ºäº†å‡½æ•°ä½“ä¹‹åæŠŠaæŒ‡é’ˆææ„æ‰ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰äººä¸ºå®šä¹‰delete aï¼Œè€Œé»˜è®¤ææ„å‡½æ•°ä¸ä¼šdelete aï¼Œæ•…è€Œä¹Ÿä¸ä¼šå½±å“xçš„å†…å­˜ç©ºé—´ã€‚ç»¼ä¸Šæ‰€è¿°ï¼Œç»ˆäºè§£å†³äº†å†å²é—ç•™é—®é¢˜ã€‚æˆ‘ä»¬å†åšä¸¤ä¸ªå®éªŒæ¥éªŒè¯ä¸‹ï¼š</p>
<p>å®éªŒä¸€ï¼Œåœ¨å‡½æ•°ä½“å†…delete aï¼Œæœç„¶æ¸…é™¤äº†xå†…å­˜ç©ºé—´ï¼Œå¯¼è‡´xéæ³•è®¿é—®ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span>Â <span class="title">swap</span><span class="params">(<span class="keyword">int</span>Â *a,Â <span class="keyword">int</span>Â *b)</span></span></span><br><span class="line"><span class="function"></span>&#123;Â Â Â </span><br><span class="line">Â std::cout&lt;&lt;a&lt;&lt;std::endl;</span><br><span class="line">Â <span class="keyword">int</span>Â tmpÂ =Â *a;</span><br><span class="line">Â *aÂ =Â *b;</span><br><span class="line">Â *bÂ =Â tmp;</span><br><span class="line">Â <span class="keyword">delete</span>Â a;</span><br><span class="line">Â <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span>Â </span>&#123;</span><br><span class="line">Â <span class="keyword">int</span>Â x=<span class="number">1</span>,<span class="built_in">y</span>(<span class="number">2</span>);</span><br><span class="line">Â std::cout&lt;&lt;&amp;x&lt;&lt;std::endl;</span><br><span class="line">Â <span class="built_in">swap</span>(&amp;x,&amp;y);</span><br><span class="line">Â std::cout&lt;&lt;x&lt;&lt;std::endl;</span><br><span class="line"><span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Outputï¼š</span><br><span class="line"><span class="built_in">free</span>(): invalid pointer</span><br></pre></td></tr></table></figure>
<p>å®éªŒäºŒï¼Œä¼ å¼•ç”¨ä¹Ÿæ˜¯å¦‚æ­¤ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span>Â <span class="title">swap</span><span class="params">(<span class="keyword">int</span>Â &amp;a,Â <span class="keyword">int</span>Â &amp;b)</span> <span class="comment">//æ­¤æ—¶å‡½æ•°ä½“é‡Œçš„å½¢å‚æ˜¯ä¸»å‡½æ•°é‡Œä¸¤ä¸ªå˜é‡a,bçš„å¼•ç”¨ï¼ˆä¹Ÿå°±æ˜¯åˆ«åï¼‰</span></span></span><br><span class="line"><span class="function"></span>&#123;Â Â Â </span><br><span class="line">Â std::cout&lt;&lt;&amp;a&lt;&lt;std::endl;</span><br><span class="line">Â <span class="keyword">int</span>Â tmpÂ =Â a;</span><br><span class="line">Â aÂ =Â b;</span><br><span class="line">Â bÂ =Â tmp;</span><br><span class="line">Â <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span>Â </span>&#123;</span><br><span class="line">Â <span class="keyword">int</span>Â x=<span class="number">1</span>,<span class="built_in">y</span>(<span class="number">2</span>);</span><br><span class="line">Â std::cout&lt;&lt;&amp;x&lt;&lt;std::endl;</span><br><span class="line">Â <span class="built_in">swap</span>(x,y);</span><br><span class="line">Â std::cout&lt;&lt;x&lt;&lt;std::endl;</span><br><span class="line"><span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Outputï¼š</span><br><span class="line"><span class="number">0x7fff2af01638</span></span><br><span class="line"><span class="number">0x7fff2af01638</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>åŸºäºä¸Šè¿°å¼•ä¾‹ï¼Œè€ƒå¯Ÿä¸‹è¿™ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>Â <span class="keyword">namespace</span>Â std;</span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">Pet</span>Â &#123;</span>Â <span class="keyword">public</span>:Â Â <span class="keyword">virtual</span>Â ~<span class="built_in">Pet</span>()Â &#123;&#125;Â &#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">Dog</span>Â :</span>Â <span class="keyword">public</span>Â PetÂ &#123;Â </span><br><span class="line"><span class="keyword">public</span>:Â Â Â Â Â <span class="function"><span class="keyword">void</span>Â <span class="title">run</span><span class="params">()</span>Â </span>&#123;Â coutÂ &lt;&lt;Â <span class="string">&quot;dogÂ run&quot;</span>Â &lt;&lt;Â endl;Â &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">Bird</span>Â :</span>Â <span class="keyword">public</span>Â PetÂ &#123;</span><br><span class="line"><span class="keyword">public</span>:Â Â Â Â Â <span class="function"><span class="keyword">void</span>Â <span class="title">fly</span><span class="params">()</span>Â </span>&#123;Â coutÂ &lt;&lt;Â <span class="string">&quot;birdÂ fly&quot;</span>Â &lt;&lt;Â endl;Â &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span>Â <span class="title">action</span><span class="params">(Pet*Â p)</span>Â </span>&#123;</span><br><span class="line">Â Â Â Â <span class="keyword">auto</span>Â dÂ =Â <span class="keyword">dynamic_cast</span>&lt;Dog*&gt;(p);Â <span class="comment">///Â å‘ä¸‹ç±»å‹è½¬æ¢</span></span><br><span class="line">Â Â Â Â <span class="keyword">auto</span>Â bÂ =Â <span class="keyword">dynamic_cast</span>&lt;Bird*&gt;(p);Â Â Â Â <span class="comment">///Â å‘ä¸‹ç±»å‹è½¬æ¢</span></span><br><span class="line">Â Â Â Â <span class="keyword">if</span>Â (d)Â <span class="comment">///Â è¿è¡Œæ—¶æ ¹æ®å®é™…ç±»å‹è¡¨ç°ç‰¹æ€§ if(d)ç­‰ä»·äºif (d!=nullptr)</span></span><br><span class="line">Â Â Â Â Â Â Â Â d-&gt;<span class="built_in">run</span>();</span><br><span class="line">Â Â Â Â <span class="keyword">else</span>Â <span class="keyword">if</span>(b)</span><br><span class="line">Â Â Â Â Â Â Â Â b-&gt;<span class="built_in">fly</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span>Â </span>&#123;</span><br><span class="line">Â Â Â Â Pet*Â p[<span class="number">2</span>];</span><br><span class="line">Â Â Â Â p[<span class="number">0</span>]Â =Â <span class="keyword">new</span>Â Dog;Â <span class="comment">///Â å‘ä¸Šç±»å‹è½¬æ¢</span></span><br><span class="line">Â Â Â Â p[<span class="number">1</span>]Â =Â <span class="keyword">new</span>Â Bird;Â <span class="comment">///Â å‘ä¸Šç±»å‹è½¬æ¢</span></span><br><span class="line">Â Â Â Â <span class="keyword">for</span>Â (<span class="keyword">int</span>Â iÂ =Â <span class="number">0</span>;Â iÂ &lt;Â <span class="number">2</span>;Â ++i)Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â <span class="built_in">action</span>(p[i]);</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â <span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Outputï¼š</span><br><span class="line">dog run</span><br><span class="line">bird fly</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„åˆ°ï¼Œåœ¨è¿™ä¸ªä¾‹å­é‡Œé¢ï¼Œå‘ä¸‹ç±»å‹è½¬æ¢éƒ½ä¸æ˜¯é‡ç‚¹ï¼Œé‡ç‚¹åœ¨ä¼ å‚çš„è¿™ä¸€æ­¥ã€‚å› ä¸ºæˆ‘ä»¬çš„p[i]æ˜¯çš„ç±»å‹æ˜¯Pet<em>ï¼ŒæŒ‡å‘çš„å†…å­˜ç©ºé—´æ˜¯Dogæˆ–è€…Birdï¼Œæ‰€ä»¥è¿™ä¸ªä¼ å‚æ˜¯åˆæ³•çš„ï¼ä¹Ÿå°±æ˜¯èµ‹å€¼è¯­å¥ï¼Œä¼ å‚è¿‡ç¨‹ä¸­pet</em> p=p[i]æ˜¯åˆæ³•çš„ï¼Œè¿™ä¸ªä¼ å‚å°±æ˜¯åˆæ³•çš„ï¼(å°†ä¼ å‚è§†ä¸ºç»™å‡½æ•°å‚æ•°åˆ—è¡¨é‡Œçš„å½¢å‚èµ‹å€¼çš„è¿‡ç¨‹ï¼‰</p>
<h1 id="ä¸‰ã€æŠ½è±¡ç±»ä¸çº¯è™šå‡½æ•°"><a href="#ä¸‰ã€æŠ½è±¡ç±»ä¸çº¯è™šå‡½æ•°" class="headerlink" title="ä¸‰ã€æŠ½è±¡ç±»ä¸çº¯è™šå‡½æ•°"></a>ä¸‰ã€æŠ½è±¡ç±»ä¸çº¯è™šå‡½æ•°</h1><h2 id="3-1-å¤šé‡ç»§æ‰¿"><a href="#3-1-å¤šé‡ç»§æ‰¿" class="headerlink" title="3.1  å¤šé‡ç»§æ‰¿"></a>3.1  å¤šé‡ç»§æ‰¿</h2><p>ä¼˜ç‚¹ï¼šæ¸…æ™°ï¼Œç¬¦åˆç›´è§‰ï¼›ç»“åˆå¤šä¸ªæ¥å£</p>
<p>ç¼ºç‚¹ï¼š<br>äºŒä¹‰æ€§ï¼šå¦‚æœæ´¾ç”Ÿç±»Dç»§æ‰¿çš„ä¸¤ä¸ªåŸºç±»A,Bï¼Œæœ‰åŒåæˆå‘˜aï¼Œåˆ™è®¿é—®Dä¸­aæ—¶ï¼Œç¼–è¯‘å™¨æ— æ³•åˆ¤æ–­è¦è®¿é—®çš„å“ªä¸€ä¸ªåŸºç±»æˆå‘˜ã€‚<br>é’»çŸ³å‹ç»§æ‰¿æ ‘ï¼ˆDODï¼šDiamond Of Deathï¼‰å¸¦æ¥çš„æ•°æ®å†—ä½™ï¼šå³å›¾ä¸­å¦‚æœ InputFile å’Œ OutputFile éƒ½å«æœ‰ç»§æ‰¿è‡ª File çš„ filename å˜é‡ï¼Œåˆ™ IOFile ä¼šæœ‰ä¸¤ä»½ç‹¬ç«‹çš„ filenameï¼Œè€Œè¿™å®é™…ä¸Šå¹¶ä¸éœ€è¦ã€‚</p>
<p>ä¼˜åŒ–æ–¹æ¡ˆï¼š</p>
<p>æœ€å¤šç»§æ‰¿ä¸€ä¸ªéæŠ½è±¡ç±»ï¼ˆhas-aï¼‰ï¼Œå¯ä»¥ç»§æ‰¿å¤šä¸ªæŠ½è±¡ç±»ï¼ˆæ¥å£ï¼‰ã€‚è¿™æ ·å¯ä»¥é¿å…å¤šé‡ç»§æ‰¿çš„äºŒä¹‰æ€§ï¼Œä¹Ÿå¯ä»¥ä¸€ä¸ªå¯¹è±¡å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚</p>
<h2 id="3-2-ä¾‹å­"><a href="#3-2-ä¾‹å­" class="headerlink" title="3.2  ä¾‹å­"></a>3.2  ä¾‹å­</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>Â <span class="keyword">namespace</span>Â std;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">WhatCanSpeak</span>Â &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">Â Â Â Â <span class="keyword">virtual</span>Â ~<span class="built_in">WhatCanSpeak</span>()Â &#123;&#125;</span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">virtual</span>Â <span class="keyword">void</span>Â <span class="title">speak</span><span class="params">()</span>Â </span>=Â <span class="number">0</span>;Â Â &#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">WhatCanMotion</span>Â &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">Â Â Â Â <span class="keyword">virtual</span>Â ~<span class="built_in">WhatCanMotion</span>()Â &#123;&#125;</span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">virtual</span>Â <span class="keyword">void</span>Â <span class="title">motion</span><span class="params">()</span>Â </span>=Â <span class="number">0</span>;Â Â Â &#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">Human</span>Â :</span>Â <span class="keyword">public</span>Â WhatCanSpeak,Â <span class="keyword">public</span>Â WhatCanMotion</span><br><span class="line">&#123;</span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">void</span>Â <span class="title">speak</span><span class="params">()</span>Â </span>&#123;Â coutÂ &lt;&lt;Â <span class="string">&quot;say&quot;</span>Â &lt;&lt;Â endl;Â &#125;</span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">void</span>Â <span class="title">motion</span><span class="params">()</span>Â </span>&#123;Â coutÂ &lt;&lt;Â <span class="string">&quot;walk&quot;</span>Â &lt;&lt;Â endl;Â &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span>Â <span class="title">doSpeak</span><span class="params">(WhatCanSpeak*Â obj)</span>Â </span>&#123;Â obj-&gt;<span class="built_in">speak</span>();Â &#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span>Â <span class="title">doMotion</span><span class="params">(WhatCanMotion*Â obj)</span>Â </span>&#123;Â obj-&gt;<span class="built_in">motion</span>();Â &#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Â Â Â Â HumanÂ human;</span><br><span class="line">Â Â Â Â <span class="built_in">doSpeak</span>(&amp;human);Â <span class="built_in">doMotion</span>(&amp;human);</span><br><span class="line">Â Â Â Â <span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Outputï¼š</span><br><span class="line">say</span><br><span class="line">walk</span><br></pre></td></tr></table></figure>
<h1 id="å››ã€å¤šæ€-Polymorphism"><a href="#å››ã€å¤šæ€-Polymorphism" class="headerlink" title="å››ã€å¤šæ€ Polymorphism"></a>å››ã€å¤šæ€ Polymorphism</h1><h2 id="4-1-å®šä¹‰"><a href="#4-1-å®šä¹‰" class="headerlink" title="4.1  å®šä¹‰"></a>4.1  å®šä¹‰</h2><p>æŒ‰ç…§åŸºç±»çš„æ¥å£å®šä¹‰ï¼Œè°ƒç”¨æŒ‡é’ˆæˆ–å¼•ç”¨æ‰€æŒ‡å¯¹è±¡çš„æ¥å£å‡½æ•°ï¼Œå‡½æ•°æ‰§è¡Œè¿‡ç¨‹å› å¯¹è±¡å®é™…æ‰€å±æ´¾ç”Ÿç±»çš„ä¸åŒè€Œå‘ˆç°ä¸åŒçš„æ•ˆæœï¼ˆè¡¨ç°ï¼‰ï¼Œè¿™ä¸ªç°è±¡è¢«ç§°ä¸ºâ€œå¤šæ€â€ã€‚è¿™ä¸ªå®šä¹‰éå¸¸ç¹çï¼Œå®é™…ä¸Šå°±æ˜¯æŒ‰ç…§å®é™…ç±»å‹è°ƒç”¨å‡½æ•°ç½¢äº†ã€‚</p>
<p>å½“åˆ©ç”¨åŸºç±»æŒ‡é’ˆ/å¼•ç”¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œè™šå‡½æ•°åœ¨è¿è¡Œæ—¶ç¡®å®šæ‰§è¡Œå“ªä¸ªç‰ˆæœ¬ï¼Œå–å†³äºå¼•ç”¨æˆ–æŒ‡é’ˆå¯¹è±¡çš„çœŸå®ç±»å‹ã€‚</p>
<p>éè™šå‡½æ•°åœ¨ç¼–è¯‘æ—¶ç»‘å®šï¼Œæ•…è€Œè°ƒç”¨åœ¨æŒ‡é’ˆæƒé™èŒƒå›´å†…ä¼˜å…ˆçº§æœ€é«˜çš„å‡½æ•°ã€‚å…³äºæŒ‡é’ˆçš„æƒé™èŒƒå›´åœ¨L8å·²ç»å™è¿°è¿‡ã€‚</p>
<p>å½“åˆ©ç”¨ç±»çš„å¯¹è±¡ç›´æ¥è°ƒç”¨å‡½æ•°æ—¶ï¼Œæ— è®ºä»€ä¹ˆå‡½æ•°ï¼Œå‡åœ¨ç¼–è¯‘æ—¶ç»‘å®šã€‚</p>
<p>äº§ç”Ÿå¤šæ€æ•ˆæœçš„æ¡ä»¶ï¼šç»§æ‰¿+è™šå‡½æ•°+(å¼•ç”¨æˆ–æŒ‡é’ˆ)</p>
<h2 id="4-2-ä¼˜åŠ¿"><a href="#4-2-ä¼˜åŠ¿" class="headerlink" title="4.2  ä¼˜åŠ¿"></a>4.2  ä¼˜åŠ¿</h2><p>å…¨éƒ¨è®¾è®¡æŠ½è±¡ç±»æŒ‡é’ˆæŒ‡å‘æ´¾ç”Ÿç±»åï¼ŒC++è¯­è¨€å¯ä»¥ç”¨ä¸€æ®µç›¸åŒçš„ä»£ç ï¼Œåœ¨è¿è¡Œæ—¶å®Œæˆä¸åŒçš„ä»»åŠ¡ï¼Œè¿™äº›ä¸åŒè¿è¡Œç»“æœçš„å·®å¼‚ç”±æ´¾ç”Ÿç±»ä¹‹é—´çš„å·®å¼‚å†³å®šï¼Œä¸å¿…å¯¹æ¯ä¸€ä¸ªæ´¾ç”Ÿç±»ç‰¹æ®Šå¤„ç†ï¼Œåªéœ€è¦è°ƒç”¨æŠ½è±¡åŸºç±»çš„æ¥å£å³å¯ã€‚å¤§å¤§æé«˜ç¨‹åºçš„å¯å¤ç”¨æ€§ã€‚å¦ä¸€æ–¹é¢ï¼Œä¸åŒæ´¾ç”Ÿç±»å¯¹åŒä¸€æ¥å£çš„å®ç°ä¸åŒï¼Œèƒ½è¾¾åˆ°ä¸åŒçš„æ•ˆæœï¼Œæé«˜äº†ç¨‹åºå¯æ‹“å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>Â <span class="keyword">namespace</span>Â std;</span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">Animal</span>&#123;</span>Â </span><br><span class="line"><span class="keyword">public</span>:Â Â </span><br><span class="line">Â Â <span class="function"><span class="keyword">void</span>Â <span class="title">action</span><span class="params">()</span>Â </span>&#123;</span><br><span class="line">Â Â Â Â <span class="built_in">speak</span>();</span><br><span class="line">Â Â Â Â <span class="built_in">motion</span>();</span><br><span class="line">Â Â &#125;</span><br><span class="line">Â Â <span class="function"><span class="keyword">virtual</span>Â <span class="keyword">void</span>Â <span class="title">speak</span><span class="params">()</span>Â </span>&#123;Â coutÂ &lt;&lt;Â <span class="string">&quot;AnimalÂ speak&quot;</span>Â &lt;&lt;Â endl;Â &#125;</span><br><span class="line">Â Â <span class="function"><span class="keyword">virtual</span>Â <span class="keyword">void</span>Â <span class="title">motion</span><span class="params">()</span>Â </span>&#123;Â coutÂ &lt;&lt;Â <span class="string">&quot;AnimalÂ motion&quot;</span>Â &lt;&lt;Â endl;Â &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">Bird</span>Â :</span>Â <span class="keyword">public</span>Â Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">void</span>Â <span class="title">speak</span><span class="params">()</span>Â </span>&#123;Â coutÂ &lt;&lt;Â <span class="string">&quot;BirdÂ singing&quot;</span>Â &lt;&lt;Â endl;Â &#125;</span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">void</span>Â <span class="title">motion</span><span class="params">()</span>Â </span>&#123;Â coutÂ &lt;&lt;Â <span class="string">&quot;BirdÂ flying&quot;</span>Â &lt;&lt;Â endl;Â &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">Fish</span>Â :</span>Â <span class="keyword">public</span>Â Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">void</span>Â <span class="title">speak</span><span class="params">()</span>Â </span>&#123;Â coutÂ &lt;&lt;Â <span class="string">&quot;FishÂ cannotÂ speakÂ ...&quot;</span>Â &lt;&lt;Â endl;Â &#125;</span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">void</span>Â <span class="title">motion</span><span class="params">()</span>Â </span>&#123;Â coutÂ &lt;&lt;Â <span class="string">&quot;FishÂ swimming&quot;</span>Â &lt;&lt;Â endl;Â &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span>Â </span>&#123;</span><br><span class="line">Â Â FishÂ fish;</span><br><span class="line">Â Â BirdÂ bird;</span><br><span class="line">Â Â fish.<span class="built_in">action</span>();Â Â Â Â Â <span class="comment">///ä¸åŒè°ƒç”¨æ–¹æ³•</span></span><br><span class="line">Â Â bird.<span class="built_in">action</span>();</span><br><span class="line">Â Â AnimalÂ *pBase1Â =Â <span class="keyword">new</span>Â Fish;</span><br><span class="line">Â Â AnimalÂ *pBase2Â =Â <span class="keyword">new</span>Â Bird;</span><br><span class="line">Â Â pBase1-&gt;<span class="built_in">action</span>();Â <span class="comment">///åŒä¸€è°ƒç”¨æ–¹æ³•ï¼Œæ ¹æ®</span></span><br><span class="line">Â Â pBase2-&gt;<span class="built_in">action</span>();Â <span class="comment">///å®é™…ç±»å‹å®Œæˆç›¸åº”åŠ¨ä½œÂ </span></span><br><span class="line">Â Â <span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Outputï¼š</span><br><span class="line">Fish cannot speak ...</span><br><span class="line">Fish swimming</span><br><span class="line">Bird singing</span><br><span class="line">Bird flying</span><br><span class="line">Fish cannot speak ...</span><br><span class="line">Fish swimming</span><br><span class="line">Bird singing</span><br><span class="line">Bird flying</span><br></pre></td></tr></table></figure>
<p>å¾ˆæœ‰æ„æ€çš„æ˜¯ï¼Œç›´æ¥é€šè¿‡æ´¾ç”Ÿç±»å¯¹è±¡è°ƒç”¨actionå‡½æ•°æ—¶ï¼Œç”±äºæ´¾ç”Ÿç±»æ²¡æœ‰é‡å®šä¹‰actionï¼Œæ•…è€Œç›´æ¥è°ƒç”¨äº†åŸºç±»çš„actionã€‚ä¹‹åä»¥fishä¸ºä¾‹ï¼Œè°ƒç”¨äº†fish.speak()å’Œfish.motion()ã€‚ç„¶è€Œæ³¨æ„åˆ°ï¼ŒFishç±»å·²ç»é‡å†™è¦†ç›–äº†Animalçš„è™šå‡½æ•°speak()ï¼Œæ•…è€Œä¼šè°ƒç”¨è‡ªèº«é‡å®šä¹‰çš„speak()ï¼Œmotion()åŒç†ã€‚</p>
<p>ä¸‹æ–¹çš„é€šè¿‡åŸºç±»æŒ‡é’ˆè°ƒç”¨å°±æ˜¯å…¸å‹çš„é‡å†™è¦†ç›–+åŠ¨æ€ç»‘å®šã€‚</p>
<h1 id="äº”ã€å‡½æ•°æ¨¡æ¿ä¸ç±»æ¨¡æ¿"><a href="#äº”ã€å‡½æ•°æ¨¡æ¿ä¸ç±»æ¨¡æ¿" class="headerlink" title="äº”ã€å‡½æ•°æ¨¡æ¿ä¸ç±»æ¨¡æ¿"></a>äº”ã€å‡½æ•°æ¨¡æ¿ä¸ç±»æ¨¡æ¿</h1><h2 id="5-1-æ„ä¹‰ä¸å®šä¹‰"><a href="#5-1-æ„ä¹‰ä¸å®šä¹‰" class="headerlink" title="5.1  æ„ä¹‰ä¸å®šä¹‰"></a>5.1  æ„ä¹‰ä¸å®šä¹‰</h2><p>å¦‚æœæˆ‘ä»¬æƒ³å®ç°å¯¹äºæ•´æ•°ã€æµ®ç‚¹æ•°ã€è‡ªå®šä¹‰ç±»çš„æ’åºå‡½æ•°ï¼Œè¿™äº›æ’åºæœ¬è´¨ä¸Šç®—æ³•æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯èƒ½éœ€è¦å†™å¾ˆå¤šä¸ªç›¸ä¼¼çš„å‡½æ•°ã€‚</p>
<p>æœ‰äº›ç®—æ³•å®ç°ä¸ç±»å‹æ— å…³ï¼Œæ‰€ä»¥å¯ä»¥å°†å‡½æ•°çš„å‚æ•°ç±»å‹ä¹Ÿå®šä¹‰ä¸ºä¸€ç§ç‰¹æ®Šçš„â€œå‚æ•°â€ï¼Œè¿™æ ·å°±å¾—åˆ°äº†â€œå‡½æ•°æ¨¡æ¿â€ã€‚</p>
<p>å®šä¹‰å‡½æ•°æ¨¡æ¿çš„æ–¹æ³•ï¼ˆå¯ä»¥ä¸å†™åœ¨åˆ†å¼€çš„ä¸¤è¡Œï¼‰</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>Â &lt;<span class="keyword">typename</span>Â T&gt;</span><br><span class="line">Â <span class="function">ReturnTypeÂ <span class="title">Func</span><span class="params">(Args)</span>ï¼›</span></span><br></pre></td></tr></table></figure>
<p>å¦‚ï¼šä»»æ„ç±»å‹ä¸¤ä¸ªå˜é‡ç›¸åŠ çš„â€œå‡½æ•°æ¨¡æ¿â€</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>Â &lt;<span class="keyword">typename</span>Â T&gt;</span><br><span class="line">Â <span class="function">TÂ <span class="title">sum</span><span class="params">(TÂ a,Â TÂ b)</span>Â </span>&#123;Â <span class="keyword">return</span>Â aÂ +Â b;Â &#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨ï¼štypenameä¹Ÿå¯æ¢ä¸ºclass</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>Â &lt;<span class="class"><span class="keyword">class</span>Â <span class="title">T</span>&gt;</span>Â </span><br><span class="line"><span class="function">TÂ <span class="title">sum</span><span class="params">(TÂ a,Â TÂ b)</span>Â </span>&#123;Â <span class="keyword">return</span>Â aÂ +Â b;Â &#125;</span><br></pre></td></tr></table></figure>
<p>æ¨¡æ¿å¿…é¡»åœ¨å¤´æ–‡ä»¶ä¸­å®ç°ï¼ŒåŸå› æ¯”è¾ƒå¤æ‚ï¼Œæ¶‰åŠé“¾æ¥åŸç†ï¼Œä¸åšèµ˜è¿°ã€‚</p>
<h2 id="5-2-å®ä¾‹åŒ–ä¸è‡ªåŠ¨æ¨å¯¼"><a href="#5-2-å®ä¾‹åŒ–ä¸è‡ªåŠ¨æ¨å¯¼" class="headerlink" title="5.2  å®ä¾‹åŒ–ä¸è‡ªåŠ¨æ¨å¯¼"></a>5.2  å®ä¾‹åŒ–ä¸è‡ªåŠ¨æ¨å¯¼</h2><p>å‡½æ•°æ¨¡æ¿åœ¨è°ƒç”¨æ—¶ï¼Œç¼–è¯‘å™¨èƒ½è‡ªåŠ¨æ¨å¯¼å‡ºå®é™…å‚æ•°çš„ç±»å‹ï¼ˆè¿™ä¸ªè¿‡ç¨‹å«åšå®ä¾‹åŒ–ï¼‰ã€‚æ‰€ä»¥ï¼Œå½¢å¼ä¸Šè°ƒç”¨ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ä¸æ™®é€šå‡½æ•°æ²¡æœ‰åŒºåˆ«ï¼Œå¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">coutÂ &lt;&lt;Â <span class="built_in">sum</span>(<span class="number">9</span>,Â <span class="number">3</span>);Â Â Â Â Â Â </span><br><span class="line">coutÂ &lt;&lt;Â <span class="built_in">sum</span>(<span class="number">2.1</span>,Â <span class="number">5.7</span>);</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨ç±»å‹éœ€è¦æ»¡è¶³å‡½æ•°çš„è¦æ±‚ã€‚æœ¬ä¾‹ä¸­ï¼Œè¦æ±‚ç±»å‹ T å®šä¹‰äº†åŠ æ³•è¿ç®—ç¬¦ã€‚</p>
<p>å½“å¤šä¸ªå‚æ•°çš„ç±»å‹ä¸ä¸€è‡´å¹¶ä¸”ä¸å¼ºåˆ¶è¦æ±‚ç±»å‹æ¨å¯¼æ—¶ï¼Œæ— æ³•æ¨å¯¼ï¼š</p>
<p><code>cout &lt;&lt; sum(9, 2.1); //ç¼–è¯‘é”™è¯¯</code></p>
<p>å¯ä»¥å¼ºåˆ¶æŒ‡å®šç±»å‹æ¨å¯¼æ–¹å¼ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>Â <span class="keyword">namespace</span>Â std;</span><br><span class="line"><span class="keyword">template</span>Â &lt;<span class="class"><span class="keyword">class</span>Â <span class="title">T</span>&gt;</span>Â </span><br><span class="line"><span class="function">TÂ <span class="title">sum</span><span class="params">(TÂ a,Â TÂ b)</span>Â </span>&#123;Â <span class="keyword">return</span>Â aÂ +Â b;Â &#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Â Â Â Â cout&lt;&lt;sum&lt;<span class="keyword">int</span>&gt;(<span class="number">9.9</span>,<span class="number">2.5</span>)&lt;&lt;endl;</span><br><span class="line">Â Â Â Â cout&lt;&lt;sum&lt;<span class="keyword">float</span>&gt;(<span class="number">9.9</span>,<span class="number">2.5</span>)&lt;&lt;endl;</span><br><span class="line">Â Â Â Â cout&lt;&lt;sum&lt;<span class="keyword">double</span>&gt;(<span class="number">9.9</span>,<span class="number">2.5</span>)&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">Outputï¼š</span><br><span class="line"><span class="number">11</span></span><br><span class="line"><span class="number">12.4</span></span><br><span class="line"><span class="number">12.4</span></span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šä¾‹ä¸­å¯çœ‹å‡ºå…ˆè½¬æ¢å†è¿›è¡ŒåŠ æ³•ã€‚</p>
<p>ä¾‹1ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;classÂ T&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span>Â <span class="title">sort</span><span class="params">(T*Â data,Â <span class="keyword">int</span>Â len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Â Â Â Â <span class="keyword">for</span>(<span class="keyword">int</span>Â iÂ =Â <span class="number">0</span>;Â iÂ &lt;Â len;Â i++)&#123;Â <span class="comment">//é€‰æ‹©æ’åº</span></span><br><span class="line">Â Â Â Â Â Â Â Â <span class="keyword">for</span>(<span class="keyword">int</span>Â jÂ =Â iÂ +Â <span class="number">1</span>;Â jÂ &lt;Â len;Â j++)Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="keyword">if</span>(data[i]Â &gt;Â data[j])</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â std::<span class="built_in">swap</span>(data[i],Â data[j]);Â <span class="comment">//äº¤æ¢å…ƒç´ ä½ç½®</span></span><br><span class="line">Â Â Â Â Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;classÂ T&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span>Â <span class="title">output</span><span class="params">(T*Â data,Â <span class="keyword">int</span>Â len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Â Â Â Â <span class="keyword">for</span>(<span class="keyword">int</span>Â iÂ =Â <span class="number">0</span>;Â iÂ &lt;Â len;Â i++)</span><br><span class="line">Â Â Â Â Â Â Â Â std::coutÂ &lt;&lt;Â data[i]Â &lt;&lt;Â <span class="string">&quot;Â &quot;</span>;</span><br><span class="line">Â Â Â Â std::coutÂ &lt;&lt;Â std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Â Â Â Â <span class="keyword">int</span>Â arr_a[]Â =Â &#123;<span class="number">3</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">5</span>&#125;;</span><br><span class="line">Â Â Â Â <span class="built_in">sort</span>(arr_a,Â <span class="number">5</span>);Â Â <span class="comment">//è°ƒç”¨intç±»å‹çš„sort</span></span><br><span class="line">Â Â Â Â <span class="built_in">output</span>(arr_a,Â <span class="number">5</span>);Â <span class="comment">//è°ƒç”¨intç±»å‹çš„output</span></span><br><span class="line">Â Â Â Â </span><br><span class="line">Â Â Â Â <span class="keyword">float</span>Â arr_b[]Â =Â &#123;<span class="number">3.2</span>,Â <span class="number">2.1</span>,Â <span class="number">4.3</span>,Â <span class="number">1.5</span>,Â <span class="number">5.7</span>&#125;;</span><br><span class="line">Â Â Â Â <span class="built_in">sort</span>(arr_b,Â <span class="number">5</span>);Â <span class="comment">//è°ƒç”¨floatç±»å‹çš„sort</span></span><br><span class="line">Â Â Â Â <span class="built_in">output</span>(arr_b,Â <span class="number">5</span>);Â Â <span class="comment">//è°ƒç”¨floatç±»å‹çš„output</span></span><br><span class="line">Â Â Â Â <span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Outputï¼š</span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></span><br><span class="line"><span class="number">1.5</span> <span class="number">2.1</span> <span class="number">3.2</span> <span class="number">4.3</span> <span class="number">5.7</span></span><br></pre></td></tr></table></figure>
<p>ä¾‹2ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;classÂ T&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span>Â <span class="title">sort</span><span class="params">(T*Â data,Â <span class="keyword">int</span>Â len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Â Â Â Â <span class="keyword">for</span>(<span class="keyword">int</span>Â iÂ =Â <span class="number">0</span>;Â iÂ &lt;Â len;Â i++)&#123;Â <span class="comment">//é€‰æ‹©æ’åº</span></span><br><span class="line">Â Â Â Â Â Â Â Â <span class="keyword">for</span>(<span class="keyword">int</span>Â jÂ =Â iÂ +Â <span class="number">1</span>;Â jÂ &lt;Â len;Â j++)Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="keyword">if</span>(data[i]Â &gt;Â data[j])</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â std::<span class="built_in">swap</span>(data[i],Â data[j]);Â <span class="comment">//äº¤æ¢å…ƒç´ ä½ç½®</span></span><br><span class="line">Â Â Â Â Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;classÂ T&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span>Â <span class="title">output</span><span class="params">(T*Â data,Â <span class="keyword">int</span>Â len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Â Â Â Â <span class="keyword">for</span>(<span class="keyword">int</span>Â iÂ =Â <span class="number">0</span>;Â iÂ &lt;Â len;Â i++)</span><br><span class="line">Â Â Â Â Â Â Â Â std::coutÂ &lt;&lt;Â data[i]Â &lt;&lt;Â <span class="string">&quot;Â &quot;</span>;</span><br><span class="line">Â Â Â Â std::coutÂ &lt;&lt;Â std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">MyInt</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">Â Â Â Â <span class="keyword">int</span>Â data;</span><br><span class="line">Â Â Â Â <span class="built_in">MyInt</span>(<span class="keyword">int</span>Â val):Â <span class="built_in">data</span>(val)Â &#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Â Â Â Â MyIntÂ arr_c[]Â =Â &#123;<span class="number">3</span>,Â <span class="number">2</span>,Â <span class="number">4</span>,Â <span class="number">1</span>,Â <span class="number">5</span>&#125;;</span><br><span class="line">Â Â Â Â <span class="built_in">sort</span>(arr_c,Â <span class="number">5</span>);</span><br><span class="line">Â Â Â Â <span class="built_in">output</span>(arr_c,Â <span class="number">5</span>);</span><br><span class="line">Â Â Â Â <span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Outputï¼š</span><br><span class="line">main.cpp: In instantiation of â€˜<span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(T*, <span class="keyword">int</span>)</span> [with T </span>= MyInt]â€™:</span><br><span class="line">main.cpp:<span class="number">33</span>:<span class="number">15</span>:   required from here</span><br><span class="line">main.cpp:<span class="number">9</span>:<span class="number">15</span>: error: no match <span class="keyword">for</span> â€˜<span class="keyword">operator</span>&gt;â€™ (operand types are â€˜MyIntâ€™ <span class="keyword">and</span> â€˜MyIntâ€™)</span><br></pre></td></tr></table></figure>
<p>æ¨¡æ¿ç¼–è¯‘é”™è¯¯ä¼šå¼•èµ·ä¸Šç™¾è¡Œçš„é”™è¯¯ï¼Œå…³æ³¨ä¸Šæ–¹å‡ è¡Œã€‚sortä¸­éœ€è¦operator&gt; ä½†MyIntå¹¶ä¸æ”¯æŒï¼Œno match for â€˜operator&gt;â€™ (operand types are â€˜MyIntâ€™ and â€˜MyIntâ€™)</p>
<p>ç¨ä½œä¿®æ”¹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;classÂ T&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span>Â <span class="title">sort</span><span class="params">(T*Â data,Â <span class="keyword">int</span>Â len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Â Â Â Â <span class="keyword">for</span>(<span class="keyword">int</span>Â iÂ =Â <span class="number">0</span>;Â iÂ &lt;Â len;Â i++)&#123;Â <span class="comment">//é€‰æ‹©æ’åº</span></span><br><span class="line">Â Â Â Â Â Â Â Â <span class="keyword">for</span>(<span class="keyword">int</span>Â jÂ =Â iÂ +Â <span class="number">1</span>;Â jÂ &lt;Â len;Â j++)Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="keyword">if</span>(data[i]Â &gt;Â data[j])</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â std::<span class="built_in">swap</span>(data[i],Â data[j]);Â <span class="comment">//äº¤æ¢å…ƒç´ ä½ç½®</span></span><br><span class="line">Â Â Â Â Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;classÂ T&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span>Â <span class="title">output</span><span class="params">(T*Â data,Â <span class="keyword">int</span>Â len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Â Â Â Â <span class="keyword">for</span>(<span class="keyword">int</span>Â iÂ =Â <span class="number">0</span>;Â iÂ &lt;Â len;Â i++)</span><br><span class="line">Â Â Â Â Â Â Â Â std::coutÂ &lt;&lt;Â data[i]Â &lt;&lt;Â <span class="string">&quot;Â &quot;</span>;</span><br><span class="line">Â Â Â Â std::coutÂ &lt;&lt;Â std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">MyInt</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">Â Â Â Â <span class="keyword">int</span>Â data;</span><br><span class="line">Â Â Â Â <span class="built_in">MyInt</span>(<span class="keyword">int</span>Â val):Â <span class="built_in">data</span>(val)Â &#123;&#125;;</span><br><span class="line">Â Â Â Â <span class="keyword">bool</span>Â <span class="keyword">operator</span>&gt;(<span class="keyword">const</span>Â MyInt&amp;Â b)&#123;Â <span class="comment">//ç”¨äºsort</span></span><br><span class="line">Â Â Â Â Â Â Â Â <span class="keyword">return</span>Â dataÂ &gt;Â b.data;</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â <span class="keyword">friend</span>Â std::ostream&amp;Â Â <span class="comment">//ç”¨äºoutput</span></span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="keyword">operator</span>&lt;&lt;(std::ostream&amp;Â out,Â <span class="keyword">const</span>Â MyInt&amp;Â obj)&#123;</span><br><span class="line">Â Â Â Â Â Â Â Â outÂ &lt;&lt;Â obj.data;</span><br><span class="line">Â Â Â Â Â Â Â Â <span class="keyword">return</span>Â out;</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Â Â Â Â MyIntÂ arr_c[]Â =Â &#123;<span class="number">3</span>,Â <span class="number">2</span>,Â <span class="number">4</span>,Â <span class="number">1</span>,Â <span class="number">5</span>&#125;;</span><br><span class="line">Â Â Â Â <span class="built_in">sort</span>(arr_c,Â <span class="number">5</span>);</span><br><span class="line">Â Â Â Â <span class="built_in">output</span>(arr_c,Â <span class="number">5</span>);</span><br><span class="line">Â Â Â Â <span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Outputï¼š</span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>å®Œå…¨é‡è½½äº†æµè¿ç®—ç¬¦å’Œå¤§å°è¿ç®—ç¬¦ã€‚</p>
<h2 id="5-3-æ¨¡æ¿åŸç†"><a href="#5-3-æ¨¡æ¿åŸç†" class="headerlink" title="5.3  æ¨¡æ¿åŸç†"></a>5.3  æ¨¡æ¿åŸç†</h2><p>å¯¹å‡½æ•°æ¨¡æ¿çš„å¤„ç†æ˜¯åœ¨ç¼–è¯‘æœŸè¿›è¡Œçš„ï¼Œ<strong>æ¯å½“ç¼–è¯‘å™¨å‘ç°å¯¹æ¨¡æ¿çš„ä¸€ç§å‚æ•°çš„ä½¿ç”¨ï¼Œå°±ç”Ÿæˆå¯¹åº”å‚æ•°çš„ä¸€ä»½ä»£ç </strong>ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>Â T&gt;</span></span><br><span class="line"><span class="function">TÂ <span class="title">sum</span><span class="params">(TÂ a,Â TÂ b)</span>Â </span>&#123;<span class="keyword">return</span>Â aÂ +Â b;&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span>Â </span>&#123;</span><br><span class="line">Â Â Â Â <span class="keyword">int</span>Â aÂ =Â <span class="built_in">sum</span>(<span class="number">1</span>,Â <span class="number">2</span>);Â <span class="comment">//ç”Ÿæˆå¹¶ç¼–è¯‘intÂ sum(int,Â int)</span></span><br><span class="line">Â Â Â Â <span class="keyword">double</span>Â bÂ =Â <span class="built_in">sum</span>(<span class="number">1.0</span>,Â <span class="number">2.0</span>);Â <span class="comment">//ç”Ÿæˆå¹¶ç¼–è¯‘doubleÂ sum(double,Â double)</span></span><br><span class="line">Â Â Â Â <span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å…­ã€ç±»æ¨¡æ¿"><a href="#å…­ã€ç±»æ¨¡æ¿" class="headerlink" title="å…­ã€ç±»æ¨¡æ¿"></a>å…­ã€ç±»æ¨¡æ¿</h1><h2 id="6-1-å®šä¹‰"><a href="#6-1-å®šä¹‰" class="headerlink" title="6.1  å®šä¹‰"></a>6.1  å®šä¹‰</h2><p>åœ¨å®šä¹‰ç±»æ—¶ä¹Ÿå¯ä»¥å°†ä¸€äº›ç±»å‹ä¿¡æ¯æŠ½å–å‡ºæ¥ï¼Œç”¨æ¨¡æ¿å‚æ•°æ¥æ›¿æ¢ï¼Œä»è€Œä½¿ç±»æ›´å…·é€šç”¨æ€§ã€‚è¿™ç§ç±»è¢«ç§°ä¸ºâ€œç±»æ¨¡æ¿â€ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>Â <span class="keyword">namespace</span>Â std;</span><br><span class="line"><span class="keyword">template</span>Â &lt;<span class="keyword">typename</span>Â T&gt;Â <span class="class"><span class="keyword">class</span>Â <span class="title">A</span>Â &#123;</span></span><br><span class="line">Â Â Â Â TÂ data;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">Â Â Â Â <span class="built_in">A</span>(TÂ _data):Â <span class="built_in">data</span>(_data)Â &#123;&#125;</span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">void</span>Â <span class="title">print</span><span class="params">()</span>Â </span>&#123;Â coutÂ &lt;&lt;Â dataÂ &lt;&lt;Â endl;Â &#125;</span><br><span class="line">&#125;;Â </span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span>Â </span>&#123;</span><br><span class="line">Â Â Â Â <span class="function">A&lt;<span class="keyword">int</span>&gt;Â <span class="title">a</span><span class="params">(<span class="number">1</span>)</span></span>;<span class="comment">//å‡½æ•°æ¨¡æ¿å¯ä»¥è‡ªåŠ¨æ¨å¯¼ç±»å‹ï¼Œä½†æ˜¯ç±»æ¨¡æ¿ä¸å¯ä»¥</span></span><br><span class="line">Â Â Â Â a.<span class="built_in">print</span>();</span><br><span class="line">Â Â Â Â <span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆå‘˜å‡½æ•°ä¹Ÿå¯ä»¥å¦‚æ­¤å®šä¹‰ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>Â <span class="keyword">namespace</span>Â std;</span><br><span class="line"><span class="keyword">template</span>Â &lt;<span class="keyword">typename</span>Â T&gt;Â <span class="class"><span class="keyword">class</span>Â <span class="title">A</span>Â &#123;</span></span><br><span class="line">Â Â Â Â TÂ data;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">Â Â Â Â <span class="built_in">A</span>(TÂ _data):Â <span class="built_in">data</span>(_data)Â &#123;&#125;</span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">void</span>Â <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>Â T&gt;</span><br><span class="line"><span class="keyword">void</span>Â A&lt;T&gt;::<span class="built_in">print</span>()Â &#123;Â coutÂ &lt;&lt;Â dataÂ &lt;&lt;Â endl;Â &#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span>Â </span>&#123;</span><br><span class="line">Â Â Â Â <span class="function">A&lt;<span class="keyword">int</span>&gt;Â <span class="title">a</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line">Â Â Â Â a.<span class="built_in">print</span>();</span><br><span class="line">Â Â Â Â <span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-2-æ¨¡æ¿å‚æ•°"><a href="#6-2-æ¨¡æ¿å‚æ•°" class="headerlink" title="6.2  æ¨¡æ¿å‚æ•°"></a>6.2  æ¨¡æ¿å‚æ•°</h2><p>æˆ‘ä»¬å¯ä»¥å°†ç±»æ¨¡æ¿è§†ä¸ºä¸€ç§ç‰¹æ®Šçš„â€œå‡½æ•°â€ï¼Œéœ€è¦å‘å…¶ä¸­ä¼ å…¥å‚æ•°æ‰èƒ½å¤Ÿå®šä¹‰ä¸€ä¸ªå®Œæ•´çš„ç±»ï¼Œè€Œè¿™äº›ä¼ å…¥çš„å‚æ•°æœ‰ä¸¤ç§ã€‚ä¸€ç§æ˜¯ç±»å‹å‚æ•°ï¼Œä¹Ÿå°±æ˜¯åœ¨Typenameæˆ–è€…Classä¹‹åçš„å‚æ•°(ä¸‹ä¾‹ä¸­çš„å°T)ï¼Œç¬¬äºŒç§æ˜¯éç±»å‹å‚æ•°ï¼Œè¿™ä¸ªå¯èƒ½æœ‰éå¸¸å¤šç§ï¼Œæ¯”å¦‚æ•´æ•°ï¼Œæšä¸¾ï¼ŒæŒ‡é’ˆï¼ˆæŒ‡å‘å¯¹è±¡æˆ–å‡½æ•°ï¼‰ï¼Œå¼•ç”¨ï¼ˆå¼•ç”¨å¯¹è±¡æˆ–å¼•ç”¨å‡½æ•°ï¼‰ï¼Œæ— ç¬¦å·æ•´æ•°(unsigned)ç­‰ç­‰ï¼Œæ¯”å¦‚ä¸‹ä¾‹å°±æ˜¯æ— ç¬¦å·æ•´æ•°æ¥å®šä¹‰äº†æ•°ç»„çš„å¤§å°ã€‚</p>
<p>å®é™…ä¸Šï¼Œæ¨¡æ¿æ¯”è¾ƒå¤æ‚æ—¶ï¼Œå°–æ‹¬å·é‡Œå¯ä»¥æ”¾å¾ˆå¤šï¼Œå¯ä»¥æ˜¯ç±»å‹ä¹Ÿå¯ä»¥æ˜¯éç±»å‹ã€‚å½“ç„¶ç±»å‹å‚æ•°ä¹Ÿå¯ä»¥æœ‰å¤šä¸ªã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>Â T,Â <span class="keyword">unsigned</span>Â size&gt;</span><br><span class="line">Â Â <span class="class"><span class="keyword">class</span>Â <span class="title">array</span>Â &#123;</span></span><br><span class="line">Â Â Â Â Â Â TÂ elems[size];</span><br><span class="line">Â Â &#125;;Â </span><br><span class="line">Â Â array&lt;<span class="keyword">char</span>,Â 10&gt;Â array0;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„åˆ°ï¼Œsizeåªæ˜¯ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°çš„åå­—è€Œå·²ï¼Œunsignedå’ŒTypenameæ‰æ˜¯å…³é”®ï¼Œå®Œæ•´çš„ä¼ å…¥ä¸¤ä¸ªå‚æ•°æ‰å¯å½¢æˆä¸€ä¸ªå®Œæ•´çš„ç±»ï¼Œå¹¶å®šä¹‰è¿™ä¸ªç±»çš„å¯¹è±¡ã€‚</p>
<p>ä¸€ä¸ªæ¨¡æ¿å¯èƒ½ä¼šå†™å‡ºå¤šä¸ªæ–°çš„ç±»ï¼Œè¿™äº›ç±»æ˜¯ä¸åŒçš„ï¼Œä¸è¿‡ç¢°å·§éƒ½ç”¨äº†åŒä¸€ä¸ªæ¨¡æ¿çš„åå­—ã€‚ï¼ˆæ¯”å¦‚ä¸Šä¾‹ä¸­çš„arrayæ¨¡æ¿åå­—ï¼‰</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>Â T,Â <span class="keyword">unsigned</span>Â size&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">array</span>Â &#123;</span></span><br><span class="line">Â Â TÂ elems[size];</span><br><span class="line">&#125;;Â </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">Â Â <span class="keyword">int</span>Â nÂ =Â <span class="number">5</span>;</span><br><span class="line">Â Â <span class="comment">//array&lt;char,Â n&gt;Â array0;Â //ä¸èƒ½ä½¿ç”¨å˜é‡</span></span><br><span class="line">Â Â <span class="keyword">const</span>Â <span class="keyword">int</span>Â mÂ =Â <span class="number">5</span>;</span><br><span class="line">Â Â array&lt;<span class="keyword">char</span>,Â m&gt;Â array1;Â <span class="comment">//å¯ä»¥ä½¿ç”¨å¸¸é‡</span></span><br><span class="line">Â Â array&lt;<span class="keyword">char</span>,Â 5&gt;Â array2;Â <span class="comment">//æˆ–å…·ä½“æ•°å€¼</span></span><br><span class="line">Â Â <span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰€æœ‰æ¨¡æ¿å‚æ•°å¿…é¡»åœ¨ç¼–è¯‘æœŸç¡®å®šï¼Œå› è€Œä¸å¯ä»¥ä½¿ç”¨å˜é‡ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span>Â <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span>Â <span class="title">T</span>,Â <span class="title">unsigned</span>Â <span class="title">size</span>&gt;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">MyArr</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">Â Â Â Â TÂ data[size];</span><br><span class="line"><span class="keyword">public</span>:Â </span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">void</span>Â <span class="title">sort</span><span class="params">()</span></span>&#123;</span><br><span class="line">Â Â Â Â Â Â Â Â <span class="keyword">for</span>(<span class="keyword">int</span>Â iÂ =Â <span class="number">0</span>;Â iÂ &lt;Â size;Â i++)&#123;Â <span class="comment">//é€‰æ‹©æ’åº</span></span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="keyword">for</span>(<span class="keyword">int</span>Â jÂ =Â iÂ +Â <span class="number">1</span>;Â jÂ &lt;Â size;Â j++)Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="keyword">if</span>(data[i]Â &gt;Â data[j])</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â std::<span class="built_in">swap</span>(data[i],Â data[j]);Â <span class="comment">//äº¤æ¢ä¸¤è€…ä½ç½®</span></span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">void</span>Â <span class="title">output</span><span class="params">()</span></span>&#123;</span><br><span class="line">Â Â Â Â Â Â Â Â <span class="keyword">for</span>(<span class="keyword">int</span>Â iÂ =Â <span class="number">0</span>;Â iÂ &lt;Â size;Â i++)</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â std::coutÂ &lt;&lt;Â data[i]Â &lt;&lt;Â <span class="string">&quot;Â &quot;</span>;</span><br><span class="line">Â Â Â Â Â Â Â Â std::coutÂ &lt;&lt;Â std::endl;</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">void</span>Â <span class="title">input</span><span class="params">()</span></span>&#123;</span><br><span class="line">Â Â Â Â Â Â Â Â <span class="keyword">for</span>(<span class="keyword">int</span>Â iÂ =Â <span class="number">0</span>;Â iÂ &lt;Â size;Â i++)</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â std::cinÂ &gt;&gt;Â data[i];</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span>Â <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Â Â Â Â MyArr&lt;<span class="keyword">int</span>,Â <span class="number">5</span>&gt;Â arr_a;</span><br><span class="line">Â Â Â Â arr_a.<span class="built_in">input</span>();</span><br><span class="line">Â Â Â Â arr_a.<span class="built_in">sort</span>();</span><br><span class="line">Â Â Â Â arr_a.<span class="built_in">output</span>();</span><br><span class="line">Â Â Â Â </span><br><span class="line">Â Â Â Â MyArr&lt;<span class="keyword">float</span>,Â <span class="number">5</span>&gt;Â arr_b;</span><br><span class="line">Â Â Â Â arr_b.<span class="built_in">input</span>();</span><br><span class="line">Â Â Â Â arr_b.<span class="built_in">sort</span>();</span><br><span class="line">Â Â Â Â arr_b.<span class="built_in">output</span>();</span><br><span class="line">Â Â Â Â <span class="keyword">return</span>Â <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">Inputï¼š<span class="number">3</span> <span class="number">2</span> <span class="number">4</span> <span class="number">1</span> <span class="number">5</span></span><br><span class="line"><span class="number">3.2</span> <span class="number">2.1</span> <span class="number">4.3</span> <span class="number">1.5</span> <span class="number">5.7</span></span><br><span class="line">Outputï¼š</span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></span><br><span class="line"><span class="number">1.5</span> <span class="number">2.1</span> <span class="number">3.2</span> <span class="number">4.3</span> <span class="number">5.7</span></span><br></pre></td></tr></table></figure>
<h2 id="6-3-æ¨¡æ¿ä¸å¤šæ€"><a href="#6-3-æ¨¡æ¿ä¸å¤šæ€" class="headerlink" title="6.3  æ¨¡æ¿ä¸å¤šæ€"></a>6.3  æ¨¡æ¿ä¸å¤šæ€</h2><p>æ¨¡æ¿ä½¿ç”¨æ³›å‹æ ‡è®°ï¼Œä½¿ç”¨åŒä¸€æ®µä»£ç ï¼Œæ¥å…³è”ä¸åŒä½†ç›¸ä¼¼çš„ç‰¹å®šè¡Œä¸ºï¼Œæœ€åå¯ä»¥è·å¾—ä¸åŒçš„ç»“æœã€‚æ¨¡æ¿ä¹Ÿæ˜¯å¤šæ€çš„ä¸€ç§ä½“ç°ã€‚</p>
<p>ä½†æ¨¡æ¿çš„å…³è”æ˜¯åœ¨ç¼–è¯‘æœŸå¤„ç†ï¼Œç§°ä¸º<strong>é™å¤šæ€</strong>ã€‚</p>
<p>æ¨¡æ¿çš„ç‰¹ç‚¹ï¼š</p>
<p>å¾€å¾€å’Œ<strong>å‡½æ•°é‡è½½</strong>åŒæ—¶ä½¿ç”¨ï¼›é«˜æ•ˆï¼Œçœå»å‡½æ•°è°ƒç”¨ï¼›ç¼–è¯‘åä»£ç å¢å¤š</p>
<p>åŸºäºç»§æ‰¿å’Œè™šå‡½æ•°çš„å¤šæ€åœ¨è¿è¡ŒæœŸå¤„ç†ï¼Œç§°ä¸ºåŠ¨å¤šæ€</p>
<p>è™šå‡½æ•°çš„ç‰¹ç‚¹ï¼šè¿è¡Œæ—¶ï¼Œçµæ´»æ–¹ä¾¿ï¼›ä¾µå…¥å¼ï¼Œå¿…é¡»ç»§æ‰¿ï¼›å­˜åœ¨å‡½æ•°è°ƒç”¨</p>
<p>æ‰€è°“çš„çœå»å‡½æ•°è°ƒç”¨æ˜¯æŒ‡ï¼Œå¦‚æœdoSomethingOnAå’ŒdoSomethingOnBçš„å®ç°é™¤äº†ç±»å‹ä¸åŒï¼Œå…¶ä»–åŸºæœ¬ä¸€è‡´çš„è¯åˆ™å¯çœå»å¦‚ä¸‹ä»£ç ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="built_in">typeof</span>(a)==A)&#123;</span><br><span class="line">Â <span class="built_in">doSomethingOnA</span>(a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>Â <span class="keyword">if</span>(<span class="built_in">typeof</span>(a)==B)&#123;</span><br><span class="line">Â <span class="built_in">doSomethingOnB</span>(a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç›´æ¥å†™ä¸€ä¸ªæ¨¡æ¿ç„¶ådosomethingOnWhatever</p>
</article><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="addthis_inline_share_toolbox"></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-62b11572b25ab3ab" async="async"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/01/12/Lecture/%E4%BB%8E%E5%89%8D%E7%9A%84%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/OOP/L8%20%E8%99%9A%E5%87%BD%E6%95%B0/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/zhaochenyang20/ivue_wallpaper/main/ivue_desktop/Photo by Egor Myznik (RtR2i-Fo6iI).jpg" onerror="onerror=null;src='https://wkphoto.cdn.bcebos.com/1f178a82b9014a9058a735deb9773912b31bee3c.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">oopç¬”è®°  L8  è™šå‡½æ•°</div></div></a></div><div class="next-post pull-right"><a href="/2022/01/12/Lecture/%E4%BB%8E%E5%89%8D%E7%9A%84%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/OOP/L7%20%E7%BB%84%E5%90%88%E4%B8%8E%E7%BB%A7%E6%89%BF/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.imgdb.cn/item/61f2b2892ab3f51d91051bb8.jpg" onerror="onerror=null;src='https://wkphoto.cdn.bcebos.com/1f178a82b9014a9058a735deb9773912b31bee3c.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">oopç¬”è®°  L7  ç»„åˆä¸ç»§æ‰¿</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div><div id="comment-switch"><span class="first-comment">Valine</span><span class="switch-btn"></span><span class="second-comment">Disqus</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#L9-%E5%A4%9A%E6%80%81%E4%B8%8E%E6%A8%A1%E6%9D%BF"><span class="toc-number">1.</span> <span class="toc-text">L9 å¤šæ€ä¸æ¨¡æ¿</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%8A%BD%E8%B1%A1%E7%B1%BB%E4%B8%8E%E7%BA%AF%E8%99%9A%E5%87%BD%E6%95%B0"><span class="toc-number">2.</span> <span class="toc-text">ä¸€ã€æŠ½è±¡ç±»ä¸çº¯è™šå‡½æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E5%AE%9A%E4%B9%89"><span class="toc-number">2.1.</span> <span class="toc-text">1.1  å®šä¹‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E6%8A%BD%E8%B1%A1%E7%B1%BB%E7%BB%A7%E6%89%BF"><span class="toc-number">2.2.</span> <span class="toc-text">1.2  æŠ½è±¡ç±»ç»§æ‰¿</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E7%BA%AF%E8%99%9A%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="toc-number">2.3.</span> <span class="toc-text">1.3  çº¯è™šææ„å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E7%BA%AF%E8%99%9A%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0%E5%92%8C%E5%85%B6%E4%BB%96%E7%BA%AF%E8%99%9A%E5%87%BD%E6%95%B0%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.4.</span> <span class="toc-text">1.4 çº¯è™šææ„å‡½æ•°å’Œå…¶ä»–çº¯è™šå‡½æ•°çš„åŒºåˆ«</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%90%91%E4%B8%8B%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-number">3.</span> <span class="toc-text">äºŒã€å‘ä¸‹ç±»å‹è½¬æ¢</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%AE%9A%E4%B9%89"><span class="toc-number">3.1.</span> <span class="toc-text">2.1  å®šä¹‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E8%BD%AC%E6%8D%A2%E6%96%B9%E5%BC%8F"><span class="toc-number">3.2.</span> <span class="toc-text">2.2  è½¬æ¢æ–¹å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-%E5%AE%89%E5%85%A8%E5%90%91%E4%B8%8B%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%EF%BC%88%E5%9F%BA%E7%B1%BB%E5%90%91%E6%B4%BE%E7%94%9F%E7%B1%BB%E7%9A%84%E8%BD%AC%E6%8D%A2%EF%BC%89"><span class="toc-number">3.2.1.</span> <span class="toc-text">2.2.1  å®‰å…¨å‘ä¸‹ç±»å‹è½¬æ¢ï¼ˆåŸºç±»å‘æ´¾ç”Ÿç±»çš„è½¬æ¢ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-%E5%BF%AB%E9%80%9F%E5%90%91%E4%B8%8B%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-number">3.2.2.</span> <span class="toc-text">2.2.2  å¿«é€Ÿå‘ä¸‹ç±»å‹è½¬æ¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-%E6%80%BB%E7%BB%93"><span class="toc-number">3.2.3.</span> <span class="toc-text">2.2.3  æ€»ç»“</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%8A%BD%E8%B1%A1%E7%B1%BB%E4%B8%8E%E7%BA%AF%E8%99%9A%E5%87%BD%E6%95%B0"><span class="toc-number">4.</span> <span class="toc-text">ä¸‰ã€æŠ½è±¡ç±»ä¸çº¯è™šå‡½æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF"><span class="toc-number">4.1.</span> <span class="toc-text">3.1  å¤šé‡ç»§æ‰¿</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E4%BE%8B%E5%AD%90"><span class="toc-number">4.2.</span> <span class="toc-text">3.2  ä¾‹å­</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%A4%9A%E6%80%81-Polymorphism"><span class="toc-number">5.</span> <span class="toc-text">å››ã€å¤šæ€ Polymorphism</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E5%AE%9A%E4%B9%89"><span class="toc-number">5.1.</span> <span class="toc-text">4.1  å®šä¹‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E4%BC%98%E5%8A%BF"><span class="toc-number">5.2.</span> <span class="toc-text">4.2  ä¼˜åŠ¿</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E4%B8%8E%E7%B1%BB%E6%A8%A1%E6%9D%BF"><span class="toc-number">6.</span> <span class="toc-text">äº”ã€å‡½æ•°æ¨¡æ¿ä¸ç±»æ¨¡æ¿</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E6%84%8F%E4%B9%89%E4%B8%8E%E5%AE%9A%E4%B9%89"><span class="toc-number">6.1.</span> <span class="toc-text">5.1  æ„ä¹‰ä¸å®šä¹‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E5%AE%9E%E4%BE%8B%E5%8C%96%E4%B8%8E%E8%87%AA%E5%8A%A8%E6%8E%A8%E5%AF%BC"><span class="toc-number">6.2.</span> <span class="toc-text">5.2  å®ä¾‹åŒ–ä¸è‡ªåŠ¨æ¨å¯¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E6%A8%A1%E6%9D%BF%E5%8E%9F%E7%90%86"><span class="toc-number">6.3.</span> <span class="toc-text">5.3  æ¨¡æ¿åŸç†</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E7%B1%BB%E6%A8%A1%E6%9D%BF"><span class="toc-number">7.</span> <span class="toc-text">å…­ã€ç±»æ¨¡æ¿</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E5%AE%9A%E4%B9%89"><span class="toc-number">7.1.</span> <span class="toc-text">6.1  å®šä¹‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-%E6%A8%A1%E6%9D%BF%E5%8F%82%E6%95%B0"><span class="toc-number">7.2.</span> <span class="toc-text">6.2  æ¨¡æ¿å‚æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-%E6%A8%A1%E6%9D%BF%E4%B8%8E%E5%A4%9A%E6%80%81"><span class="toc-number">7.3.</span> <span class="toc-text">6.3  æ¨¡æ¿ä¸å¤šæ€</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background: ï¼ƒ0096FF"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Eren Zhao</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div><script type="text/javascript" id="maid-script" src="https://unpkg.com/mermaid@undefined/dist/mermaid.min.js?v=undefined"></script><script>if (window.mermaid) {
  var options = JSON.parse(document.getElementById('maid-script').getAttribute('mermaidoptioins'));
  mermaid.initialize(options);
}</script></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœ¬åœ°æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“æ­£åœ¨è‰°éš¾è¿è¡Œ</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '',
      appKey: '',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script>function loadDisqus () {
  var disqus_config = function () {
    this.page.url = 'http://example.com/2022/01/12/Lecture/%E4%BB%8E%E5%89%8D%E7%9A%84%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/OOP/L9%20%E5%A4%9A%E6%80%81%E4%B8%8E%E6%A8%A1%E6%9D%BF/'
    this.page.identifier = '2022/01/12/Lecture/ä»å‰çš„ç¨‹åºè®¾è®¡/OOP/L9 å¤šæ€ä¸æ¨¡æ¿/'
    this.page.title = 'oopç¬”è®°  L9  å¤šæ€ä¸æ¨¡æ¿'
  };

  window.disqusReset = () => {
    DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  if (window.DISQUS) disqusReset()
  else {
    (function() { 
      var d = document, s = d.createElement('script');
      s.src = 'https://.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }
}

if ('Valine' === 'Disqus' || !true) {
  if (true) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
  else loadDisqus()
} else {
  function loadOtherComment () {
    loadDisqus()
  }
}
</script></div><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/"});</script></body></html>