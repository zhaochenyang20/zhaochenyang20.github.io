<!DOCTYPE html><html lang="en-US" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>人生苦短，我用 Python Part 1 | 而这样的梦幻又将多久醒来？</title><meta name="keywords" content="2022春季,Python"><meta name="author" content="Eren Zhao"><meta name="copyright" content="Eren Zhao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Life is short, U need Python!">
<meta property="og:type" content="article">
<meta property="og:title" content="人生苦短，我用 Python Part 1">
<meta property="og:url" content="http://example.com/2022/02/25/CS/others/%E4%BA%BA%E7%94%9F%E8%8B%A6%E7%9F%AD%EF%BC%8C%E6%88%91%E7%94%A8Python/index.html">
<meta property="og:site_name" content="而这样的梦幻又将多久醒来？">
<meta property="og:description" content="Life is short, U need Python!">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://pic.imgdb.cn/item/61f106a22ab3f51d917b3dc0.jpg">
<meta property="article:published_time" content="2022-02-24T19:31:26.000Z">
<meta property="article:modified_time" content="2022-03-12T07:30:11.821Z">
<meta property="article:author" content="Eren Zhao">
<meta property="article:tag" content="2022春季">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic.imgdb.cn/item/61f106a22ab3f51d917b3dc0.jpg"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="http://example.com/2022/02/25/CS/others/%E4%BA%BA%E7%94%9F%E8%8B%A6%E7%9F%AD%EF%BC%8C%E6%88%91%E7%94%A8Python/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '人生苦短，我用 Python Part 1',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-03-12 15:30:11'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.0.0"><style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}</style></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpeg" onerror="onerror=null;src='/img/friend.jpg'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">181</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">56</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">12</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://pic.imgdb.cn/item/61f106a22ab3f51d917b3dc0.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">而这样的梦幻又将多久醒来？</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">人生苦短，我用 Python Part 1</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-02-24T19:31:26.000Z" title="Created 2022-02-25 03:31:26">2022-02-25</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2022-03-12T07:30:11.821Z" title="Updated 2022-03-12 15:30:11">2022-03-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/CS/">CS</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">9.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>44min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="人生苦短，我用 Python Part 1"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>这是 zhaochen20 的 Python 学习笔记，不定期更新，<a target="_blank" rel="noopener" href="https://lead-alley-0ca.notion.site/python-e75f12727a6c478ca793034703ab519b">原链接在 notion 上</a></p>
<p>因为本文已经太长了， Notion 打开极其不方便，因此新开了一篇，<a target="_blank" rel="noopener" href="https://lead-alley-0ca.notion.site/Python-Part-2-dc4ac581989c4533894bc68a83b0a8d9">链接在此</a></p>
<h1 id="人生苦短，我用python"><a href="#人生苦短，我用python" class="headerlink" title="人生苦短，我用python"></a>人生苦短，我用python</h1><h1 id="数的运算"><a href="#数的运算" class="headerlink" title="数的运算"></a>数的运算</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">1</span>]: <span class="number">4</span>/<span class="number">2</span></span><br><span class="line">Out[<span class="number">1</span>]: <span class="number">2.0</span></span><br><span class="line">任何两个数相除，得到的总是浮点数</span><br><span class="line">只要操作数中有浮点数，结果总是浮点数</span><br></pre></td></tr></table></figure>
<h1 id="数字下线"><a href="#数字下线" class="headerlink" title="数字下线"></a>数字下线</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">universe_age = <span class="number">14_000_000_000</span></span><br></pre></td></tr></table></figure>
<h1 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h1><p>在实际的程序开发中，我们通常会将一个不可变的变量声明为一个常量。在很多高级语言中都会提供常量的关键字来定义常量，如 <code>C++</code> 中的 <code>const</code> ， <code>Java</code> 中的 <code>final</code> 等，但是 <code>Python</code> 语言因为变量无类型，所以也就不存在这样的修饰符，其本身并未提供任何机制来进行常量的定义。因此我们只能通过自己定义类的方法来定义一个符合常量规则的类，使得该类定义的成员属性满足常量的属性。常量一般符合以下两条规则：</p>
<ol>
<li>常量的各个字母使用大写字母表示，中间以下划线连接：如 MAX_VALUE;</li>
<li>常量的值一旦绑定则不可以再修改。</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/ydcode/p/10996791.html">Python 定义自己的常量类</a></p>
<h1 id="list"><a href="#list" class="headerlink" title="list"></a>list</h1><h2 id="sort-sorted-reverse"><a href="#sort-sorted-reverse" class="headerlink" title="sort, sorted, reverse"></a>sort, sorted, reverse</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sort和reverse是永久排序，<span class="built_in">sorted</span>则是临时排序</span><br><span class="line">sort和<span class="built_in">sorted</span>默认按照升序排序，如果想要倒序排序，需传入参数revers=<span class="literal">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">2</span>]: cars = [<span class="string">&quot;bmw&quot;</span>, <span class="string">&quot;audi&quot;</span>, <span class="string">&quot;subaru&quot;</span>, <span class="string">&quot;toyota&quot;</span>]</span><br><span class="line">In [<span class="number">3</span>]: cars.sort(reverse=<span class="literal">True</span>)</span><br><span class="line">In [<span class="number">4</span>]: cars</span><br><span class="line">Out[<span class="number">4</span>]: [<span class="string">&#x27;toyota&#x27;</span>, <span class="string">&#x27;subaru&#x27;</span>, <span class="string">&#x27;bmw&#x27;</span>, <span class="string">&#x27;audi&#x27;</span>]</span><br><span class="line">In [<span class="number">5</span>]: cars.sort()</span><br><span class="line">In [<span class="number">6</span>]: cars</span><br><span class="line">Out[<span class="number">6</span>]: [<span class="string">&#x27;audi&#x27;</span>, <span class="string">&#x27;bmw&#x27;</span>, <span class="string">&#x27;subaru&#x27;</span>, <span class="string">&#x27;toyota&#x27;</span>]</span><br><span class="line"></span><br><span class="line">however,<span class="built_in">sorted</span>的使用与sort不同</span><br><span class="line">In [<span class="number">7</span>]: cars = [<span class="string">&quot;bmw&quot;</span>, <span class="string">&quot;audi&quot;</span>, <span class="string">&quot;subaru&quot;</span>, <span class="string">&quot;toyota&quot;</span>]</span><br><span class="line">In [<span class="number">8</span>]: <span class="built_in">print</span>(<span class="built_in">sorted</span>(cars))</span><br><span class="line">[<span class="string">&#x27;audi&#x27;</span>, <span class="string">&#x27;bmw&#x27;</span>, <span class="string">&#x27;subaru&#x27;</span>, <span class="string">&#x27;toyota&#x27;</span>]</span><br><span class="line">In [<span class="number">9</span>]: <span class="built_in">print</span>(cars)</span><br><span class="line">[<span class="string">&#x27;bmw&#x27;</span>, <span class="string">&#x27;audi&#x27;</span>, <span class="string">&#x27;subaru&#x27;</span>, <span class="string">&#x27;toyota&#x27;</span>]</span><br></pre></td></tr></table></figure>
<h2 id="list添加元素"><a href="#list添加元素" class="headerlink" title="list添加元素"></a>list添加元素</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">list</span>添加元素需要用append，如果用加号会直接扩大<span class="built_in">list</span></span><br><span class="line">In [<span class="number">5</span>]: <span class="built_in">list</span> = []</span><br><span class="line"></span><br><span class="line">In [<span class="number">6</span>]: <span class="built_in">list</span> += (<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">In [<span class="number">7</span>]: <span class="built_in">list</span></span><br><span class="line">Out[<span class="number">7</span>]: [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">8</span>]: <span class="built_in">list</span> += [<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">In [<span class="number">9</span>]: <span class="built_in">list</span></span><br><span class="line">Out[<span class="number">9</span>]: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure>
<h2 id="遍历列表"><a href="#遍历列表" class="headerlink" title="遍历列表"></a>遍历列表</h2><p>python写循环的建议</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/68128557">Python编写循环的两个建议 | 鹅厂实战</a></p>
<h3 id="使用函数修饰被迭代对象来优化循环"><a href="#使用函数修饰被迭代对象来优化循环" class="headerlink" title="使用函数修饰被迭代对象来优化循环"></a>使用函数修饰被迭代对象来优化循环</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i, name <span class="keyword">in</span> <span class="built_in">enumerate</span>(names):</span><br><span class="line">    <span class="built_in">print</span>(i, name)</span><br></pre></td></tr></table></figure>
<h3 id="使用-product-扁平化多层嵌套循环"><a href="#使用-product-扁平化多层嵌套循环" class="headerlink" title="使用 product 扁平化多层嵌套循环"></a>使用 product 扁平化多层嵌套循环</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> product</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">find_twelve_v2</span>(<span class="params">num_list1, num_list2, num_list3</span>):</span></span><br><span class="line">    <span class="keyword">for</span> num1, num2, num3 <span class="keyword">in</span> product(num_list1, num_list2, num_list3):</span><br><span class="line">        <span class="keyword">if</span> num1 + num2 + num3 == <span class="number">12</span>:</span><br><span class="line">            <span class="keyword">return</span> num1, num2, num3</span><br></pre></td></tr></table></figure>
<h3 id="使用-islice-实现循环内隔行处理"><a href="#使用-islice-实现循环内隔行处理" class="headerlink" title="使用 islice 实现循环内隔行处理"></a><strong>使用 islice 实现循环内隔行处理</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> islice</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_titles_v2</span>(<span class="params">filename</span>):</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">        <span class="comment"># 设置 step=2，跳过无意义的 &#x27;---&#x27; 分隔符</span></span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> islice(fp, <span class="number">0</span>, <span class="literal">None</span>, <span class="number">2</span>):</span><br><span class="line">            <span class="keyword">yield</span> line.strip()</span><br></pre></td></tr></table></figure>
<h3 id="使用takewhile-代替break语句"><a href="#使用takewhile-代替break语句" class="headerlink" title="使用takewhile()代替break语句"></a>使用takewhile()代替break语句</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> takewhile</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> user <span class="keyword">in</span> takewhile(is_qualified, users):</span><br><span class="line">    <span class="comment"># 进行处理 ... ...</span></span><br></pre></td></tr></table></figure>
<h3 id="使用生成器编写自己的修饰函数"><a href="#使用生成器编写自己的修饰函数" class="headerlink" title="使用生成器编写自己的修饰函数"></a><strong>使用生成器编写自己的修饰函数</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum_even_only</span>(<span class="params">numbers</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;对 numbers 里面所有的偶数求和&quot;&quot;&quot;</span></span><br><span class="line">    result = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> numbers:</span><br><span class="line">        <span class="keyword">if</span> num % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">            result += num</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">为了少用<span class="keyword">if</span>，改写为：</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">even_only</span>(<span class="params">numbers</span>):</span></span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> numbers:</span><br><span class="line">        <span class="keyword">if</span> num % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">yield</span> num</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum_even_only_v2</span>(<span class="params">numbers</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;对 numbers 里面所有的偶数求和&quot;&quot;&quot;</span></span><br><span class="line">    result = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> even_only(numbers):</span><br><span class="line">        result += num</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">然而实际上：</span><br><span class="line"><span class="built_in">sum</span>(num <span class="keyword">for</span> num <span class="keyword">in</span> numbers <span class="keyword">if</span> num % <span class="number">2</span> == <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h3 id="按职责拆解循环体内复杂代码块"><a href="#按职责拆解循环体内复杂代码块" class="headerlink" title="按职责拆解循环体内复杂代码块"></a><strong>按职责拆解循环体内复杂代码块</strong></h3><p>循环是一个比较神奇的东西，每当你写下一个新的循环代码块，就好像开辟了天坑，天坑内的所有内容都会开始无休止的重复执行。</p>
<p>不过天坑除了能带来好处，<strong>它还会引诱你不断往坑里面内塞入越来越多的代码，包括过滤掉无效元素、预处理数据、打印日志等等。甚至一些原本不属于同一抽象的内容，也会被塞入到同一片黑魔法阵内。归根到底，尽量使用生成器函数解耦循环体。</strong></p>
<h1 id="numpy-array"><a href="#numpy-array" class="headerlink" title="numpy.array"></a>numpy.array</h1><p><a target="_blank" rel="noopener" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html">numpy.array - NumPy v1.21 Manual</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/massquantity/p/8908859.html">numpy.where() 用法详解</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_24193303/article/details/80961646">python 中 numpy 模块的 size,shape, len的用法_墨晓白的博客-CSDN博客_numpy size</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/traditional/p/12625998.html">numpy中的数组之间进行集合运算</a></p>
<h1 id="dictionary"><a href="#dictionary" class="headerlink" title="dictionary"></a>dictionary</h1><h2 id="添加元素"><a href="#添加元素" class="headerlink" title="添加元素"></a>添加元素</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">直接写就好了</span><br><span class="line"><span class="keyword">for</span> each_label <span class="keyword">in</span> target_list:</span><br><span class="line">        result_list = np.where(arr[<span class="string">&quot;label&quot;</span>]==each_label)</span><br><span class="line">        dic[each_label] = result_list</span><br></pre></td></tr></table></figure>
<p>一个很有意思的例子：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">30</span>]: new_dic=new_dic = &#123;<span class="number">1</span>: <span class="number">1</span>, <span class="number">2</span>: <span class="number">3</span>, <span class="number">3</span>: <span class="number">1</span>, <span class="number">4</span>: <span class="number">2</span>, <span class="number">5</span>: <span class="number">1</span>, <span class="number">6</span>: <span class="number">1</span>, <span class="number">7</span>: <span class="number">1</span>, <span class="number">8</span>: <span class="number">1</span>, <span class="number">9</span>: <span class="number">4</span></span><br><span class="line">    ...: , <span class="number">10</span>: <span class="number">2</span>&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">31</span>]: <span class="keyword">for</span> key <span class="keyword">in</span> new_dic:</span><br><span class="line">    ...:     <span class="keyword">try</span>:</span><br><span class="line">    ...:         new_dic[key+<span class="number">1</span>] += new_dic[key]</span><br><span class="line">    ...:     <span class="keyword">except</span>:</span><br><span class="line">    ...:         <span class="keyword">pass</span></span><br><span class="line">    ...:</span><br></pre></td></tr></table></figure>
<p>这里看上去不加try except对于new_dic[11]应该不会报错。但实际上，由于我们用了new_dic[key+1] += new_dic[key]，这一步默认new_dic[key+1]得存在才能用+=，所有会报错。</p>
<h2 id="按照key值排序"><a href="#按照key值排序" class="headerlink" title="按照key值排序"></a>按照key值排序</h2><p>注意sorted(dic)的返回值是一个list，不再是dic了</p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-sort-dictionaries-by-key-or-value.html">Python 按键(key)或值(value)对字典进行排序</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">17</span>]: dic = &#123;<span class="number">10</span>: <span class="number">2</span>, <span class="number">4</span>: <span class="number">2</span>, <span class="number">2</span>: <span class="number">3</span>, <span class="number">9</span>: <span class="number">4</span>, <span class="number">3</span>: <span class="number">1</span>, <span class="number">1</span>: <span class="number">1</span>, <span class="number">8</span>: <span class="number">1</span>, <span class="number">5</span>: <span class="number">1</span>, <span class="number">7</span>: <span class="number">1</span>, <span class="number">6</span>: <span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">18</span>]: <span class="built_in">sorted</span>(dic)</span><br><span class="line">Out[<span class="number">18</span>]: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">19</span>]: <span class="built_in">print</span>(dic)</span><br><span class="line">&#123;<span class="number">10</span>: <span class="number">2</span>, <span class="number">4</span>: <span class="number">2</span>, <span class="number">2</span>: <span class="number">3</span>, <span class="number">9</span>: <span class="number">4</span>, <span class="number">3</span>: <span class="number">1</span>, <span class="number">1</span>: <span class="number">1</span>, <span class="number">8</span>: <span class="number">1</span>, <span class="number">5</span>: <span class="number">1</span>, <span class="number">7</span>: <span class="number">1</span>, <span class="number">6</span>: <span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">20</span>]: new_dic = &#123;&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">21</span>]: <span class="keyword">for</span> key <span class="keyword">in</span> <span class="built_in">sorted</span>(dic):</span><br><span class="line">    ...:     new_dic[key]=dic[key]</span><br><span class="line">    ...:</span><br><span class="line"></span><br><span class="line">In [<span class="number">22</span>]: <span class="built_in">print</span>(new_dic)</span><br><span class="line">&#123;<span class="number">1</span>: <span class="number">1</span>, <span class="number">2</span>: <span class="number">3</span>, <span class="number">3</span>: <span class="number">1</span>, <span class="number">4</span>: <span class="number">2</span>, <span class="number">5</span>: <span class="number">1</span>, <span class="number">6</span>: <span class="number">1</span>, <span class="number">7</span>: <span class="number">1</span>, <span class="number">8</span>: <span class="number">1</span>, <span class="number">9</span>: <span class="number">4</span>, <span class="number">10</span>: <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure>
<h1 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h1><p><a target="_blank" rel="noopener" href="https://github.com/dranjan/python-plyfile">https://github.com/dranjan/python-plyfile</a></p>
<h1 id="Robust"><a href="#Robust" class="headerlink" title="Robust"></a>Robust</h1><p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/zh-hans/%E9%B2%81%E6%A3%92%E6%80%A7">鲁棒性 - 维基百科，自由的百科全书</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">写python尽量鲁棒一些，多写函数，少写文件</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    DATA_PATH = <span class="string">&#x27;/home/aidrive/tb5zhh/SpecCluster/tbw/new_results_200/clustered&#x27;</span></span><br><span class="line">    dirs = os.listdir(DATA_PATH)</span><br><span class="line">    <span class="keyword">for</span> file <span class="keyword">in</span> tqdm(<span class="built_in">sorted</span>(dirs)):</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;raw&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> file:</span><br><span class="line">            <span class="keyword">continue</span>    </span><br><span class="line">        <span class="comment"># print(f&quot;now working file is &#123;file&#125;&quot;)</span></span><br><span class="line">        clustered_file = <span class="string">&quot;/home/aidrive/tb5zhh/SpecCluster/tbw/new_results_200/clustered/&quot;</span>+file</span><br><span class="line">        name_head = file[<span class="number">0</span>:<span class="number">12</span>]</span><br><span class="line">        name = <span class="string">&quot;/home/aidrive/tb5zhh/data/full_mesh/train/&quot;</span>+name_head+<span class="string">&quot;.ply&quot;</span></span><br><span class="line">        calcualte_iou(name,clustered_file)</span><br></pre></td></tr></table></figure>
<h1 id="tqdm-yyds"><a href="#tqdm-yyds" class="headerlink" title="tqdm yyds!"></a>tqdm yyds!</h1><p>tqdm既是一个module，也是一个函数，所以写的时候需要用：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> tqdm(<span class="built_in">sorted</span>(dirs)):</span><br><span class="line">        target = DATA_PATH + <span class="string">f&quot;/<span class="subst">&#123;file&#125;</span>&quot;</span></span><br><span class="line">        get_full_scene_iou(get_each_scene_iou(target),dic)</span><br><span class="line">    <span class="keyword">for</span> key <span class="keyword">in</span> tqdm(dic):</span><br><span class="line">        dic[key].append(dic[key][<span class="number">0</span>]/dic[key][<span class="number">1</span>])</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://tqdm.github.io/">tqdm documentation</a></p>
<h1 id="try-except"><a href="#try-except" class="headerlink" title="try except:"></a>try except:</h1><p>防止该报错的地方没报错</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> <span class="keyword">except</span>要加冒号，<span class="keyword">if</span>也要加，<span class="keyword">for</span>也要加</span><br><span class="line"><span class="built_in">list</span> = [<span class="number">20</span>,<span class="number">100</span>]</span><br><span class="line">    <span class="keyword">for</span> each <span class="keyword">in</span> <span class="built_in">list</span>:</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">f&quot;iou_<span class="subst">&#123;each&#125;</span>.json&quot;</span>,<span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            data = json.load(f)</span><br><span class="line">            <span class="keyword">for</span> key <span class="keyword">in</span> data:</span><br><span class="line">                <span class="built_in">print</span>(key)</span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    <span class="built_in">print</span>(data[key][<span class="number">2</span>])</span><br><span class="line">                <span class="keyword">except</span>:</span><br><span class="line">                    <span class="built_in">print</span>(data[key])</span><br></pre></td></tr></table></figure>
<p>这段代码本来用来print一个json存的dic，这个dic我理想中应该是每个value都是一个三元list，但是我忘记了最后一个key的value是个string，而python很神奇的同样将他print了出来，这件事是非常危险的，理论上应该在data[key]的地方就检测是否是一个list。</p>
<h1 id="python-json"><a href="#python-json" class="headerlink" title="python json"></a>python json</h1><p><a target="_blank" rel="noopener" href="https://www.runoob.com/python/python-json.html">Python JSON</a></p>
<p>json的优点是读起来方便，但是使用的内存比较大，如果数据量比较大，推荐使用torch.save()</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/qinduanyinghua/p/9311410.html">pytorch保存模型等相关参数，利用torch.save()，以及读取保存之后的文件</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">f&#x27;./result/<span class="subst">&#123;file&#125;</span>&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>, errors=<span class="string">&#x27;ignore&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        data = json.load(f, strict=<span class="literal">False</span>)</span><br><span class="line">        dic[index] = data</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">这串代码debug特别久，其实最大的问题在于，os.listdir并没有确保里面所有的文件都是json格式，实际上里面混入了.sql文件，导致很多麻烦</span><br></pre></td></tr></table></figure>
<h1 id="os-listdir"><a href="#os-listdir" class="headerlink" title="os.listdir()"></a>os.listdir()</h1><p><a target="_blank" rel="noopener" href="https://www.runoob.com/python/os-listdir.html">Python os.listdir() 方法</a></p>
<h1 id="embed"><a href="#embed" class="headerlink" title="embed()"></a>embed()</h1><p><a target="_blank" rel="noopener" href="https://vimsky.com/zh-tw/examples/detail/python-method-IPython.embed.html">Python IPython.embed方法代碼示例</a></p>
<h1 id="遍历字典"><a href="#遍历字典" class="headerlink" title="遍历字典"></a>遍历字典</h1><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/33033288">python字典遍历的几种方法</a></p>
<h1 id="global参数危险"><a href="#global参数危险" class="headerlink" title="global参数危险"></a>global参数危险</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">global</span>参数其实比较危险，比起把某个参数设置为<span class="keyword">global</span>，不如直接把某个参数传入函数</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_full_scene_iou</span>(<span class="params"><span class="built_in">list</span>,dic</span>):</span></span><br><span class="line">    <span class="keyword">for</span> each <span class="keyword">in</span> <span class="built_in">list</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            dic[each[<span class="number">0</span>]][<span class="number">0</span>] += each[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            dic[each[<span class="number">0</span>]] = []</span><br><span class="line">            dic[each[<span class="number">0</span>]].append(each[<span class="number">1</span>])</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            dic[each[<span class="number">0</span>]][<span class="number">1</span>] += each[<span class="number">2</span>]</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            dic[each[<span class="number">0</span>]].append(each[<span class="number">2</span>])</span><br></pre></td></tr></table></figure>
<p>同样是上面一串代码，虽然python的dictionary很智能，但是dic的value你也不能直接认为是一个list，只能一个一个去try</p>
<h1 id="字符串非法修改"><a href="#字符串非法修改" class="headerlink" title="字符串非法修改"></a>字符串非法修改</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python的字符串是不能修改某一位的，所以下方代码没法直接令a[<span class="number">4</span>]=xxxxx</span><br><span class="line">a = <span class="built_in">str</span>(<span class="number">100</span>*dic[key][<span class="number">0</span>]/dic[key][<span class="number">1</span>])</span><br><span class="line">        <span class="keyword">if</span> a[<span class="number">5</span>]&gt;=<span class="string">&quot;5&quot;</span>:</span><br><span class="line">            appendix = <span class="string">f&#x27;<span class="subst">&#123;(<span class="built_in">int</span>(a[<span class="number">4</span>])+<span class="number">1</span>)&#125;</span>&#x27;</span></span><br><span class="line">        <span class="keyword">else</span> :</span><br><span class="line">            appendix = a[<span class="number">4</span>]</span><br><span class="line">        a = a[:<span class="number">3</span>] + appendix</span><br></pre></td></tr></table></figure>
<h1 id="模块引用"><a href="#模块引用" class="headerlink" title="模块引用"></a>模块引用</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/winycg/article/details/78512300">python 一个.py文件如何调用另一个.py文件中的类和函数_winycg的博客-CSDN博客_python调用另一个py文件</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">貌似文章里第一句话不靠谱，还是要写成</span><br><span class="line"><span class="keyword">from</span> A <span class="keyword">import</span> add</span><br></pre></td></tr></table></figure>
<ul>
<li>[ ] 整理这篇文章</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/432422130">Python大神用的贼溜，9个实用技巧分享给你</a></p>
<ul>
<li>[ ] pysnooper</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/431830963">别再用 print 调试代码了！PySnooper：一款 GitHub 热门调试工具！</a></p>
<h1 id="列表广播"><a href="#列表广播" class="headerlink" title="列表广播"></a>列表广播</h1><p>直接的广播需要用numpy</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>array = numpy.array([<span class="number">49</span>, <span class="number">51</span>, <span class="number">53</span>, <span class="number">56</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>array - <span class="number">13</span></span><br><span class="line">array([<span class="number">36</span>, <span class="number">38</span>, <span class="number">40</span>, <span class="number">43</span>])</span><br></pre></td></tr></table></figure>
<p>原生广播需要用列表推导式：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [x - <span class="number">13</span> <span class="keyword">for</span> x <span class="keyword">in</span> a]</span><br><span class="line"></span><br><span class="line">In [<span class="number">10</span>]: c = [<span class="number">49.7</span>, <span class="number">25.0</span>, <span class="number">22.0</span>, <span class="number">48.8</span>, <span class="number">48.7</span>]</span><br><span class="line">In [<span class="number">11</span>]: c = [x - <span class="number">54.6</span> <span class="keyword">for</span> x <span class="keyword">in</span> c]</span><br><span class="line">In [<span class="number">12</span>]: c</span><br><span class="line">Out[<span class="number">12</span>]: [-<span class="number">4.899999999999999</span>, -<span class="number">29.6</span>, -<span class="number">32.6</span>, -<span class="number">5.800000000000004</span>, -<span class="number">5.899999999999999</span>]</span><br></pre></td></tr></table></figure>
<h1 id="random"><a href="#random" class="headerlink" title="random"></a>random</h1><p><a target="_blank" rel="noopener" href="https://learn.markteaching.com/%E3%80%90python-%E6%95%99%E5%AD%B8%E3%80%91%E9%9A%A8%E6%A9%9F%E4%BA%82%E6%95%B8-random-%E5%87%BD%E6%95%B8%E7%9A%84%E7%94%A8%E6%B3%95%E8%88%87%E7%AF%84%E4%BE%8B/">【Python 教學】隨機亂數 random 函數的用法與範例 - Mark學習筆記</a></p>
<h1 id="Conda基本操作"><a href="#Conda基本操作" class="headerlink" title="Conda基本操作"></a>Conda基本操作</h1><p><a target="_blank" rel="noopener" href="https://dulunar.github.io/2019/11/21/conda%E6%93%8D%E4%BD%9C/">Conda的基本操作 - 鲁娜的博客 | Luna’s Blog</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">///一个基本的conda流程</span><br><span class="line">conda create -n env_name python=3.8</span><br><span class="line"><span class="built_in">source</span> activate env_name</span><br><span class="line">conda install whaterever</span><br><span class="line">///如果conda装不了，那就用pip</span><br><span class="line">pip install whatever</span><br><span class="line"></span><br><span class="line">//conda activate 失败</span><br><span class="line">&gt; conda activate SRT_crawler</span><br><span class="line">CommandNotFoundError: Your shell has not been properly configured to use <span class="string">&#x27;conda activate&#x27;</span>.</span><br><span class="line">&gt; <span class="built_in">source</span> activate</span><br><span class="line">&gt; conda activate SRT_crawler</span><br></pre></td></tr></table></figure>
<h1 id="pip-install遇上timeout"><a href="#pip-install遇上timeout" class="headerlink" title="pip install遇上timeout"></a>pip install遇上timeout</h1><p>在某个具体的conda环境下，使用pip就是安装到这个特定的conda环境</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">///对于单个包的安装，不管换不换国内源，都可能遇上安装超时的问题</span><br><span class="line">pip install python-moudle</span><br><span class="line"><span class="keyword">raise</span> ReadTimeoutError(self._pool, <span class="literal">None</span>, <span class="string">&quot;Read timed out.&quot;</span>)</span><br><span class="line">pip._vendor.urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host=<span class="string">&#x27;files.pythonhosted.org&#x27;</span>, port=<span class="number">443</span>): Read timed out.</span><br><span class="line"></span><br><span class="line">///解决方案</span><br><span class="line">pip --timeout=<span class="number">100</span> install python-moudle</span><br><span class="line"></span><br><span class="line">///如果是依靠某个具体的requirement.txt，则：</span><br><span class="line">pip --default-timeout=<span class="number">100</span> install -r requirements_demo.txt</span><br><span class="line"></span><br><span class="line">///ok，太慢，不如直接换源</span><br><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</span><br><span class="line">conda config --<span class="built_in">set</span> show_channel_urls yes</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/woai8339/article/details/91351707">解决pip.<em>vendor.urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool</em>不负如来不负卿-CSDN博客</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/chaipp0607/article/details/107454666">pip install时timeout设置_zhangxu-CSDN博客_pip timeout</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qingfengxd1/article/details/109334674">pip和conda 换清华源_qingfengxd1的博客-CSDN博客_conda pip 清华源</a></p>
<h1 id="Wget"><a href="#Wget" class="headerlink" title="Wget"></a>Wget</h1><p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Wget">Wget - 维基百科，自由的百科全书</a></p>
<h1 id="最简便的进制转换"><a href="#最简便的进制转换" class="headerlink" title="最简便的进制转换"></a>最简便的进制转换</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">7</span>]: <span class="built_in">bin</span>(<span class="number">239</span>)</span><br><span class="line">Out[<span class="number">7</span>]: <span class="string">&#x27;0b11101111&#x27;</span></span><br></pre></td></tr></table></figure>
<h1 id="Torch"><a href="#Torch" class="headerlink" title="Torch"></a>Torch</h1><h3 id="TORCH-OPTIM"><a href="#TORCH-OPTIM" class="headerlink" title="TORCH.OPTIM"></a>TORCH.OPTIM</h3><p><strong><code>[torch.optim](https://pytorch.org/docs/stable/optim.html#module-torch.optim)</code> is a package implementing various optimization algorithms. Most commonly used methods are already supported, and the interface is general enough, so that more sophisticated ones can be also easily integrated in the future.</strong></p>
<p><a target="_blank" rel="noopener" href="https://pytorch.org/docs/stable/optim.html#module-torch.optim">torch.optim - PyTorch 1.10.1 documentation</a></p>
<h1 id="typing"><a href="#typing" class="headerlink" title="typing"></a>typing</h1><p><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15069487/2581783">typing库：让你的代码阅读者再也不用猜猜猜【附源码】_mb5fe94cdd5807a_51CTO博客</a></p>
<h2 id="基本类型注释"><a href="#基本类型注释" class="headerlink" title="基本类型注释"></a>基本类型注释</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">1</span>]: age: <span class="built_in">int</span> = <span class="number">5</span></span><br><span class="line">In [<span class="number">2</span>]: <span class="built_in">print</span>(age)</span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mystery_combine</span>(<span class="params">a: <span class="built_in">str</span>, b: <span class="built_in">str</span>, times: <span class="built_in">int</span></span>) -&gt; <span class="built_in">str</span>:</span></span><br><span class="line">    <span class="keyword">return</span> (a + b) * times</span><br></pre></td></tr></table></figure>
<p>显示地给出类型虽然不会实质性地影响函数运行(仍然可以传入其他类型，且返回值仍然不必然是个<code>str</code>)但是显著地提高了代码的可读性。</p>
<h2 id="复杂类型注释"><a href="#复杂类型注释" class="headerlink" title="复杂类型注释"></a>复杂类型注释</h2><p><code>Python</code>的<code>typing</code>库。 可以描述任何变量的任何类型（类型注释）。 它预装了多种类型注释，如<code>Dict，Tuple，List，Set</code>等等。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_names</span>(<span class="params">names: <span class="type">List</span>[<span class="built_in">str</span>]</span>) -&gt; <span class="literal">None</span>:</span></span><br><span class="line"><span class="keyword">for</span> student <span class="keyword">in</span> names:</span><br><span class="line"><span class="built_in">print</span>(student)</span><br><span class="line"><span class="comment">#这将告诉代码阅读者names参数应该是字符串列表，返回None。</span></span><br></pre></td></tr></table></figure>
<p>字典也以类似的方式工作。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Dict</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_name_and_grade</span>(<span class="params">grades: <span class="type">Dict</span>[<span class="built_in">str</span>, <span class="built_in">float</span>]</span>) -&gt; <span class="literal">None</span>:</span></span><br><span class="line"><span class="keyword">for</span> student, grade <span class="keyword">in</span> grades.items():</span><br><span class="line"><span class="built_in">print</span>(student, grade)</span><br><span class="line"><span class="comment">#Dict[str，float]类型提示告诉我们，grades参数传入的应该是一个字典，其中键是字符串，值是浮点数</span></span><br></pre></td></tr></table></figure>
<h2 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h2><p>如果要使用自定义类型名称，可以使用类型别名（Type Aliases）。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span>, <span class="type">Tuple</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 声明Point类型，该Point类实际上是[x, y]元组的别名</span></span><br><span class="line">Point = <span class="type">Tuple</span>[<span class="built_in">int</span>, <span class="built_in">int</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># points参数是很多个Point类组成的列表</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_points</span>(<span class="params">points: <span class="type">List</span>[Point]</span>):</span></span><br><span class="line">    <span class="keyword">for</span> point <span class="keyword">in</span> points:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;X:&quot;</span>, point[<span class="number">0</span>], <span class="string">&quot;  Y:&quot;</span>, point[<span class="number">1</span>])</span><br></pre></td></tr></table></figure>
<h2 id="返回多个值"><a href="#返回多个值" class="headerlink" title="返回多个值"></a>返回多个值</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">6</span>]: <span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Tuple</span></span><br><span class="line">   ...: <span class="function"><span class="keyword">def</span> <span class="title">get</span>() -&gt; <span class="type">Tuple</span>[<span class="built_in">int</span>, <span class="built_in">int</span>]:</span></span><br><span class="line">   ...:     a,b = <span class="number">1</span>,<span class="number">2</span></span><br><span class="line">   ...:     <span class="keyword">return</span> a,b</span><br><span class="line">In [<span class="number">7</span>]: <span class="built_in">print</span>(get())</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">In [<span class="number">8</span>]: <span class="built_in">print</span>(get()[<span class="number">0</span>])</span><br><span class="line"><span class="number">1</span></span><br><span class="line">In [<span class="number">9</span>]: <span class="built_in">print</span>(get()[<span class="number">1</span>])</span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>上面的函数<code>get()</code>返回的形式上是两个<code>int</code>，实际上返回了一个<code>tuple</code>。通过使用<code>Tuple [int，int]</code>，我们向开发人员指出这个函数的返回类型。</p>
<h2 id="可选类型"><a href="#可选类型" class="headerlink" title="可选类型"></a>可选类型</h2><p>如果某个函数的参数可以是多种可选类型，则可以使用<code>typing.Optional</code>或<code>typing.Union</code>类型。</p>
<p>如果该参数可以是特定类型 ，也可以是<code>None</code> ，则使用<code>Optional</code>。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Optional</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">try_to_print</span>(<span class="params">some_num: <span class="type">Optional</span>[<span class="built_in">int</span>]</span>):</span></span><br><span class="line">	<span class="keyword">if</span> some_num:</span><br><span class="line">		<span class="built_in">print</span>(some_num)</span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		<span class="built_in">print</span>(<span class="string">&#x27;Value was None!&#x27;</span>)</span><br><span class="line"><span class="comment">#上面的函数try_to_print函数中的some_num参数可以是int也可以是None</span></span><br></pre></td></tr></table></figure>
<p>当参数采用更具体的类型提示时使用<code>Union</code>。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Union</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_grade</span>(<span class="params">grade: <span class="type">Union</span>[<span class="built_in">int</span>, <span class="built_in">str</span>]</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(grade, <span class="built_in">str</span>):</span><br><span class="line">        <span class="built_in">print</span>(grade + <span class="string">&#x27; percent&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">str</span>(grade) + <span class="string">&#x27;%&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h1 id="assert"><a href="#assert" class="headerlink" title="assert"></a>assert</h1><p><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python3-assert.html">Python3 assert（断言）</a></p>
<h1 id="一些爬虫问题"><a href="#一些爬虫问题" class="headerlink" title="一些爬虫问题"></a>一些爬虫问题</h1><ul>
<li>一个合适的开发流程——先测试某个文件，然后再放到整个文件夹上</li>
<li>尽量减少使用硬编码文件地址能显著提升鲁棒性</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">   source_dir = &quot;./RJnews&quot;</span><br><span class="line">   result_dir = &quot;./results_summer_olympic&quot;</span><br><span class="line">   test_file_1 = &quot;./0.txt&quot;</span><br><span class="line">   test_file_2 = &quot;./test.json&quot;</span><br><span class="line">   trans_dir = &quot;./pieces&quot;</span><br><span class="line">   -------------</span><br><span class="line">   def get_list(target):</span><br><span class="line">       dirs = os.listdir(target)</span><br><span class="line">       file_list = []</span><br><span class="line">       for file in dirs:</span><br><span class="line">            file_list.append(f&quot;./&#123;target&#125;/&#123;file&#125;&quot;)</span><br><span class="line">       return file_list</span><br></pre></td></tr></table></figure>
<ul>
<li>利用 sibling 来完整的切割某个标签</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> def html_cut_emain(file_list):</span><br><span class="line">     num = 0</span><br><span class="line">     for file in tqdm(file_list):</span><br><span class="line">         with open(file, &#x27;r&#x27;, encoding = &quot;utf-8&quot;) as f:</span><br><span class="line">             html_content = f.read()</span><br><span class="line">             soup = BeautifulSoup(html_content, &quot;lxml&quot;)</span><br><span class="line">             all_emain = soup.findAll(class_ = &quot;nk-gv-bodytitlemain&quot;)</span><br><span class="line">             for emain in tqdm(all_emain):</span><br><span class="line">                 with open(f&quot;./pieces/&#123;num&#125;.txt&quot;, &#x27;w&#x27;, encoding = &quot;utf-8&quot;) as t:</span><br><span class="line">                     t.write(f&quot;&#123;emain!r&#125;&quot;)</span><br><span class="line">                     for sibling in emain.next_siblings:</span><br><span class="line">                         if sibling in all_emain:</span><br><span class="line">                             break</span><br><span class="line">                         t.write(f&quot;&#123;sibling!r&#125;&quot;)</span><br><span class="line">                 num = num + 1</span><br><span class="line"> # here we have cut all html into pieces by class tag nk-gv-bodytitlemain</span><br><span class="line"> </span><br><span class="line"> def html_cut_scorll(file_list):</span><br><span class="line">     num = 0</span><br><span class="line">     for file in tqdm(file_list):</span><br><span class="line">         with open(file, &#x27;r&#x27;, encoding=&quot;utf-8&quot;) as f:</span><br><span class="line">             html_content = f.read()</span><br><span class="line">             soup = BeautifulSoup(html_content, &quot;lxml&quot;)</span><br><span class="line">             all_scroll = soup.findAll(class_=&quot;nk-gv-bodyscroll-on&quot;)</span><br><span class="line">             for scroll in tqdm(all_scroll):</span><br><span class="line">                 with open(f&quot;./pieces/&#123;num&#125;.txt&quot;, &#x27;a+&#x27;, encoding=&quot;utf-8&quot;) as t:</span><br><span class="line">                     t.write(f&quot;&#123;scroll!r&#125;&quot;)</span><br><span class="line">                     for sibling in scroll.next_siblings:</span><br><span class="line">                         if sibling in all_scroll:</span><br><span class="line">                             break</span><br><span class="line">                         t.write(f&quot;&#123;sibling!r&#125;&quot;)</span><br><span class="line">                 num = num + 1</span><br></pre></td></tr></table></figure>
<ul>
<li>注意上方代码配合读写方式实现了追加写入</li>
<li>通过重复 open 的方法实现了自动去重</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> def soup_each_piece_of_news(file_list):</span><br><span class="line">     for file_name in tqdm(file_list):</span><br><span class="line">         with open(file_name, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:</span><br><span class="line">             try:</span><br><span class="line">                 html_content = f.read()</span><br><span class="line">             except Exception as e:</span><br><span class="line">                 print(e)</span><br><span class="line">                 continue</span><br><span class="line">             soup = BeautifulSoup(html_content, &quot;lxml&quot;)</span><br><span class="line">             try:</span><br><span class="line">                 title = soup.find(class_ = &quot;nk-gv-bodytitle&quot;).get_text().strip()</span><br><span class="line">             except Exception as e:</span><br><span class="line">                 print(e)</span><br><span class="line">                 print(file_name)</span><br><span class="line">                 title = &quot;no title&quot;</span><br><span class="line">             try:</span><br><span class="line">                 info = soup.find(class_ = &quot;nk-gv-attribute&quot;).get_text().strip()</span><br><span class="line">             except Exception as e:</span><br><span class="line">                 print(e)</span><br><span class="line">                 print(file_name)</span><br><span class="line">                 info = &quot;no info&quot;</span><br><span class="line">             try:</span><br><span class="line">                 context_list = soup.findAll(class_ = &quot;nk-gv-bodyscroll-on&quot;)</span><br><span class="line">                 context = &quot;&quot;</span><br><span class="line">                 for sentence in context_list:</span><br><span class="line">                     context = context + sentence.get_text().strip() + &quot;\r&quot;</span><br><span class="line">             except Exception as e:</span><br><span class="line">                 print(e)</span><br><span class="line">                 print(file_name)</span><br><span class="line">                 context = &quot;no context&quot;</span><br><span class="line">             dic = &#123;&#125;</span><br><span class="line">             dic[&quot;title&quot;] = title</span><br><span class="line">             dic[&quot;info&quot;] = info</span><br><span class="line">             dic[&quot;context&quot;] = context</span><br><span class="line">             store_postion = result_dir + f&quot;/&#123;title&#125;.json&quot;</span><br><span class="line">             try:</span><br><span class="line">                 with open(store_postion, &quot;w&quot;, encoding = &quot;utf-8&quot;) as t:</span><br><span class="line">                     json.dump(dic, t, ensure_ascii = False, indent = 2)</span><br><span class="line">             except Exception as e:</span><br><span class="line">                 print(e)</span><br></pre></td></tr></table></figure>
<ul>
<li>注意上方对于异常的处理，实际上将异常输入到运行文件是个更好的选择</li>
<li>无法实现同时读取 json 又向它写入，故而连用两个 with open</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> def deduplicate_and_identify(file_list):</span><br><span class="line">     num = 0</span><br><span class="line">     for file in tqdm(file_list):</span><br><span class="line">         with open(file, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:</span><br><span class="line">             dic = json.load(f)</span><br><span class="line">             dic[&quot;identity&quot;] = num</span><br><span class="line">             num = num + 1</span><br><span class="line">         with open(file, &quot;w&quot;, encoding=&quot;utf-8&quot;) as t:</span><br><span class="line">             json.dump(dic, t, ensure_ascii=False, indent=2)</span><br><span class="line"> # we can not read and rewrite a json file in one &quot;with open&quot; operation</span><br></pre></td></tr></table></figure>
<ul>
<li>主函数的调用非常优雅</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> html_cut_emain(get_list(source_dir))</span><br><span class="line"> html_cut_scorll(get_list(source_dir))</span><br><span class="line"> soup_each_piece_of_news(get_list(trans_dir))</span><br><span class="line"> deduplicate_and_identify(get_list(result_dir))</span><br></pre></td></tr></table></figure>
<ul>
<li>最后输出到执行目录里</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> python3 soup.py &gt; execute.txt</span><br></pre></td></tr></table></figure>
<h1 id="Iterator-生成器"><a href="#Iterator-生成器" class="headerlink" title="Iterator 生成器"></a>Iterator 生成器</h1><p>在 Python 中，使用了 yield 的函数被称为生成器（generator）。</p>
<p>跟普通函数不同的是，生成器是一个返回迭代器的函数，只能用于迭代操作，更简单点理解生成器就是一个迭代器。</p>
<p>在调用生成器运行的过程中，每次遇到 yield 时函数会暂停并保存当前所有的运行信息，返回 yield 的值, 并在下一次执行 next() 方法时从当前位置继续运行。</p>
<p>调用一个生成器函数，返回的是一个迭代器对象。</p>
<p>以下实例使用 yield 实现斐波那契数列：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fibonacci</span>(<span class="params">n</span>):</span> <span class="comment"># 生成器函数 - 斐波那契</span></span><br><span class="line">    a, b, counter = <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">if</span> (counter &gt; n): </span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">yield</span> a</span><br><span class="line">        a, b = b, a + b</span><br><span class="line">        counter += <span class="number">1</span></span><br><span class="line">f = fibonacci(<span class="number">10</span>) <span class="comment"># f 是一个迭代器，由生成器返回生成</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="built_in">print</span> (<span class="built_in">next</span>(f), end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> StopIteration:</span><br><span class="line">        sys.exit()</span><br></pre></td></tr></table></figure>
<h1 id="多级词典"><a href="#多级词典" class="headerlink" title="多级词典"></a>多级词典</h1><p>少用多级词典，否则在按照 key 或者 value 来打印词典的时候会出太多问题</p>
<p>如果确实需要调用多个词典，可以把第一级词典直接割裂出来</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">order = []</span><br><span class="line">volunteer_dic = &#123;&#125;</span><br><span class="line">volunteer_course_dic = &#123;&#125;</span><br><span class="line">volunteer_subject_dic = &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>类似这样子</p>
<h1 id="二级词典-try-的逻辑"><a href="#二级词典-try-的逻辑" class="headerlink" title="二级词典 try 的逻辑"></a>二级词典 try 的逻辑</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    volunteer_dic[volunteer][<span class="string">&quot;each_volunteer_total_order&quot;</span>] += <span class="number">1</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        volunteer_dic[volunteer][<span class="string">&quot;each_volunteer_total_order&quot;</span>] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        volunteer_dic[volunteer] = &#123;&#125;</span><br><span class="line">        volunteer_dic[volunteer][<span class="string">&quot;each_volunteer_total_order&quot;</span>] = <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h1 id="写入-txt"><a href="#写入-txt" class="headerlink" title="写入 txt"></a>写入 txt</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">f&quot;./result_volunteer/total_volunteer.txt&quot;</span>, <span class="string">&quot;a+&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>, errors=<span class="string">&quot;ignore&quot;</span>) <span class="keyword">as</span> t:</span><br><span class="line">    t.write(<span class="string">&quot;亲爱的志愿者：&quot;</span>+<span class="string">f&quot;<span class="subst">&#123;key&#125;</span>\r&quot;</span>)</span><br><span class="line">    each_volunteer_total_order = volunteer_dic[key][<span class="string">&quot;each_volunteer_total_order&quot;</span>]</span><br><span class="line">    t.write(<span class="string">&quot;您目前为止一共答疑过&quot;</span> + <span class="string">f&quot;<span class="subst">&#123;each_volunteer_total_order&#125;</span> 次\r&quot;</span>)</span><br><span class="line">    average_satisfaction = volunteer_dic[key][<span class="string">&quot;satisfication&quot;</span>] / each_volunteer_total_order</span><br><span class="line">    t.write(<span class="string">f&quot;您的平均答疑满意度为 <span class="subst">&#123;average_satisfaction&#125;</span>\r&quot;</span>)</span><br><span class="line">    t.write(<span class="string">f&quot;==================================\r您具体的答疑大类如下：\r&quot;</span>)</span><br><span class="line">    t.write(<span class="built_in">str</span>(volunteer_subject_dic[key]) + <span class="string">&quot;\r&quot;</span>)</span><br><span class="line">    t.write(<span class="string">f&quot;==================================\r您具体的答疑学科如下：\r&quot;</span>)</span><br><span class="line">    t.write(<span class="built_in">str</span>(volunteer_course_dic[key]) + <span class="string">&quot;\r&quot;</span>)</span><br><span class="line">    t.write(<span class="string">&quot;-------------------------------------------------------------------\r&quot;</span>)</span><br></pre></td></tr></table></figure>
<h1 id="读取多行-json"><a href="#读取多行-json" class="headerlink" title="读取多行 json"></a>读取多行 json</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(working_json, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>, errors=<span class="string">&quot;ignore&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    order = []</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f.readlines():</span><br><span class="line">        dic = json.loads(line)</span><br><span class="line">        order.append(dic)</span><br></pre></td></tr></table></figure>
<p>仔细看这串代码，之所以用 readlines，是应为我们处理的 json 文件有多个字典，如下所示</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;_id&quot;</span>:<span class="string">&quot;cd045e75615d678713743c1c54ae0090&quot;</span>,<span class="attr">&quot;abstract&quot;</span>:<span class="string">&quot;关于逻辑表达式的问题&quot;</span>,<span class="attr">&quot;actionRec&quot;</span>:&#123;<span class="attr">&quot;pAuthenData&quot;</span>:&#123;<span class="attr">&quot;authentication&quot;</span>:<span class="literal">true</span>,<span class="attr">&quot;certificateState&quot;</span>:<span class="string">&quot;已认证&quot;</span>,<span class="attr">&quot;department&quot;</span>:<span class="string">&quot;未央书院&quot;</span>,<span class="attr">&quot;realName&quot;</span>:<span class="string">&quot;王振宇&quot;</span>,<span class="attr">&quot;school&quot;</span>:<span class="string">&quot;清华大学&quot;</span>,<span class="attr">&quot;studentID&quot;</span>:<span class="number">2021012269</span>&#125;,<span class="attr">&quot;postTimeStamp&quot;</span>:<span class="string">&quot;10-6 17:08&quot;</span>,<span class="attr">&quot;ptime&quot;</span>:<span class="string">&quot;2021-10-06T09:08:23.089Z&quot;</span>,<span class="attr">&quot;puid&quot;</span>:<span class="string">&quot;cd045e75615d669b13741f9574125872&quot;</span>,<span class="attr">&quot;aAuthenData&quot;</span>:&#123;<span class="attr">&quot;authentication&quot;</span>:<span class="literal">true</span>,<span class="attr">&quot;avatarUrl&quot;</span>:<span class="string">&quot;https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKIwgibwfibAMsjgkG83Va8egVgsyUL2gsKbgxU4cPoKUP5C8BMZKDhSVukSvI5QjJo1VibQtRtN0n1g/132&quot;</span>,<span class="attr">&quot;certificateState&quot;</span>:<span class="string">&quot;已认证&quot;</span>,<span class="attr">&quot;department&quot;</span>:<span class="string">&quot;计算机系&quot;</span>,<span class="attr">&quot;realName&quot;</span>:<span class="string">&quot;王哲凡&quot;</span>,<span class="attr">&quot;school&quot;</span>:<span class="string">&quot;清华大学&quot;</span>,<span class="attr">&quot;studentID&quot;</span>:<span class="number">2019011200</span>,<span class="attr">&quot;volunteerLevel&quot;</span>:<span class="string">&quot;特级&quot;</span>&#125;,<span class="attr">&quot;atime&quot;</span>:<span class="string">&quot;2021-10-06T09:30:20.558Z&quot;</span>,<span class="attr">&quot;auid&quot;</span>:<span class="string">&quot;2d44d6c2613fe90d0c1a64441037789c&quot;</span>,<span class="attr">&quot;polishCount&quot;</span>:<span class="number">0</span>,<span class="attr">&quot;hasPush&quot;</span>:<span class="literal">false</span>,<span class="attr">&quot;ftime&quot;</span>:<span class="string">&quot;2021-10-24T16:53:37.171Z&quot;</span>&#125;,<span class="attr">&quot;courseID&quot;</span>:<span class="string">&quot;C/C++程序设计&quot;</span>,<span class="attr">&quot;online&quot;</span>:<span class="literal">true</span>,<span class="attr">&quot;state&quot;</span>:<span class="string">&quot;已反馈&quot;</span>,<span class="attr">&quot;subjectID&quot;</span>:<span class="string">&quot;计算机&quot;</span>,<span class="attr">&quot;ordercnt&quot;</span>:<span class="number">100036</span>,<span class="attr">&quot;feedback&quot;</span>:&#123;<span class="attr">&quot;ability&quot;</span>:<span class="number">5</span>,<span class="attr">&quot;attitude&quot;</span>:<span class="number">5</span>,<span class="attr">&quot;inspiration&quot;</span>:<span class="number">5</span>,<span class="attr">&quot;period&quot;</span>:<span class="number">45</span>,<span class="attr">&quot;satisfication&quot;</span>:<span class="number">5</span>,<span class="attr">&quot;suggestion&quot;</span>:<span class="string">&quot;🤖：嘀嘀嘀！这是自动超时反馈哦！&quot;</span>&#125;&#125;</span><br><span class="line">&#123;<span class="attr">&quot;_id&quot;</span>:<span class="string">&quot;14139e12615d6828115c6617590e7ba9&quot;</span>,<span class="attr">&quot;abstract&quot;</span>:<span class="string">&quot;证明题&quot;</span>,<span class="attr">&quot;actionRec&quot;</span>:&#123;<span class="attr">&quot;pAuthenData&quot;</span>:&#123;<span class="attr">&quot;authentication&quot;</span>:<span class="literal">true</span>,<span class="attr">&quot;certificateState&quot;</span>:<span class="string">&quot;已认证&quot;</span>,<span class="attr">&quot;department&quot;</span>:<span class="string">&quot;药学院&quot;</span>,<span class="attr">&quot;realName&quot;</span>:<span class="string">&quot;练峼恩&quot;</span>,<span class="attr">&quot;school&quot;</span>:<span class="string">&quot;清华大学&quot;</span>,<span class="attr">&quot;studentID&quot;</span>:<span class="number">2020080041</span>&#125;,<span class="attr">&quot;postTimeStamp&quot;</span>:<span class="string">&quot;10-6 17:11&quot;</span>,<span class="attr">&quot;ptime&quot;</span>:<span class="string">&quot;2021-10-06T09:11:04.745Z&quot;</span>,<span class="attr">&quot;puid&quot;</span>:<span class="string">&quot;8937eaa9615d67ed0fcbf2ab20afa832&quot;</span>,<span class="attr">&quot;aAuthenData&quot;</span>:&#123;<span class="attr">&quot;authentication&quot;</span>:<span class="literal">true</span>,<span class="attr">&quot;certificateState&quot;</span>:<span class="string">&quot;已认证&quot;</span>,<span class="attr">&quot;department&quot;</span>:<span class="string">&quot;电子系&quot;</span>,<span class="attr">&quot;realName&quot;</span>:<span class="string">&quot;卓寅潇&quot;</span>,<span class="attr">&quot;school&quot;</span>:<span class="string">&quot;清华大学&quot;</span>,<span class="attr">&quot;studentID&quot;</span>:<span class="number">2020310727</span>,<span class="attr">&quot;volunteerLevel&quot;</span>:<span class="string">&quot;特级&quot;</span>&#125;,<span class="attr">&quot;atime&quot;</span>:<span class="string">&quot;2021-10-06T09:54:38.959Z&quot;</span>,<span class="attr">&quot;auid&quot;</span>:<span class="string">&quot;8937eaa9615d6faf0fccaf9e1a8823db&quot;</span>,<span class="attr">&quot;ftime&quot;</span>:<span class="string">&quot;2021-10-06T11:15:14.130Z&quot;</span>,<span class="attr">&quot;polishCount&quot;</span>:<span class="number">0.0</span>,<span class="attr">&quot;hasPush&quot;</span>:<span class="literal">false</span>&#125;,<span class="attr">&quot;courseID&quot;</span>:<span class="string">&quot;离散数学&quot;</span>,<span class="attr">&quot;online&quot;</span>:<span class="literal">true</span>,<span class="attr">&quot;state&quot;</span>:<span class="string">&quot;已反馈&quot;</span>,<span class="attr">&quot;subjectID&quot;</span>:<span class="string">&quot;数学&quot;</span>,<span class="attr">&quot;ordercnt&quot;</span>:<span class="number">100043</span>,<span class="attr">&quot;feedback&quot;</span>:&#123;<span class="attr">&quot;ability&quot;</span>:<span class="number">5</span>,<span class="attr">&quot;attitude&quot;</span>:<span class="number">5</span>,<span class="attr">&quot;inspiration&quot;</span>:<span class="number">5</span>,<span class="attr">&quot;period&quot;</span>:<span class="number">45</span>,<span class="attr">&quot;satisfication&quot;</span>:<span class="number">5</span>,<span class="attr">&quot;suggestion&quot;</span>:<span class="string">&quot;谢谢你耐心解答，并努力让我明白! 辛苦了!&quot;</span>&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>后续，我又遇到了一次 json 错误，搞不懂原理，不过解决方式如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> j:</span><br><span class="line">     contents = json.loads(j.read())</span><br><span class="line"><span class="comment"># contents 即是你渴望的那个 list of dict</span></span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://itsmycode.com/jsondecodeerror-expecting-value-line-1-column-1-char-0/">JSONDecodeError: Expecting value: line 1 column 1 (char 0) - ItsMyCode</a></p>
<h1 id="推导"><a href="#推导" class="headerlink" title="推导"></a>推导</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; some_list = [1, 2, 3, 4, 5]</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; another_list = [ x + 1 <span class="keyword">for</span> x <span class="keyword">in</span> some_list ]</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; another_list</span><br><span class="line">[2, 3, 4, 5, 6]</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; <span class="comment"># Set Comprehensions</span></span><br><span class="line">&gt;&gt;&gt; some_list = [1, 2, 3, 4, 5, 2, 5, 1, 4, 8]</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; even_set = &#123; x <span class="keyword">for</span> x <span class="keyword">in</span> some_list <span class="keyword">if</span> x % 2 == 0 &#125;</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; even_set</span><br><span class="line"><span class="built_in">set</span>([8, 2, 4])</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; <span class="comment"># Dict Comprehensions</span></span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; d = &#123; x: x % 2 == 0 <span class="keyword">for</span> x <span class="keyword">in</span> range(1, 11) &#125;</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; d</span><br><span class="line">&#123;1: False, 2: True, 3: False, 4: True, 5: False, 6: True, 7: False, 8: True, 9: False, 10: True&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Python-解包"><a href="#Python-解包" class="headerlink" title="Python 解包"></a>Python 解包</h1><p><strong>最浅显的解包方式</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>name, age, date= [<span class="string">&#x27;Bob&#x27;</span>, <span class="number">20</span>, <span class="string">&#x27;2018-1-1&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name</span><br><span class="line"><span class="string">&#x27;Bob&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>age</span><br><span class="line"><span class="number">20</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>date</span><br><span class="line"><span class="string">&#x27;2018-1-1&#x27;</span></span><br></pre></td></tr></table></figure>
<p><strong>可迭代对象解包</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 列表</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b,c= [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="string">&#x27;a&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b,c= <span class="built_in">enumerate</span>([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">(<span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 元组</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b,c= (<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="string">&#x27;a&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字典</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b,c= &#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>:<span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="string">&#x27;a&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b,c= &#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>:<span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>:<span class="number">3</span>&#125;.items()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">(<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b,c= <span class="string">&#x27;abc&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="string">&#x27;a&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成器</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b,c= (x+ <span class="number">1</span> <span class="keyword">for</span> xin <span class="built_in">range</span>(<span class="number">3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<p><strong>星号的使用</strong></p>
<p>比如我们要计算平均分，去除最高分和最低分，除了用切片，还可以用解包的方式获得中间的数值，用 <code>*</code> 来表示多个数值</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>first, *new, last= [<span class="number">94</span>, <span class="number">85</span>, <span class="number">73</span>, <span class="number">46</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>new</span><br><span class="line">[<span class="number">85</span>, <span class="number">73</span>]</span><br></pre></td></tr></table></figure>
<p><strong>压包</strong></p>
<p>注意，压包压出来的是个列表</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a= [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b= [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&gt;&gt;&gt;<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">zip</span>(a, b):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(i)</span><br><span class="line">...</span><br><span class="line">(<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">(<span class="string">&#x27;b&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">(<span class="string">&#x27;c&#x27;</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p><strong>压包和混合解包</strong></p>
<p>实现两个列表对应数值相加</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a= [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b= [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i, j <span class="keyword">in</span> <span class="built_in">zip</span>(a, b):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(i+j)</span><br><span class="line">...</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">nfc = [<span class="string">&quot;Packers&quot;</span>, <span class="string">&quot;49ers&quot;</span>]</span><br><span class="line">afc = [<span class="string">&quot;Ravens&quot;</span>, <span class="string">&quot;Patriots&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> teama, teamb <span class="keyword">in</span> <span class="built_in">zip</span>(nfc, afc):</span><br><span class="line">     <span class="built_in">print</span> teama + <span class="string">&quot; vs. &quot;</span> + teamb</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Packers vs. Ravens</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>49ers vs. Patriots</span><br></pre></td></tr></table></figure>
<p><strong>*的使用</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">1</span>]: l = [(<span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;1990-1-1&#x27;</span>, <span class="number">60</span>),(<span class="string">&#x27;Mary&#x27;</span>, <span class="string">&#x27;1996-1-4&#x27;</span>, <span class="number">50</span>),(<span class="string">&#x27;Nancy&#x27;</span>, <span class="string">&#x27;1993-3-</span></span><br><span class="line"><span class="string">   ...: 1&#x27;</span>, <span class="number">55</span>),]</span><br><span class="line"></span><br><span class="line">In [<span class="number">2</span>]: <span class="keyword">for</span> name, *arges <span class="keyword">in</span> l:</span><br><span class="line">   ...:     <span class="built_in">print</span>(name)</span><br><span class="line">   ...:</span><br><span class="line">Bob</span><br><span class="line">Mary</span><br><span class="line">Nancy</span><br><span class="line"></span><br><span class="line">In [<span class="number">3</span>]: <span class="keyword">for</span> name, *args <span class="keyword">in</span> l:</span><br><span class="line">   ...:     <span class="built_in">print</span>(args)</span><br><span class="line">   ...:</span><br><span class="line">[<span class="string">&#x27;1990-1-1&#x27;</span>, <span class="number">60</span>]</span><br><span class="line">[<span class="string">&#x27;1996-1-4&#x27;</span>, <span class="number">50</span>]</span><br><span class="line">[<span class="string">&#x27;1993-3-1&#x27;</span>, <span class="number">55</span>]</span><br></pre></td></tr></table></figure>
<p><strong>_的使用</strong></p>
<p>当一些元素不用时，用 <code>_</code> 表示是更好的写法，可以让读代码的人知道这个元素是不要的</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>person= (<span class="string">&#x27;Bob&#x27;</span>, <span class="number">20</span>, <span class="number">50</span>, (<span class="number">11</span>, <span class="number">20</span>, <span class="number">2000</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name,*_, (*_, year)= person</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name</span><br><span class="line"><span class="string">&#x27;Bob&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>year</span><br><span class="line"><span class="number">2000</span></span><br></pre></td></tr></table></figure>
<p><strong>直观的压包</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">*a = <span class="number">1</span>, <span class="number">2</span></span><br><span class="line"><span class="comment"># 上方会报错</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">4</span>]: *a, _ = <span class="number">1</span>, <span class="number">2</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">5</span>]: a</span><br><span class="line">Out[<span class="number">5</span>]: [<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">6</span>]: *a, = <span class="number">1</span>, <span class="number">2</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">7</span>]: a</span><br><span class="line">Out[<span class="number">7</span>]: [<span class="number">1</span>, <span class="number">2</span>]</span><br></pre></td></tr></table></figure>
<p><strong>传参——元组（可变参数）</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">11</span>]: <span class="function"><span class="keyword">def</span> <span class="title">myfun</span>(<span class="params">*num</span>):</span></span><br><span class="line">    ...:      <span class="built_in">print</span>(num)</span><br><span class="line">    ...:</span><br><span class="line"></span><br><span class="line">In [<span class="number">12</span>]: myfun(<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">6</span>)</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br></pre></td></tr></table></figure>
<p>参数用<code>*num</code>表示，<code>num</code>变量就可以当成元组调用了。</p>
<p>其实这个过程相当于<code>*num, = 1,2,5,6</code></p>
<p><strong>传参——词典（关键字参数）</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;defmyfun(**kw):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(kw)</span><br><span class="line">...&gt;&gt;&gt; myfun(name= <span class="string">&quot;Bob&quot;</span>, age= <span class="number">20</span>, weight= <span class="number">50</span>)</span><br><span class="line">&#123;<span class="string">&#x27;weight&#x27;</span>: <span class="number">50</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">20</span>&#125;</span><br></pre></td></tr></table></figure>
<p>键值对传入<code>**kw</code>，<code>kw</code>就可以表示相应字典。</p>
<ul>
<li><code>*</code>的用法只在函数定义中使用，不能这样使用</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a, ******b **=** &#123;<span class="string">&#x27;weight&#x27;</span>: <span class="number">50</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">20</span>&#125;</span><br></pre></td></tr></table></figure>
<p><strong>可变参数与关键字参数的细节</strong></p>
<ol>
<li>函数传入实参时，可变参数(<code>*</code>)之前的参数不能指定参数名</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;defmyfun(a,*b):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(a)</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(b)</span><br><span class="line">...&gt;&gt;&gt; myfun(a=<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span></span><br><span class="line">SyntaxError: positional argument follows keyword argument</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myfun(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure>
<ol>
<li>函数传入实参时，可变参数(<code>*</code>)之后的参数必须指定参数名，否则就会被归到可变参数之中</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;defmyfun(a,*b, c=<span class="literal">None</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(a)</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(b)</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(c)</span><br><span class="line">...&gt;&gt;&gt; myfun(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="literal">None</span>&gt;&gt;&gt; myfun(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,c=<span class="number">4</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure>
<ol>
<li>编写函数时，指定参数名是个好习惯，因此推荐使用如下的传参形式：</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;defmyfun(*, a, b):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(a)</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(b)</span><br><span class="line">...&gt;&gt;&gt; myfun(a= <span class="number">1</span>,b= <span class="number">2</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>将所有参数都放在可变参数之后，而可变参数不用管它就可以，也不用命名</p>
<ol>
<li>关键字参数都只能作为最后一个参数，前面的参数按照位置赋值还是名称赋值都可以</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;defmyfun(a,*b, c,**d):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(a)</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(b)</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(c)</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(d)</span><br><span class="line">...&gt;&gt;&gt; myfun(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, c= <span class="number">4</span>, m= <span class="number">5</span>, n= <span class="number">6</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="number">4</span></span><br><span class="line">&#123;<span class="string">&#x27;n&#x27;</span>: <span class="number">6</span>, <span class="string">&#x27;m&#x27;</span>: <span class="number">5</span>&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>可变参数与关键词参数共同使用以表示任意参数</li>
</ol>
<p>在修饰器里的使用：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">mydecorator</span>(<span class="params">func</span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args, **kw</span>):</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;I am using a decorator.&#x27;</span>)</span><br><span class="line"><span class="meta">... </span>        <span class="keyword">return</span> func(*args, **kw)</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> wrapper</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>@mydecorator</span><br><span class="line"><span class="meta">... </span><span class="function"><span class="keyword">def</span> <span class="title">myfun</span>(<span class="params">a, b</span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(a)</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(b)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myfun(<span class="number">1</span>, b = <span class="number">2</span>)</span><br><span class="line">I am using a decorator.</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>(如果有的读者不熟悉装饰器，只需要知道，使用<code>@</code>定义<code>myfun</code>相当于<code>myfun = mydecorator(myfun)</code>，定义出来的<code>myfun</code>其实是返回结果<code>wrapper</code>函数)</p>
<p><code>wrapper</code>函数使用<code>*args, **kw</code>作为参数，则被修饰的<code>myfun</code>函数需要的参数无论是什么样的，传入<code>wrapper</code>都不会报错，这保证了装饰器可以修饰各种各样函数的灵活性。毕竟我们一般在函数中传入参数时，要么所有参数名都写，要么前面几个不写，后面的会写，这样使用<code>*args, **kw</code>完全没有问题。</p>
<p><strong><strong>解包作为参数传入函数中</strong></strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">myfun</span>(<span class="params">a, b</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(a + b)</span><br><span class="line">----------------------</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>n = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myfun(*n)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = (<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myfun(*m)</span><br><span class="line"><span class="number">3</span></span><br><span class="line">----------------------</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mydict = &#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myfun(**mydict)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myfun(*mydict)</span><br><span class="line">ba</span><br><span class="line"><span class="comment"># 注意这里，是应用了 a 和 b 作为参数的结果</span></span><br><span class="line"><span class="comment"># 第二行为什么是 ba 因为字典里的键不是按照输入的顺序存储的，输出来也不是按照我们代码写的顺序，不过它也不是随机的，因为你会发现每次输出都会是ba，这个顺序和python的实现有关</span></span><br><span class="line">----------------------</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bob = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">30</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;&#123;name&#125;&#x27;s age is &#123;age&#125;&quot;</span>.<span class="built_in">format</span>(**bob)</span><br><span class="line"><span class="string">&quot;Bob&#x27;s age is 30&quot;</span></span><br></pre></td></tr></table></figure>
<p><strong><strong>多返回值函数</strong></strong></p>
<p>下面过程也涉及到了解包</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">myfun</span>(<span class="params">a, b</span>):</span></span><br><span class="line">    <span class="keyword">return</span> a + <span class="number">1</span>, b + <span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m, n = myfun(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>n</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="comment"># 本质上是元祖解包</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = myfun(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p</span><br><span class="line">(<span class="number">2</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure>
<h1 id="Counter-计数器"><a href="#Counter-计数器" class="headerlink" title="Counter 计数器"></a>Counter 计数器</h1><p>Python 的 collections 类库里有个内置的 dict 类的子类 Counter，用于统计字典：</p>
<p>Counter 是 dict 字典的子类，Counter 拥有类似字典的 key 键和 value 值，只不过 Counter 中的键为待计数的元素，而 value 值为对应元素出现的次数 count，为了方便介绍统一使用元素和 count 计数来表示。<strong>虽然 Counter 中的 count 表示的是计数，但是 Counter 允许 count 的值为 0 或者负值。</strong></p>
<h2 id="实例化-Counter-类"><a href="#实例化-Counter-类" class="headerlink" title="实例化 Counter 类"></a><strong><strong>实例化 Counter 类</strong></strong></h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line"><span class="comment"># 实例化元素为空的 Counter 对象</span></span><br><span class="line">a = Counter()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从可迭代对象中实例化 Counter 对象</span></span><br><span class="line">b = Counter(<span class="string">&#x27;chenkc&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从 mapping 中实例化 Counter 对象</span></span><br><span class="line">c = Counter(&#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>:<span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>:<span class="number">3</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从关键词参数中实例化 Counter 对象</span></span><br><span class="line">d = Counter(a = <span class="number">1</span>, b = <span class="number">2</span>, c = <span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p><strong>实例化元素为空的 Counter 对象，之后可以通过为字典添加元素的方式为 Counter 对象添加元素</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line"><span class="comment"># 实例化元素为空的 Counter</span></span><br><span class="line">a = Counter()</span><br><span class="line"><span class="comment"># 为 Counter 添加元素以及对应的 count 计数</span></span><br><span class="line">a[<span class="string">&#x27;a&#x27;</span>] = <span class="number">1</span></span><br><span class="line">a[<span class="string">&#x27;b&#x27;</span>] = <span class="number">2</span></span><br><span class="line">a[<span class="string">&#x27;c&#x27;</span>] = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(a)</span><br><span class="line">Counter(&#123;<span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>从 string（字符为list列表的元素）、list 和 tuple 这些可迭代对象中获取元素</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从可迭代对象中实例化 Counter</span></span><br><span class="line">b = Counter(<span class="string">&quot;chenkc&quot;</span>) <span class="comment"># string</span></span><br><span class="line">b2 = Counter([<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;n&#x27;</span>, <span class="string">&#x27;k&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]) <span class="comment"># list</span></span><br><span class="line">b3 = Counter((<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;n&#x27;</span>, <span class="string">&#x27;k&#x27;</span>, <span class="string">&#x27;c&#x27;</span>)) <span class="comment"># tuple</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(b)</span><br><span class="line">Counter(&#123;<span class="string">&#x27;c&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;h&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;e&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;n&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;k&#x27;</span>: <span class="number">1</span>&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(b2)</span><br><span class="line">Counter(&#123;<span class="string">&#x27;c&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;h&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;e&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;n&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;k&#x27;</span>: <span class="number">1</span>&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(b3)</span><br><span class="line">Counter(&#123;<span class="string">&#x27;c&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;h&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;e&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;n&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;k&#x27;</span>: <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>从 mapping 中实例化 Counter 对象，mapping 类型的数据就是元素为<code>(x, y)</code>的列表，字典也属于 mapping 类型的数据</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从 mapping 中实例化 Counter 对象</span></span><br><span class="line">c = Counter([(<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>), (<span class="string">&#x27;b&#x27;</span>, <span class="number">2</span>), (<span class="string">&#x27;a&#x27;</span>, <span class="number">3</span>), (<span class="string">&#x27;c&#x27;</span>, <span class="number">3</span>)])</span><br><span class="line">c2 = Counter(&#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>:<span class="number">2</span>, <span class="string">&#x27;a&#x27;</span>:<span class="number">3</span>, <span class="string">&#x27;c&#x27;</span>:<span class="number">3</span>&#125;) <span class="comment"># 字典</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(c)</span><br><span class="line">Counter(&#123;(<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>): <span class="number">1</span>, (<span class="string">&#x27;b&#x27;</span>, <span class="number">2</span>): <span class="number">1</span>, (<span class="string">&#x27;a&#x27;</span>, <span class="number">3</span>): <span class="number">1</span>, (<span class="string">&#x27;c&#x27;</span>, <span class="number">3</span>): <span class="number">1</span>&#125;) </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(c2)</span><br><span class="line">Counter(&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>虽然传入的 mapping 类型的数据是一样的，<strong>但是由于字典中的键是唯一的，因此如果字典中的键重复会保留最后一个</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dic = &#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>:<span class="number">2</span>, <span class="string">&#x27;a&#x27;</span>:<span class="number">3</span>, <span class="string">&#x27;c&#x27;</span>:<span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(dic)</span><br><span class="line">&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure>
<p>从关键词参数中实例化 Counter 对象，<strong>关键词参数中指定的关键词必须是唯一的，但是不同于字典，如果指定的关键词重复，程序会抛出SyntaxError异常</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从关键词参数中实例化 Counter 对象</span></span><br><span class="line">d = Counter(a = <span class="number">1</span>, b = <span class="number">2</span>, c = <span class="number">3</span>)</span><br><span class="line"><span class="comment"># d2 = Counter(a = 1, b = 2, a = 3, c = 3) # SyntaxError</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(d)</span><br><span class="line">Counter(&#123;<span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>我们都知道在字典中查找不存在的键，程序会抛出 KyeError的异常，但是由于 Counter 用于统计计数，因此 Counter 不同于字典，**如果在 Counter 中查找一个不存在的元素，不会产生异常，而是会返回 0，这其实很好理解，Counter 计数将不存在元素的 count 值设置为 0 </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line">c = Counter(&#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>:<span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>:<span class="number">3</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(c[<span class="string">&#x27;d&#x27;</span>]) <span class="comment"># 查找键值为&#x27;d&#x27;对应的计数</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(c)</span><br><span class="line">Counter(&#123;<span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure>
<p><code>c[&#39;d&#39;]</code> 和在字典中查找元素没有区别，而如果使用<code>c[&#39;d&#39;] = 0</code>则表示的是为 Counter 添加元素。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">14</span>]: c = Counter(&#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>:<span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>:<span class="number">3</span>, <span class="string">&quot;d&quot;</span>:<span class="number">1</span>, <span class="string">&quot;f&quot;</span>:<span class="number">1</span>&#125;)</span><br><span class="line"></span><br><span class="line">In [<span class="number">15</span>]: c[<span class="number">1</span>]</span><br><span class="line">Out[<span class="number">15</span>]: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">16</span>]: c[a]</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">TypeError                                 Traceback (most recent call last)</span><br><span class="line">&lt;ipython-<span class="built_in">input</span>-<span class="number">16</span>-25ddc78a0b0f&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">----&gt; <span class="number">1</span> c[a]</span><br><span class="line"></span><br><span class="line">TypeError: unhashable <span class="built_in">type</span>: <span class="string">&#x27;list&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">17</span>]: c[<span class="string">&quot;a&quot;</span>]</span><br><span class="line">Out[<span class="number">17</span>]: <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h2 id="类方法"><a href="#类方法" class="headerlink" title="类方法"></a>类方法</h2><p>Counter 额外支持字典中没有的三个方法：<code>elements()</code>、<code>most_common([m])</code>以及<code>subtract([iterable-or-mapping])</code></p>
<p><strong>elements 方法</strong></p>
<p><code>elements()</code>方法返回一个迭代器，可以通过 list 或者其它方法将迭代器中的元素输出，输出的结果为对应出现次数的元素</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line">c = Counter(&#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>:<span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>:<span class="number">3</span>&#125;)</span><br><span class="line">c2 = Counter(&#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">0</span>, <span class="string">&#x27;b&#x27;</span>:-<span class="number">1</span>, <span class="string">&#x27;c&#x27;</span>:<span class="number">3</span>&#125;) <span class="comment"># 将出现次数设置为 0 和负值</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(c.elements())</span><br><span class="line">&lt;itertools.chain <span class="built_in">object</span> at <span class="number">0x0000022A57509B70</span>&gt; </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="built_in">list</span>(c.elements()))</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;c&#x27;</span>] </span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(c2.elements())</span><br><span class="line">&lt;itertools.chain <span class="built_in">object</span> at <span class="number">0x0000022A57509B70</span>&gt; </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="built_in">list</span>(c2.elements()))</span><br><span class="line">[<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br></pre></td></tr></table></figure>
<p>在 Counter 中是允许计数为 0 或者负值的，<strong>不过通过上面代码可以看出 elements 函数没有将 0 和负值对应的元素值打印出来</strong></p>
<p><strong>most_common 方法</strong></p>
<p><code>most_common([n])</code> 是 Counter 最常用的方法，返回一个出现次数从大到小的前 n 个元素的列表</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line">c = Counter(&#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>:<span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>:<span class="number">3</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(c.most_common()) <span class="comment"># 默认参数</span></span><br><span class="line">[(<span class="string">&#x27;c&#x27;</span>, <span class="number">3</span>), (<span class="string">&#x27;b&#x27;</span>, <span class="number">2</span>), (<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(c.most_common(<span class="number">2</span>)) <span class="comment"># n = 2</span></span><br><span class="line"> [(<span class="string">&#x27;c&#x27;</span>, <span class="number">3</span>), (<span class="string">&#x27;b&#x27;</span>, <span class="number">2</span>)] </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(c.most_common(<span class="number">3</span>)) <span class="comment"># n = 3</span></span><br><span class="line">[(<span class="string">&#x27;c&#x27;</span>, <span class="number">3</span>), (<span class="string">&#x27;b&#x27;</span>, <span class="number">2</span>), (<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>)] </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(c.most_common(-<span class="number">1</span>)) <span class="comment"># n = -1</span></span><br><span class="line">[]</span><br></pre></td></tr></table></figure>
<p><strong>subtract 方法</strong></p>
<p><code>subtract([iterable_or_mapping])</code>方法其实就是将两个 Counter 对象中的元素对应的计数相减</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line">c = Counter(&#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>:<span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>:<span class="number">3</span>&#125;)</span><br><span class="line">d = Counter(&#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>:<span class="number">3</span>, <span class="string">&#x27;c&#x27;</span>:<span class="number">2</span>, <span class="string">&#x27;d&#x27;</span>:<span class="number">2</span>&#125;)</span><br><span class="line">c.subtract(d)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(c)</span><br><span class="line">Counter(&#123;<span class="string">&#x27;c&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;a&#x27;</span>: <span class="number">0</span>, <span class="string">&#x27;b&#x27;</span>: -<span class="number">1</span>, <span class="string">&#x27;d&#x27;</span>: -<span class="number">2</span>&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="https://pic3.zhimg.com/80/v2-2f8fc96149c2e900147b1ac3e4e789b2_1440w.jpg" alt="https://pic3.zhimg.com/80/v2-2f8fc96149c2e900147b1ac3e4e789b2_1440w.jpg"></p>
<p><img src="https://pic1.zhimg.com/v2-8718e143bcd4df871f609d7ed4dc8cd4_r.jpg" alt="https://pic1.zhimg.com/v2-8718e143bcd4df871f609d7ed4dc8cd4_r.jpg"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line">c = Counter(&#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>:<span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>:<span class="number">3</span>, <span class="string">&#x27;d&#x27;</span>:<span class="number">0</span>, <span class="string">&#x27;e&#x27;</span>:-<span class="number">1</span>&#125;)</span><br><span class="line"></span><br><span class="line">c.update(&#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">2</span>, <span class="string">&#x27;d&#x27;</span>:<span class="number">2</span>, <span class="string">&#x27;e&#x27;</span>:<span class="number">1</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(c)</span><br><span class="line">Counter(&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;d&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;e&#x27;</span>: <span class="number">0</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>对于 Counter 中的<code>update</code> 函数简单来说，就是增加对应元素的计数</p>
<p><strong><strong>集合运算符</strong></strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = Counter(a=<span class="number">3</span>, b=<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = Counter(a=<span class="number">1</span>, b=<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c + d                           <span class="comment"># add two counters together:  c[x] + d[x]</span></span><br><span class="line">Counter(&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">4</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">3</span>&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c - d                           <span class="comment"># subtract (keeping only positive counts)</span></span><br><span class="line">Counter(&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">2</span>&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c &amp; d                           <span class="comment"># intersection:  min(c[x], d[x])</span></span><br><span class="line">Counter(&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">1</span>&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c | d                           <span class="comment"># union:  max(c[x], d[x])</span></span><br><span class="line">Counter(&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>对我而言，用了 Counter 类可以大量节省这个语句：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">   course_total_order[course] += <span class="number">1</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">   course_total_order[course] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 用 Counter 类之后，只用写</span></span><br><span class="line">course_total_order[course] += <span class="number">1</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">26</span>]: dic = Counter()</span><br><span class="line"></span><br><span class="line">In [<span class="number">27</span>]: dic</span><br><span class="line">Out[<span class="number">27</span>]: Counter()</span><br><span class="line"></span><br><span class="line">In [<span class="number">28</span>]: dic[<span class="number">0</span>] += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">29</span>]: dic</span><br><span class="line">Out[<span class="number">29</span>]: Counter(&#123;<span class="number">0</span>: <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>这对二级词典却没用</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">35</span>]: dic[<span class="string">&quot;a&quot;</span>][<span class="string">&quot;b&quot;</span>] += <span class="number">1</span></span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">TypeError                                 Traceback (most recent call last)</span><br><span class="line">&lt;ipython-<span class="built_in">input</span>-<span class="number">35</span>-5f1b75ba9f2b&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">----&gt; <span class="number">1</span> dic[<span class="string">&quot;a&quot;</span>][<span class="string">&quot;b&quot;</span>] += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">TypeError: <span class="string">&#x27;int&#x27;</span> <span class="built_in">object</span> <span class="keyword">is</span> <span class="keyword">not</span> subscriptable</span><br></pre></td></tr></table></figure>
<h2 id="除了字典之外的-Counter"><a href="#除了字典之外的-Counter" class="headerlink" title="除了字典之外的 Counter"></a>除了字典之外的 Counter</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="built_in">print</span> Counter(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Counter(&#123;<span class="string">&#x27;l&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;h&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;e&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;o&#x27;</span>: <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure>
<h1 id="漂亮的打印-JSON"><a href="#漂亮的打印-JSON" class="headerlink" title="漂亮的打印 JSON"></a><strong><strong>漂亮的打印 JSON</strong></strong></h1><p>JSON是一种非常好的数据序列化的形式，被如今的各种API和web service大量的使用。使用python内置的json处理，可以使JSON串具有一定的可读性，但当遇到大型数据时，它表现成一个很长的、连续的一行时，人的肉眼就很难观看了。</p>
<p>为了能让JSON数据表现的更友好，我们可以使用indent参数来输出漂亮的JSON。当在控制台交互式编程或做日志时，这尤其有用：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(json.dumps(data))  <span class="comment"># No indention</span></span><br><span class="line">&#123;<span class="string">&quot;status&quot;</span>: <span class="string">&quot;OK&quot;</span>, <span class="string">&quot;count&quot;</span>: <span class="number">2</span>, <span class="string">&quot;results&quot;</span>: [&#123;<span class="string">&quot;age&quot;</span>: <span class="number">27</span>, <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Oz&quot;</span>, <span class="string">&quot;lactose_intolerant&quot;</span>: true&#125;, &#123;<span class="string">&quot;age&quot;</span>: <span class="number">29</span>, <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Joe&quot;</span>, <span class="string">&quot;lactose_intolerant&quot;</span>: false&#125;]&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(json.dumps(data, indent=<span class="number">2</span>))  <span class="comment"># With indention</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;status&quot;</span>: <span class="string">&quot;OK&quot;</span>,</span><br><span class="line">  <span class="string">&quot;count&quot;</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="string">&quot;results&quot;</span>: [</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;age&quot;</span>: <span class="number">27</span>,</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Oz&quot;</span>,</span><br><span class="line"></span><br><span class="line">      <span class="string">&quot;lactose_intolerant&quot;</span>: true</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;age&quot;</span>: <span class="number">29</span>,</span><br><span class="line"></span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Joe&quot;</span>,</span><br><span class="line">      <span class="string">&quot;lactose_intolerant&quot;</span>: false</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>之后研究下使用内置的pprint模块，也可以让其它任何东西打印输出的更漂亮</p>
<p>还有一个库叫做 beeprint，估计也很香</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/42504137">打印 Python 的一切 — pprint &amp; beeprint</a></p>
<h1 id="行内的-if"><a href="#行内的-if" class="headerlink" title="行内的 if"></a>行内的 if</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span> <span class="string">&quot;Hello&quot;</span> <span class="keyword">if</span> <span class="literal">True</span> <span class="keyword">else</span> <span class="string">&quot;World&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Hello</span><br></pre></td></tr></table></figure>
<h1 id="迭代对象"><a href="#迭代对象" class="headerlink" title="迭代对象"></a>迭代对象</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">teams = [<span class="string">&quot;Packers&quot;</span>, <span class="string">&quot;49ers&quot;</span>, <span class="string">&quot;Ravens&quot;</span>, <span class="string">&quot;Patriots&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> index, team <span class="keyword">in</span> <span class="built_in">enumerate</span>(teams):</span><br><span class="line">    <span class="built_in">print</span> index, team</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0</span> Packers</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span> 49ers</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> Ravens</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">3</span> Patriots</span><br></pre></td></tr></table></figure>
<h1 id="列表推字典"><a href="#列表推字典" class="headerlink" title="列表推字典"></a>列表推字典</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">teams = [<span class="string">&quot;Packers&quot;</span>, <span class="string">&quot;49ers&quot;</span>, <span class="string">&quot;Ravens&quot;</span>, <span class="string">&quot;Patriots&quot;</span>]</span><br><span class="line"><span class="built_in">print</span> &#123;key: value <span class="keyword">for</span> value, key <span class="keyword">in</span> <span class="built_in">enumerate</span>(teams)&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;<span class="string">&#x27;49ers&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;Ravens&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;Patriots&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;Packers&#x27;</span>: <span class="number">0</span>&#125;</span><br></pre></td></tr></table></figure>
<h1 id="列表转字符串"><a href="#列表转字符串" class="headerlink" title="列表转字符串"></a>列表转字符串</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">teams = [<span class="string">&quot;Packers&quot;</span>, <span class="string">&quot;49ers&quot;</span>, <span class="string">&quot;Ravens&quot;</span>, <span class="string">&quot;Patriots&quot;</span>]</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;, &quot;</span>.join(teams)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;Packers, 49ers, Ravens, Patriots&#x27;</span></span><br></pre></td></tr></table></figure>
<h1 id="读取列表的值而不创建"><a href="#读取列表的值而不创建" class="headerlink" title="读取列表的值而不创建"></a>读取列表的值而不创建</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = &#123;<span class="string">&#x27;user&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Max&#x27;</span>, <span class="string">&#x27;three&#x27;</span>: <span class="number">4</span>&#125;</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">   is_admin = data[<span class="string">&#x27;admin&#x27;</span>]</span><br><span class="line"><span class="keyword">except</span> KeyError:</span><br><span class="line">   is_admin = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 改为</span></span><br><span class="line">data = &#123;<span class="string">&#x27;user&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Max&#x27;</span>, <span class="string">&#x27;three&#x27;</span>: <span class="number">4</span>&#125;</span><br><span class="line">is_admin = data.get(<span class="string">&#x27;admin&#x27;</span>, <span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<h1 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="comment">#前3个</span></span><br><span class="line"><span class="built_in">print</span> x[:<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="comment">#中间4个</span></span><br><span class="line"><span class="built_in">print</span> x[<span class="number">1</span>:<span class="number">5</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="comment">#最后3个</span></span><br><span class="line"><span class="built_in">print</span> x[<span class="number">3</span>:]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="comment">#奇数项</span></span><br><span class="line"><span class="built_in">print</span> x[::<span class="number">2</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>]</span><br><span class="line"><span class="comment">#偶数项</span></span><br><span class="line"><span class="built_in">print</span> x[<span class="number">1</span>::<span class="number">2</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>]</span><br></pre></td></tr></table></figure>
<h1 id="迭代工具"><a href="#迭代工具" class="headerlink" title="迭代工具"></a>迭代工具</h1><p>和collections库一样，还有一个库叫itertools，对某些问题真能高效地解决。其中一个用例是查找所有组合，他能告诉你在一个组中元素的所有的组合方式</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> combinations</span><br><span class="line">teams = [<span class="string">&quot;Packers&quot;</span>, <span class="string">&quot;49ers&quot;</span>, <span class="string">&quot;Ravens&quot;</span>, <span class="string">&quot;Patriots&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> game <span class="keyword">in</span> combinations(teams, <span class="number">2</span>):</span><br><span class="line">    <span class="built_in">print</span> game</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="string">&#x27;Packers&#x27;</span>, <span class="string">&#x27;49ers&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="string">&#x27;Packers&#x27;</span>, <span class="string">&#x27;Ravens&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="string">&#x27;Packers&#x27;</span>, <span class="string">&#x27;Patriots&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="string">&#x27;49ers&#x27;</span>, <span class="string">&#x27;Ravens&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="string">&#x27;49ers&#x27;</span>, <span class="string">&#x27;Patriots&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="string">&#x27;Ravens&#x27;</span>, <span class="string">&#x27;Patriots&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h1 id="OrderedDict"><a href="#OrderedDict" class="headerlink" title="OrderedDict"></a>OrderedDict</h1><p><a target="_blank" rel="noopener" href="https://www.geeksforgeeks.org/ordereddict-in-python/">OrderedDict in Python - GeeksforGeeks</a></p>
<h1 id="pathlib"><a href="#pathlib" class="headerlink" title="pathlib"></a>pathlib</h1><p><a target="_blank" rel="noopener" href="https://geek-docs.com/python/python-tutorial/python-pathlib.html">Python pathlib 教程|极客教程</a></p>
<h1 id="enumerate"><a href="#enumerate" class="headerlink" title="enumerate"></a>enumerate</h1><p><a target="_blank" rel="noopener" href="https://www.runoob.com/python/python-func-enumerate.html">Python enumerate() 函数</a></p>
<h1 id="Argument-list-too-long-error-for-rm-cp-mv"><a href="#Argument-list-too-long-error-for-rm-cp-mv" class="headerlink" title="Argument list too long error for rm, cp, mv"></a>Argument list too long error for rm, cp, mv</h1><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/11289551/argument-list-too-long-error-for-rm-cp-mv-commands">Argument list too long error for rm, cp, mv commands</a></p>
<h1 id="CSV-基础"><a href="#CSV-基础" class="headerlink" title="CSV 基础"></a>CSV 基础</h1><p><a target="_blank" rel="noopener" href="https://geek-docs.com/python/python-tutorial/python-csv.html">https://geek-docs.com/python/python-tutorial/python-csv.html</a></p>
<h1 id="对象排序"><a href="#对象排序" class="headerlink" title="对象排序"></a>对象排序</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, department</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.department = department</span><br><span class="line">        self.total_order_count = <span class="number">0</span></span><br><span class="line">        self.duration = <span class="number">0</span></span><br><span class="line">        self.order_list = []</span><br><span class="line">        self.question_list = []</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">compare_student</span>(<span class="params">student</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;为 department 里比较每个系最积极的学生做的比较器&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    student.set_total_order_count()</span><br><span class="line">    <span class="keyword">return</span> student.total_order_count</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;调用比较器&quot;&quot;&quot;</span></span><br><span class="line">student_list.sort(key=compare_student)</span><br></pre></td></tr></table></figure>
<h1 id="数据库排序"><a href="#数据库排序" class="headerlink" title="数据库排序"></a>数据库排序</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">messages_for_user</span>(<span class="params">request</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">gen_response</span>(<span class="params">code: <span class="built_in">int</span>, data: <span class="built_in">str</span></span>):</span></span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;</span><br><span class="line">            <span class="string">&#x27;code&#x27;</span>: code,</span><br><span class="line">            <span class="string">&#x27;data&#x27;</span>: data</span><br><span class="line">        &#125;, status=code)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">assert</span> request.method == <span class="string">&quot;POST&quot;</span></span><br><span class="line">        name = request.COOKIES[<span class="string">&#x27;user&#x27;</span>]</span><br><span class="line">        user = User.objects.get(name=name)</span><br><span class="line">        messages = Message.objects.<span class="built_in">filter</span>(user=user)</span><br><span class="line">        <span class="keyword">assert</span> <span class="built_in">len</span>(messages) != <span class="number">0</span></span><br><span class="line">        <span class="keyword">return</span> gen_response(<span class="number">200</span>, [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&#x27;title&#x27;</span>: msg.title,</span><br><span class="line">                <span class="string">&#x27;content&#x27;</span>: msg.content,</span><br><span class="line">                <span class="string">&#x27;timestamp&#x27;</span>: <span class="built_in">int</span>(msg.pub_date.timestamp())</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> msg <span class="keyword">in</span> messages.order_by(<span class="string">&#x27;-pub_date&#x27;</span>)</span><br><span class="line">        ])</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line">        <span class="keyword">return</span> gen_response(<span class="number">400</span>, <span class="string">&quot;查无此人&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>不得不说，这一段写的真的很漂亮，这样推导出了一个字典列表。以及，函数内定义函数，都很漂亮。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Eren Zhao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://example.com/2022/02/25/CS/others/%E4%BA%BA%E7%94%9F%E8%8B%A6%E7%9F%AD%EF%BC%8C%E6%88%91%E7%94%A8Python/">http://example.com/2022/02/25/CS/others/%E4%BA%BA%E7%94%9F%E8%8B%A6%E7%9F%AD%EF%BC%8C%E6%88%91%E7%94%A8Python/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/2022%E6%98%A5%E5%AD%A3/">2022春季</a><a class="post-meta__tags" href="/tags/Python/">Python</a></div><div class="post_share"><div class="addthis_inline_share_toolbox"></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-62b11572b25ab3ab" async="async"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/03/01/CS/others/Python_oop/"><img class="prev-cover" src="https://pic.imgdb.cn/item/62270e975baa1a80ab37e520.jpg" onerror="onerror=null;src='https://wkphoto.cdn.bcebos.com/1f178a82b9014a9058a735deb9773912b31bee3c.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Python Tutorial Reading Note</div></div></a></div><div class="next-post pull-right"><a href="/2022/02/23/CS/others/git_review/"><img class="next-cover" src="https://pic.imgdb.cn/item/61f0fc772ab3f51d9173149e.jpg" onerror="onerror=null;src='https://wkphoto.cdn.bcebos.com/1f178a82b9014a9058a735deb9773912b31bee3c.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">Git Review</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2022/02/22/CS/others/Tsing_answer_analysis/" title="答疑坊数据统计"><img class="cover" src="https://pic.imgdb.cn/item/61ed143f2ab3f51d911d4294.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-22</div><div class="title">答疑坊数据统计</div></div></a></div><div><a href="/2022/03/01/CS/others/Python_oop/" title="Python Tutorial Reading Note"><img class="cover" src="https://pic.imgdb.cn/item/62270e975baa1a80ab37e520.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-01</div><div class="title">Python Tutorial Reading Note</div></div></a></div><div><a href="/2022/01/17/CS/others/SRT/" title="SRT"><img class="cover" src="https://pic.imgdb.cn/item/61eccb212ab3f51d91d5f245.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-17</div><div class="title">SRT</div></div></a></div><div><a href="/2022/05/25/%E9%9A%8F%E7%AC%94/%E6%B8%85%E5%8D%8E%E5%9B%AD%E6%97%A5%E8%AE%B0/%E6%B8%85%E5%8D%8E%E5%9B%AD%E6%97%A5%E8%AE%B0--%E7%AC%AC%E4%BA%94%E9%83%A8/" title="清华园日记——第五部"><img class="cover" src="https://zhaochenyang20.github.io/pic/embed/5_31_1.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-25</div><div class="title">清华园日记——第五部</div></div></a></div><div><a href="/2022/05/02/%E9%9A%8F%E7%AC%94/%E6%B8%85%E5%8D%8E%E5%9B%AD%E6%97%A5%E8%AE%B0/%E6%B8%85%E5%8D%8E%E5%9B%AD%E6%97%A5%E8%AE%B0--%E7%AC%AC%E5%9B%9B%E9%83%A8/" title="清华园日记——第四部"><img class="cover" src="https://pic.imgdb.cn/item/61eccc282ab3f51d91d6db18.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-02</div><div class="title">清华园日记——第四部</div></div></a></div><div><a href="/2022/03/16/%E9%9A%8F%E7%AC%94/%E5%BF%83%E5%BF%83%E5%BF%B5%E5%BF%B5/how_to_ask_a_question/" title="提问的智慧"><img class="cover" src="https://pic.imgdb.cn/item/623475f75baa1a80ab3b54f1.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-16</div><div class="title">提问的智慧</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div><div id="comment-switch"><span class="first-comment">Valine</span><span class="switch-btn"></span><span class="second-comment">Disqus</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend.jpg'" alt="avatar"/></div><div class="author-info__name">Eren Zhao</div><div class="author-info__description">Wake me from this dreaming</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">181</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">56</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">12</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/zhaochenyang20"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">越南太乱，我只想去码头上整点薯条...</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%BA%E7%94%9F%E8%8B%A6%E7%9F%AD%EF%BC%8C%E6%88%91%E7%94%A8python"><span class="toc-number">1.</span> <span class="toc-text">人生苦短，我用python</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E7%9A%84%E8%BF%90%E7%AE%97"><span class="toc-number">2.</span> <span class="toc-text">数的运算</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E4%B8%8B%E7%BA%BF"><span class="toc-number">3.</span> <span class="toc-text">数字下线</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B8%B8%E9%87%8F"><span class="toc-number">4.</span> <span class="toc-text">常量</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#list"><span class="toc-number">5.</span> <span class="toc-text">list</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#sort-sorted-reverse"><span class="toc-number">5.1.</span> <span class="toc-text">sort, sorted, reverse</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#list%E6%B7%BB%E5%8A%A0%E5%85%83%E7%B4%A0"><span class="toc-number">5.2.</span> <span class="toc-text">list添加元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%81%8D%E5%8E%86%E5%88%97%E8%A1%A8"><span class="toc-number">5.3.</span> <span class="toc-text">遍历列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E4%BF%AE%E9%A5%B0%E8%A2%AB%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1%E6%9D%A5%E4%BC%98%E5%8C%96%E5%BE%AA%E7%8E%AF"><span class="toc-number">5.3.1.</span> <span class="toc-text">使用函数修饰被迭代对象来优化循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-product-%E6%89%81%E5%B9%B3%E5%8C%96%E5%A4%9A%E5%B1%82%E5%B5%8C%E5%A5%97%E5%BE%AA%E7%8E%AF"><span class="toc-number">5.3.2.</span> <span class="toc-text">使用 product 扁平化多层嵌套循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-islice-%E5%AE%9E%E7%8E%B0%E5%BE%AA%E7%8E%AF%E5%86%85%E9%9A%94%E8%A1%8C%E5%A4%84%E7%90%86"><span class="toc-number">5.3.3.</span> <span class="toc-text">使用 islice 实现循环内隔行处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8takewhile-%E4%BB%A3%E6%9B%BFbreak%E8%AF%AD%E5%8F%A5"><span class="toc-number">5.3.4.</span> <span class="toc-text">使用takewhile()代替break语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%94%9F%E6%88%90%E5%99%A8%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84%E4%BF%AE%E9%A5%B0%E5%87%BD%E6%95%B0"><span class="toc-number">5.3.5.</span> <span class="toc-text">使用生成器编写自己的修饰函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%89%E8%81%8C%E8%B4%A3%E6%8B%86%E8%A7%A3%E5%BE%AA%E7%8E%AF%E4%BD%93%E5%86%85%E5%A4%8D%E6%9D%82%E4%BB%A3%E7%A0%81%E5%9D%97"><span class="toc-number">5.3.6.</span> <span class="toc-text">按职责拆解循环体内复杂代码块</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#numpy-array"><span class="toc-number">6.</span> <span class="toc-text">numpy.array</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#dictionary"><span class="toc-number">7.</span> <span class="toc-text">dictionary</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%85%83%E7%B4%A0"><span class="toc-number">7.1.</span> <span class="toc-text">添加元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%89%E7%85%A7key%E5%80%BC%E6%8E%92%E5%BA%8F"><span class="toc-number">7.2.</span> <span class="toc-text">按照key值排序</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3"><span class="toc-number">8.</span> <span class="toc-text">官方文档</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Robust"><span class="toc-number">9.</span> <span class="toc-text">Robust</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#tqdm-yyds"><span class="toc-number">10.</span> <span class="toc-text">tqdm yyds!</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#try-except"><span class="toc-number">11.</span> <span class="toc-text">try except:</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#python-json"><span class="toc-number">12.</span> <span class="toc-text">python json</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#os-listdir"><span class="toc-number">13.</span> <span class="toc-text">os.listdir()</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#embed"><span class="toc-number">14.</span> <span class="toc-text">embed()</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%81%8D%E5%8E%86%E5%AD%97%E5%85%B8"><span class="toc-number">15.</span> <span class="toc-text">遍历字典</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#global%E5%8F%82%E6%95%B0%E5%8D%B1%E9%99%A9"><span class="toc-number">16.</span> <span class="toc-text">global参数危险</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%9D%9E%E6%B3%95%E4%BF%AE%E6%94%B9"><span class="toc-number">17.</span> <span class="toc-text">字符串非法修改</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%BC%95%E7%94%A8"><span class="toc-number">18.</span> <span class="toc-text">模块引用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E5%B9%BF%E6%92%AD"><span class="toc-number">19.</span> <span class="toc-text">列表广播</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#random"><span class="toc-number">20.</span> <span class="toc-text">random</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Conda%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">21.</span> <span class="toc-text">Conda基本操作</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#pip-install%E9%81%87%E4%B8%8Atimeout"><span class="toc-number">22.</span> <span class="toc-text">pip install遇上timeout</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Wget"><span class="toc-number">23.</span> <span class="toc-text">Wget</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%80%E7%AE%80%E4%BE%BF%E7%9A%84%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2"><span class="toc-number">24.</span> <span class="toc-text">最简便的进制转换</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Torch"><span class="toc-number">25.</span> <span class="toc-text">Torch</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#TORCH-OPTIM"><span class="toc-number">25.0.1.</span> <span class="toc-text">TORCH.OPTIM</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#typing"><span class="toc-number">26.</span> <span class="toc-text">typing</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E6%B3%A8%E9%87%8A"><span class="toc-number">26.1.</span> <span class="toc-text">基本类型注释</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E7%B1%BB%E5%9E%8B%E6%B3%A8%E9%87%8A"><span class="toc-number">26.2.</span> <span class="toc-text">复杂类型注释</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%AB%E5%90%8D"><span class="toc-number">26.3.</span> <span class="toc-text">别名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%94%E5%9B%9E%E5%A4%9A%E4%B8%AA%E5%80%BC"><span class="toc-number">26.4.</span> <span class="toc-text">返回多个值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AF%E9%80%89%E7%B1%BB%E5%9E%8B"><span class="toc-number">26.5.</span> <span class="toc-text">可选类型</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#assert"><span class="toc-number">27.</span> <span class="toc-text">assert</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E7%88%AC%E8%99%AB%E9%97%AE%E9%A2%98"><span class="toc-number">28.</span> <span class="toc-text">一些爬虫问题</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Iterator-%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">29.</span> <span class="toc-text">Iterator 生成器</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%9A%E7%BA%A7%E8%AF%8D%E5%85%B8"><span class="toc-number">30.</span> <span class="toc-text">多级词典</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E7%BA%A7%E8%AF%8D%E5%85%B8-try-%E7%9A%84%E9%80%BB%E8%BE%91"><span class="toc-number">31.</span> <span class="toc-text">二级词典 try 的逻辑</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%86%99%E5%85%A5-txt"><span class="toc-number">32.</span> <span class="toc-text">写入 txt</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E5%A4%9A%E8%A1%8C-json"><span class="toc-number">33.</span> <span class="toc-text">读取多行 json</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8E%A8%E5%AF%BC"><span class="toc-number">34.</span> <span class="toc-text">推导</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Python-%E8%A7%A3%E5%8C%85"><span class="toc-number">35.</span> <span class="toc-text">Python 解包</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Counter-%E8%AE%A1%E6%95%B0%E5%99%A8"><span class="toc-number">36.</span> <span class="toc-text">Counter 计数器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E5%8C%96-Counter-%E7%B1%BB"><span class="toc-number">36.1.</span> <span class="toc-text">实例化 Counter 类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E6%96%B9%E6%B3%95"><span class="toc-number">36.2.</span> <span class="toc-text">类方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%A4%E4%BA%86%E5%AD%97%E5%85%B8%E4%B9%8B%E5%A4%96%E7%9A%84-Counter"><span class="toc-number">36.3.</span> <span class="toc-text">除了字典之外的 Counter</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%BC%82%E4%BA%AE%E7%9A%84%E6%89%93%E5%8D%B0-JSON"><span class="toc-number">37.</span> <span class="toc-text">漂亮的打印 JSON</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A1%8C%E5%86%85%E7%9A%84-if"><span class="toc-number">38.</span> <span class="toc-text">行内的 if</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1"><span class="toc-number">39.</span> <span class="toc-text">迭代对象</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%8E%A8%E5%AD%97%E5%85%B8"><span class="toc-number">40.</span> <span class="toc-text">列表推字典</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">41.</span> <span class="toc-text">列表转字符串</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E5%88%97%E8%A1%A8%E7%9A%84%E5%80%BC%E8%80%8C%E4%B8%8D%E5%88%9B%E5%BB%BA"><span class="toc-number">42.</span> <span class="toc-text">读取列表的值而不创建</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%87%E7%89%87"><span class="toc-number">43.</span> <span class="toc-text">切片</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E5%B7%A5%E5%85%B7"><span class="toc-number">44.</span> <span class="toc-text">迭代工具</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#OrderedDict"><span class="toc-number">45.</span> <span class="toc-text">OrderedDict</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#pathlib"><span class="toc-number">46.</span> <span class="toc-text">pathlib</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#enumerate"><span class="toc-number">47.</span> <span class="toc-text">enumerate</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Argument-list-too-long-error-for-rm-cp-mv"><span class="toc-number">48.</span> <span class="toc-text">Argument list too long error for rm, cp, mv</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CSV-%E5%9F%BA%E7%A1%80"><span class="toc-number">49.</span> <span class="toc-text">CSV 基础</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%8E%92%E5%BA%8F"><span class="toc-number">50.</span> <span class="toc-text">对象排序</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8E%92%E5%BA%8F"><span class="toc-number">51.</span> <span class="toc-text">数据库排序</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/07/01/%E9%9A%8F%E7%AC%94/%E6%B8%85%E5%8D%8E%E5%9B%AD%E6%97%A5%E8%AE%B0/%E6%B8%85%E5%8D%8E%E5%9B%AD%E6%97%A5%E8%AE%B0--%E7%AC%AC%E5%85%AD%E9%83%A8/" title="清华园日记——第六部"><img src="https://zhaochenyang20.github.io/pic/embed/6_8_3.jpg" onerror="this.onerror=null;this.src='https://wkphoto.cdn.bcebos.com/1f178a82b9014a9058a735deb9773912b31bee3c.jpg'" alt="清华园日记——第六部"/></a><div class="content"><a class="title" href="/2022/07/01/%E9%9A%8F%E7%AC%94/%E6%B8%85%E5%8D%8E%E5%9B%AD%E6%97%A5%E8%AE%B0/%E6%B8%85%E5%8D%8E%E5%9B%AD%E6%97%A5%E8%AE%B0--%E7%AC%AC%E5%85%AD%E9%83%A8/" title="清华园日记——第六部">清华园日记——第六部</a><time datetime="2022-07-01T07:22:20.418Z" title="Created 2022-07-01 15:22:20">2022-07-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/27/Lecture/2022%20Spring/quantum/" title="量子计算研讨课"><img src="https://pic.imgdb.cn/item/61eccb272ab3f51d91d5f874.jpg" onerror="this.onerror=null;this.src='https://wkphoto.cdn.bcebos.com/1f178a82b9014a9058a735deb9773912b31bee3c.jpg'" alt="量子计算研讨课"/></a><div class="content"><a class="title" href="/2022/06/27/Lecture/2022%20Spring/quantum/" title="量子计算研讨课">量子计算研讨课</a><time datetime="2022-06-27T01:13:48.819Z" title="Created 2022-06-27 09:13:48">2022-06-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/22/Lecture/2022%20Spring/%E5%9B%BE%E5%BD%A2%E5%AD%A6%E5%A4%A7%E4%BD%9C%E4%B8%9A%E6%8A%A5%E5%91%8A/" title="图形学开源报告"><img src="https://pic.imgdb.cn/item/61f0fc802ab3f51d91731f03.jpg" onerror="this.onerror=null;this.src='https://wkphoto.cdn.bcebos.com/1f178a82b9014a9058a735deb9773912b31bee3c.jpg'" alt="图形学开源报告"/></a><div class="content"><a class="title" href="/2022/06/22/Lecture/2022%20Spring/%E5%9B%BE%E5%BD%A2%E5%AD%A6%E5%A4%A7%E4%BD%9C%E4%B8%9A%E6%8A%A5%E5%91%8A/" title="图形学开源报告">图形学开源报告</a><time datetime="2022-06-22T11:40:15.804Z" title="Created 2022-06-22 19:40:15">2022-06-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/22/%E9%9A%8F%E7%AC%94/%E5%BF%83%E5%BF%83%E5%BF%B5%E5%BF%B5/%E7%AD%94%E7%96%91%E5%9D%8A%E6%8A%80%E6%9C%AF%E7%BB%84%E6%94%B9%E9%9D%A9%E6%96%B9%E6%A1%88/" title="答疑坊小程序开发组改革"><img src="https://pic.imgdb.cn/item/61eccc262ab3f51d91d6d94a.jpg" onerror="this.onerror=null;this.src='https://wkphoto.cdn.bcebos.com/1f178a82b9014a9058a735deb9773912b31bee3c.jpg'" alt="答疑坊小程序开发组改革"/></a><div class="content"><a class="title" href="/2022/06/22/%E9%9A%8F%E7%AC%94/%E5%BF%83%E5%BF%83%E5%BF%B5%E5%BF%B5/%E7%AD%94%E7%96%91%E5%9D%8A%E6%8A%80%E6%9C%AF%E7%BB%84%E6%94%B9%E9%9D%A9%E6%96%B9%E6%A1%88/" title="答疑坊小程序开发组改革">答疑坊小程序开发组改革</a><time datetime="2022-06-22T08:19:52.564Z" title="Created 2022-06-22 16:19:52">2022-06-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/16/Lecture/2022%20Spring/%E8%AF%B7%E4%BB%A5%E4%BD%A0%E7%9A%84%E5%90%8D%E5%AD%97%E5%91%BC%E5%94%A4%E6%88%91/" title="我们为什么会选择社会化抚养"><img src="https://pic.imgdb.cn/item/623475d95baa1a80ab3b102b.jpg" onerror="this.onerror=null;this.src='https://wkphoto.cdn.bcebos.com/1f178a82b9014a9058a735deb9773912b31bee3c.jpg'" alt="我们为什么会选择社会化抚养"/></a><div class="content"><a class="title" href="/2022/06/16/Lecture/2022%20Spring/%E8%AF%B7%E4%BB%A5%E4%BD%A0%E7%9A%84%E5%90%8D%E5%AD%97%E5%91%BC%E5%94%A4%E6%88%91/" title="我们为什么会选择社会化抚养">我们为什么会选择社会化抚养</a><time datetime="2022-06-16T11:50:59.953Z" title="Created 2022-06-16 19:50:59">2022-06-16</time></div></div></div></div></div></div></main><footer id="footer" style="background: ＃191970"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Eren Zhao</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div><script type="text/javascript" id="maid-script" src="https://unpkg.com/mermaid@undefined/dist/mermaid.min.js?v=undefined"></script><script>if (window.mermaid) {
  var options = JSON.parse(document.getElementById('maid-script').getAttribute('mermaidoptioins'));
  mermaid.initialize(options);
}</script></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Local search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '',
      appKey: '',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script>function loadDisqus () {
  var disqus_config = function () {
    this.page.url = 'http://example.com/2022/02/25/CS/others/%E4%BA%BA%E7%94%9F%E8%8B%A6%E7%9F%AD%EF%BC%8C%E6%88%91%E7%94%A8Python/'
    this.page.identifier = '2022/02/25/CS/others/人生苦短，我用Python/'
    this.page.title = '人生苦短，我用 Python Part 1'
  };

  window.disqusReset = () => {
    DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  if (window.DISQUS) disqusReset()
  else {
    (function() { 
      var d = document, s = d.createElement('script');
      s.src = 'https://.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }
}

if ('Valine' === 'Disqus' || !true) {
  if (true) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
  else loadDisqus()
} else {
  function loadOtherComment () {
    loadDisqus()
  }
}
</script></div><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/"});</script></body></html>